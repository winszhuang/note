{"version":3,"sources":["webpack:///./src/views/verification/Register.vue?fb4e","webpack:///./src/views/verification/userVerifyEffect.js","webpack:///./src/views/verification/Register.vue","webpack:///./src/views/verification/Register.vue?9bb4"],"names":["userVerifyEffect","userInput","reactive","name","email","password","errorMessage","socialLogin","social","loginBySocialThen","console","log","code","watchErrorMessage","watchEffect","length","class","style","type","placeholder","autocomplete","spellcheck","checkAndSignUp","icon","size","to","components","setup","router","userInfo","headshot","recentPageIds","pages","firstPageData","page","blocks","push","render","__scopeId"],"mappings":"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","file":"js/chunk-43663db4.9a1a4161.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Register.vue?vue&type=style&index=0&id=d1635538&lang=scss&scoped=true\"","import { reactive, watchEffect } from 'vue';\nimport { loginBySocialThen } from '../../store/firebaseAuth';\n\nconst userVerifyEffect = () => {\n  const userInput = reactive({\n    name: '',\n    email: '',\n    password: '',\n  });\n\n  const errorMessage = reactive({\n    name: '',\n    email: '',\n    password: '',\n  });\n\n  const socialLogin = async (social) => {\n    try {\n      await loginBySocialThen(social);\n    } catch (error) {\n      console.log(error);\n      if (error.code === 'auth/operation-not-allowed') {\n        console.log(`${social}登入失敗`);\n      }\n    }\n  };\n\n  const watchErrorMessage = () => watchEffect(() => {\n    if (userInput.email.length === 1 && errorMessage.email !== '') {\n      errorMessage.email = '';\n    }\n    if (userInput.password.length === 1 && errorMessage.password !== '') {\n      errorMessage.password = '';\n    }\n    if (userInput.name.length === 1 && errorMessage.name !== '') {\n      errorMessage.name = '';\n    }\n  });\n\n  return {\n    userInput,\n    socialLogin,\n    errorMessage,\n    watchErrorMessage,\n  };\n};\n\nexport default userVerifyEffect;\n","<template>\n  <main class=\"fullscreen d-flex justify-content-center align-items-center\">\n    <form class=\"text-center\">\n      <div class=\"verify-title\">註冊</div>\n      <div class=\"verify-subtitle\">請輸入email以及密碼</div>\n\n      <div :class=\"{ 'verify-input': true, 'error-border': errorMessage.name !== '' }\">\n        <input type=\"text\" placeholder=\"使用者暱稱\" autocomplete\n            v-model=\"userInput.name\" spellcheck=\"false\">\n        <div class=\"error-message\">{{ errorMessage.name }}</div>\n      </div>\n      <div :class=\"{ 'verify-input': true, 'error-border': errorMessage.email !== '' }\">\n        <input type=\"email\" placeholder=\"user@gmail.com\" autocomplete\n            v-model=\"userInput.email\" spellcheck=\"false\">\n        <div class=\"error-message\">{{ errorMessage.email }}</div>\n      </div>\n      <div :class=\"{ 'verify-input': true, 'error-border': errorMessage.password !== '' }\">\n        <input type=\"password\" placeholder=\"password\" autocomplete\n            v-model=\"userInput.password\" spellcheck=\"false\">\n        <div class=\"error-message\">{{ errorMessage.password }}</div>\n      </div>\n\n      <button class=\"w-100 btn btn-lg btn-primary mb-4\"\n            type=\"button\"\n            @click=\"checkAndSignUp\"\n        >註冊</button>\n\n      <div class=\" mb-2\" style=\"color: #5f5f5f;\">從其他地方登入</div>\n      <div class=\"d-flex justify-content-center mb-4\">\n        <div class=\"brand me-2\" type=\"button\" @click=\"socialLogin('google')\">\n          <font-awesome-icon :icon=\"['fab', 'google-plus-square']\" size=\"2x\"/>\n        </div>\n        <div class=\"brand me-2\" type=\"button\">\n          <font-awesome-icon :icon=\"['fab', 'facebook-square']\"\n                size=\"2x\"/>\n        </div>\n        <div class=\"brand me-2\" type=\"button\">\n          <font-awesome-icon :icon=\"['fab', 'twitter-square']\"\n                size=\"2x\"/>\n        </div>\n      </div>\n\n      <div class=\"d-flex justify-content-center\">\n        <div class=\"info-bottom w-50\">\n          <hr>\n          <router-link to=\"/signin\">\n            <div type=\"button\" class=\"info-bottom-text mb-1\">已經有帳號 ? 登入帳號</div>\n          </router-link>\n          <div type=\"button\" class=\"info-bottom-text\">忘記密碼?</div>\n          <hr>\n        </div>\n      </div>\n    </form>\n  </main>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router';\nimport userVerifyEffect from './userVerifyEffect';\nimport { signUp } from '../../store/firebaseAuth';\nimport { setUserDataToFS } from '../../store/firestore';\nimport firstPageData from '../workspace/firstPageData';\n\nexport default {\n  name: 'Register',\n  components: {\n  },\n  setup() {\n    const router = useRouter();\n    const {\n      userInput,\n      socialLogin,\n      errorMessage,\n      watchErrorMessage,\n    } = userVerifyEffect();\n\n    watchErrorMessage();\n\n    const checkAndSignUp = async () => {\n      if (userInput.name === '') {\n        errorMessage.name = '請輸入暱稱';\n      }\n      if (userInput.email === '') {\n        errorMessage.email = '請輸入email';\n      }\n      if (userInput.password === '') {\n        errorMessage.password = '請輸入密碼';\n      }\n      try {\n        await signUp(userInput.email, userInput.password);\n        await setUserDataToFS({\n          userInfo: {\n            email: userInput.email,\n            headshot: '',\n            name: userInput.name,\n            recentPageIds: [],\n          },\n          pages: [firstPageData.page],\n          blocks: firstPageData.blocks,\n        });\n        console.log('註冊成功');\n        router.push('/signin');\n      } catch (error) {\n        console.log(error);\n        if (error.code === 'auth/invalid-email') {\n          errorMessage.email = '錯誤的email格式';\n        }\n        if (error.code === 'auth/user-not-found') {\n          errorMessage.email = '沒有使用者資料，請先註冊';\n        }\n        if (error.code === 'auth/wrong-password') {\n          errorMessage.password = '密碼輸入錯誤';\n        }\n        if (error.code === 'auth/weak-password') {\n          errorMessage.password = '至少需要輸入6個字元';\n        }\n      }\n    };\n\n    return {\n      userInput,\n      socialLogin,\n      checkAndSignUp,\n      errorMessage,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/component/_verification.scss';\n\n</style>\n","import { render } from \"./Register.vue?vue&type=template&id=d1635538&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=d1635538&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-d1635538\"\n\nexport default script"],"sourceRoot":""}