{"version":3,"sources":["webpack:///./src/views/workspace/header/BreadcrumbItem.vue?da9f","webpack:///./src/views/Search.vue?8423","webpack:///./src/views/sidebar/Sidebar.vue?8dd3","webpack:///./src/components/AreaSelect.vue?64f6","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/components/BlockStyleEditor.vue?0ba7","webpack:///./src/views/Home.vue?f402","webpack:///./src/views/workspace/PageInfo.vue?204a","webpack:///./src/views/workspace/header/Breadcrumb.vue?160c","webpack:///./src/components/DragItem.vue?2096","webpack:///./src/components/Block.vue?cb5e","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./src/views/workspace/FrontPage.vue?55e9","webpack:///./src/views/Home.vue","webpack:///./src/views/sidebar/Sidebar.vue","webpack:///./src/views/sidebar/UserField.vue","webpack:///./src/components/NinjaButton.vue","webpack:///./src/components/NinjaButton.vue?31e2","webpack:///./src/views/sidebar/UserField.vue?1e6d","webpack:///./src/components/CustomList.vue","webpack:///./src/components/CustomList.vue?003e","webpack:///./src/components/Modal.vue","webpack:///./src/components/Modal.vue?9db4","webpack:///./src/views/Search.vue","webpack:///./src/views/Search.vue?0900","webpack:///./src/components/Splitter.vue","webpack:///./src/components/Splitter.vue?1cf2","webpack:///./src/views/sidebar/Sidebar.vue?56e3","webpack:///./src/views/workspace/Workspace.vue","webpack:///./src/views/workspace/header/Header.vue","webpack:///./src/views/workspace/header/Breadcrumb.vue","webpack:///./src/views/workspace/header/BreadcrumbItem.vue","webpack:///./src/views/workspace/header/BreadcrumbItem.vue?159d","webpack:///./src/views/workspace/header/Breadcrumb.vue?8029","webpack:///./src/views/workspace/header/Header.vue?6082","webpack:///./src/components/Block.vue","webpack:///./src/components/DragItem.vue","webpack:///./src/components/DragItem.vue?df0c","webpack:///./src/components/Block.vue?19c4","webpack:///./src/components/AreaSelect.vue","webpack:///./src/components/areaSelectEffect.js","webpack:///./src/components/AreaSelect.vue?3551","webpack:///./src/components/input/PageEditable.vue","webpack:///./src/components/input/PageEditable.vue?2f5f","webpack:///./src/views/workspace/PageInfo.vue","webpack:///./src/views/workspace/PageInfo.vue?f04b","webpack:///./src/components/BlockStyleEditor.vue","webpack:///./src/components/BlockStyleEditor.vue?d0bd","webpack:///./src/views/workspace/FrontPage.vue","webpack:///./src/views/workspace/FrontPage.vue?5468","webpack:///./src/store/watchStoreEffect.js","webpack:///./src/components/updateIDsEffectByDragDrop.js","webpack:///./src/views/workspace/Workspace.vue?6837","webpack:///./src/views/Home.vue?ab8c","webpack:///./src/views/sidebar/UserField.vue?ba39","webpack:///./src/views/workspace/Workspace.vue?3fa8","webpack:///./src/components/Modal.vue?257e","webpack:///./src/views/workspace/header/Header.vue?b77e","webpack:///./src/components/CustomList.vue?fde8"],"names":["module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","trim","DESCRIPTORS","global","isForced","redefine","has","classof","inheritIfRequired","toPrimitive","fails","create","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","NUMBER","NativeNumber","NumberPrototype","prototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","length","index","code","it","charCodeAt","NaN","slice","parseInt","key","NumberWrapper","value","arguments","dummy","this","valueOf","call","keys","split","j","constructor","class","style","isShow","handleShow","mode","container-class","is-bg-static","component","isSidebarFloating","isSidebarCollapse","sidebarWidth","class-name","setSidebarWidth","setPrevSidebarWidth","type","icon","rootPages","item","id","page","addPage","blocktype","checkBlockTypeThenAdd","transStyleToFAPrefix","size","name","linkToUserInfo","headshotURL","userInfo","email","floatSidebar","default","isWindowWidthLarge","lockSidebar","className","$emit","props","setup","render","__scopeId","components","NinjaButton","store","router","state","sidebarState","isCollapse","isFloating","window","innerWidth","push","headshot","dispatch","commit","currentPageId","goCurrentPage","hoverHandle","number","toggleShow","caretIcon","deletePage","isHover","addPageInside","childrenPages","FontAwesomeIcon","Object","Number","getters","pages","newPage","blocks","parentId","createdTime","Date","getTime","toString","editTime","tags","cover","newBlock","content","block","isTrueOrFalse","closeModalByClick","$event","containerClass","emit","e","target","searchInput","placeholder","searchPages","goPageAndCloseModal","getContentWithKeyword","searchBlocks","goBlockPosition","getPage","text","emits","recentPages","blockId","str","keyword","includes","strArr","contentHtml","i","commonDomEffect","getMouseOffsetByClickElAndMove","returnMouseOffset","offset","stopMouseMove","splitter","document","getElementById","mouseDown","mouseMove","mouseUp","addEventListener","DEFAULT_SIDEBAR_WIDTH","minWidth","maxWidth","prevSidebarWidth","getSidebarWidthInRange","x","curr","immediate","commonBlockEffect","BlockFactory","addBlockFlow","currentFocusBlock","focusBlockIndex","undefined","addPageTypeBlockFlow","innerPageId","addContent","find","console","log","UserField","CustomList","Modal","Search","Splitter","charAt","hiddenStyleEditor","is-show","isShowBlockStyleEditor","toggleFloatSidebar","currentPage","clickActions","work-area","currentBlocks","is-selected","isBlockSelected","is-under-mouse-on-drag","currentIdUnderTheMouse","clickBlockStyleEditorIconAction","dropActions","cancelDefault","handleBeforeDrop","hiddenBlocksIds","updateToFS","isFSUpdating","aria-label","parentPage","BreadcrumbItem","Breadcrumb","isFSUpdatingHandle","choose","getClassNameOfBlockType","data-block-id","getLevelOfBlock","isSelected","getFirstToUpper","draggable","handleDrag","selectedBlocksIds","el","querySelector","dataTransfer","setDragImage","DragItem","useAreaSelectEffect","AllIds","isBoxACollisionB","isAreaSelectActive","ref","currentSelectedIds","reactive","selector","left","top","width","height","position","x1","y1","x2","y2","setSelector","closest","hasAttribute","clientX","clientY","preventDefault","stopPropagation","activeElement","blur","Math","min","abs","selectorBox","right","bottom","forEach","blockEl","blockBounding","getBoundingClientRect","indexOf","splice","currentBlocksIds","deep","noId","inputToPageContent","keydownAction","setFocusBlock","ContentEditable","editPageData","checkKeydownInPageData","innerText","showTagNameInput","handleKeyDownIntagInput","tag","color","deleteTag","keyCode","focusToTagInput","focus","hiddenTagNameInputByClick","currentSidebarWidth","colors","setBlockColor","styles","setBlockStyle","checkAction","currentWidth","selectedBlocks","setClassNameToBlock","blockDress","setBlockDressByClassName","prev","classNameOfFirstBlock","every","watchStoreEffect","useStore","ls","SecureLS","updatePagesToLSByWatching","watch","set","updateBlocksToLSByWatching","storeObserver","updateEditTimeOfPage","mutation","hasEditBlock","hasEditPage","payload","collapseSidebarByAddSomething","mutations","checkDataInStoreThen","callback","updateRecentPageIds","subscribe","updateIDsEffectByDragDrop","allIds","getTargetId","getCatchIds","ids","handleDrop","catchIds","targetId","newArr","filter","newIndex","Array","apply","hasSelectedBlocks","pasteBlocksAction","setClipboardBlocks","setSelectedBlocksInClipboardBlocks","deleteSelectedBlocks","duplicateBlocksFromSelectedBlocks","handleBlocksByPaste","handleBlocksByKeyDown","setClipboardText","navigator","clipboard","writeText","ctrlKey","executeKeydownListeningWithBlocks","dragStartIds","dataset","isMouseUnderTheElement","clickActionInContent","finalBlock","finalBlockDom","finalBlockEditable","Header","Block","AreaSelect","PageEditable","PageInfo","BlockStyleEditor","FrontPage","clipboardBlocks","clipboardBlocksIds","currentFocusBlockId","initSidebarState","getContenteditable","getEditableElementById","setCursorToEnd","range","getSelection","selectAllChildren","collapseToEnd","currFocusDom","prevFocusDom","Sidebar","Workspace"],"mappings":"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","file":"js/chunk-55c84c12.9e1bce81.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BreadcrumbItem.vue?vue&type=style&index=0&id=c8f24b30&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Search.vue?vue&type=style&index=0&id=7ec26dc8&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Sidebar.vue?vue&type=style&index=0&id=64caf338&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AreaSelect.vue?vue&type=style&index=0&id=e56945ea&lang=scss&scoped=true\"","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BlockStyleEditor.vue?vue&type=style&index=0&id=16bab8ca&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=242ecd16&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PageInfo.vue?vue&type=style&index=0&id=422e5e5c&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Breadcrumb.vue?vue&type=style&index=0&id=da608e12&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DragItem.vue?vue&type=style&index=0&id=7065c0a5&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Block.vue?vue&type=style&index=0&id=2128f502&lang=scss&scoped=true\"","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FrontPage.vue?vue&type=style&index=0&id=e8fdf93c&lang=scss&scoped=true\"","<template>\n  <div class=\"all\">\n    <Sidebar/>\n    <Workspace/>\n  </div>\n</template>\n\n<script>\nimport Sidebar from './sidebar/Sidebar.vue';\nimport Workspace from './workspace/Workspace.vue';\n\nexport default {\n  name: 'Home',\n  components: {\n    Sidebar,\n    Workspace,\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.all{\n  display: flex;\n}\n</style>\n","/* eslint-disable prefer-const */\n/* eslint-disable no-restricted-syntax */\n<template>\n  <Modal v-if=\"isShow\"\n        @close=\"handleShow(false)\"\n        :mode=\"'component'\"\n        :container-class=\"'search-container'\"\n        :is-bg-static=\"false\">\n    <template #component>\n      <Search @close=\"handleShow(false)\"/>\n    </template>\n  </Modal>\n  <div :class=\"{ sidebar: true, 'sidebar-float': isSidebarFloating }\"\n          :style=\"{ width: isSidebarCollapse === true ? '0' : `${sidebarWidth}px` }\">\n      <UserField/>\n      <Splitter :class-name=\"'splitter'\"\n          v-if=\"!isSidebarFloating\"\n          @getMouseOffset=\"setSidebarWidth\"\n          @stopMouseMove=\"setPrevSidebarWidth\"/>\n      <div class=\"field-title\">通用 :</div>\n      <div class=\"customlist-group\">\n        <div class=\"customlist-group-item\"\n              type=\"button\"\n              @click=\"handleShow(true)\">\n          <div class=\"customlist-item-1 ms-4\" style=\"margin-left: 1rem;\">\n            <font-awesome-icon\n                :icon=\"['fas', 'search']\" />\n          </div>\n          <div class=\"customlist-item-6 block-name \">關鍵字搜尋</div>\n        </div>\n      </div>\n      <div class=\"scollitem\">\n        <div class=\"field-title\">頁面 :</div>\n        <div class=\"customlist-group\">\n          <CustomList\n            v-for=\"item in rootPages\"\n            :key=\"item.id\"\n            :page=\"item\"/>\n          <div class=\"customlist-group-item addpage-small\"\n              type=\"button\"\n              @click=\"addPage\">\n              <div class=\"ms-4 customlist-item-1\">+</div>\n              <div class=\"customlist-item-6\">增加頁面</div>\n          </div>\n        </div>\n        <div class=\"field-title\">區塊 :</div>\n        <div class=\"customlist-group\">\n          <div class=\"customlist-group-item\"\n                type=\"button\"\n                v-for=\"item in blocktype\"\n                :key=\"item.type\"\n                @click=\"checkBlockTypeThenAdd(item.type)\">\n            <div class=\"customlist-item-1 ms-4\">\n              <font-awesome-icon\n                  :icon=\"[transStyleToFAPrefix(item.style),\n                    item.icon || 'heading']\" :size=\"item.size || 'xs'\"/>\n            </div>\n            <div class=\"customlist-item-6 block-name\">{{ item.name }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"sidebar-footer\">\n        <div class=\"addpage\" type=\"button\" @click=\"addPage\">\n          <div class=\"addpage-text\">+ 新頁面</div>\n        </div>\n      </div>\n    </div>\n</template>\n\n<script>\nimport { useStore } from 'vuex';\nimport {\n  toRefs, computed, onMounted, watch, ref,\n} from 'vue';\nimport UserField from './UserField.vue';\nimport CustomList from '../../components/CustomList.vue';\nimport Modal from '../../components/Modal.vue';\nimport Search from '../Search.vue';\nimport Splitter from '../../components/Splitter.vue';\nimport commonBlockEffect from '../../components/commonBlockEffect';\nimport { showEffect, generateRandomString } from '../../components/commonEffect';\n\nconst DEFAULT_SIDEBAR_WIDTH = 300;\n\nconst useSidebarWidthEffect = (minWidth, maxWidth) => {\n  const store = useStore();\n  const sidebarWidth = ref(0);\n  const prevSidebarWidth = ref(0);\n\n  const getSidebarWidthInRange = (offset) => {\n    sidebarWidth.value = prevSidebarWidth.value + offset.x;\n    if (sidebarWidth.value > maxWidth) sidebarWidth.value = maxWidth;\n    if (sidebarWidth.value < minWidth) sidebarWidth.value = minWidth;\n    return sidebarWidth.value;\n  };\n\n  const setSidebarWidth = (offset) => {\n    sidebarWidth.value = getSidebarWidthInRange(offset);\n  };\n\n  const setPrevSidebarWidth = () => {\n    prevSidebarWidth.value = sidebarWidth.value;\n  };\n\n  onMounted(() => {\n    sidebarWidth.value = DEFAULT_SIDEBAR_WIDTH;\n    prevSidebarWidth.value = DEFAULT_SIDEBAR_WIDTH;\n  });\n\n  watch(sidebarWidth, (curr) => {\n    store.commit('setCurrentSidebarWidth', curr);\n  }, { immediate: true });\n\n  return {\n    setSidebarWidth,\n    setPrevSidebarWidth,\n    sidebarWidth,\n    prevSidebarWidth,\n  };\n};\n\nconst addBlockEffect = () => {\n  const store = useStore();\n  const { blocktype } = toRefs(store.state);\n  const { currentPageId } = toRefs(store.state.pages);\n  const { BlockFactory } = commonBlockEffect();\n\n  const addBlockFlow = (block) => {\n    const currentFocusBlock = computed(() => store.getters['blocks/currentFocusBlock']);\n    if (currentFocusBlock.value) {\n      const focusBlockIndex = computed(() => store.getters['blocks/getIndexByBlockId'](currentFocusBlock.value.id));\n      store.dispatch('blocks/addBlockAndSetFocusBlockId', { block, index: focusBlockIndex.value + 1 });\n    } else {\n      store.dispatch('blocks/addBlockAndSetFocusBlockId', { block, index: undefined });\n    }\n  };\n\n  const addPageTypeBlockFlow = () => {\n    const innerPageId = generateRandomString();\n\n    store.commit('pages/addPage', {\n      id: innerPageId,\n      name: 'untitle',\n      blocks: [],\n      parentId: currentPageId.value,\n      createdTime: new Date().getTime().toString(),\n      editTime: new Date().getTime().toString(),\n      tags: [],\n      cover: '',\n    });\n\n    const block = new BlockFactory('page').addContent(innerPageId);\n    store.dispatch('blocks/addBlock', { block });\n  };\n\n  const checkBlockTypeThenAdd = (type = 'p') => {\n    if (currentPageId.value === '') {\n      console.log('請先選擇頁面');\n      return;\n    }\n\n    if (!blocktype.value.find((item) => item.type === type)) {\n      console.log('沒有此type類型');\n      return;\n    }\n\n    if (type === 'page') {\n      addPageTypeBlockFlow();\n      return;\n    }\n\n    const newBlock = new BlockFactory(type);\n    addBlockFlow(newBlock);\n  };\n\n  return {\n    checkBlockTypeThenAdd,\n  };\n};\n\nexport default {\n  name: 'Sidebar',\n  components: {\n    UserField,\n    CustomList,\n    Modal,\n    Search,\n    Splitter,\n  },\n  setup() {\n    const store = useStore();\n    const rootPages = computed(() => store.getters['pages/childrenPages'](''));\n    const isSidebarCollapse = computed(() => store.state.sidebarState.isCollapse);\n    const isSidebarFloating = computed(() => store.state.sidebarState.isFloating);\n    const blocktype = computed(() => store.state.blocktype);\n\n    const {\n      setSidebarWidth,\n      setPrevSidebarWidth,\n      sidebarWidth,\n    } = useSidebarWidthEffect(220, 420);\n\n    const { isShow, handleShow } = showEffect();\n    const { checkBlockTypeThenAdd } = addBlockEffect();\n\n    const transStyleToFAPrefix = (style) => `fa${style.charAt(0)}`;\n\n    const addPage = () => store.commit('pages/addPage');\n\n    onMounted(() => handleShow(false));\n\n    return {\n      rootPages,\n      blocktype,\n      addPage,\n      checkBlockTypeThenAdd,\n      transStyleToFAPrefix,\n      isShow,\n      handleShow,\n      isSidebarCollapse,\n      isSidebarFloating,\n      sidebarWidth,\n      setSidebarWidth,\n      setPrevSidebarWidth,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/component/_sidebar.scss';\n@import '../../style/component/_customlist-group.scss';\n.search-container{\n  width: 30%;\n  height: 50%;\n}\n\n.splitter{\n  position: absolute;\n  right: -0.4rem;\n  top: 73px;\n  bottom: 35px;\n  width: .7rem;\n  z-index: 10;\n  &:hover{\n    cursor: col-resize;\n  }\n}\n\n.block-name{\n  padding-top: .05rem;\n}\n\n</style>\n","<template>\n  <div class=\"topfield\">\n    <div :class=\"{ userfield: true, 'p-0': isSidebarCollapse }\" type=\"button\"\n        @click=\"linkToUserInfo\">\n      <div class=\"userfield-icon\">\n        <div :style=\"{ 'background-image': `url(${headshotURL});` }\">C</div>\n      </div>\n      <div class=\"userfield-info\">\n        <div class=\"userfield-info-name\">{{ userInfo?.name || '遊客' }}</div>\n        <div class=\"userfield-info-email\">{{ userInfo?.email || 'xxx.gmail.com' }}</div>\n      </div>\n    </div>\n    <NinjaButton @clickThen=\"floatSidebar\"\n        :class-name=\"'left-collapse'\"\n        v-if=\"!isSidebarFloating\">\n      <template #default=\"{ isShow }\">\n        <div v-show=\"isShow\">\n          <font-awesome-icon :icon=\"['fas', 'angle-double-left']\"/>\n        </div>\n      </template>\n    </NinjaButton>\n    <NinjaButton @clickThen=\"lockSidebar\"\n        :class-name=\"'left-collapse'\"\n        v-if=\"isSidebarFloating && isWindowWidthLarge()\">\n      <template #default=\"{ isShow }\">\n        <div v-show=\"isShow\">\n          <font-awesome-icon :icon=\"['fas', 'lock']\"/>\n        </div>\n      </template>\n    </NinjaButton>\n  </div>\n</template>\n\n<script>\nimport { computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport NinjaButton from '../../components/NinjaButton.vue';\n\nexport default {\n  name: 'UserField',\n  components: { NinjaButton },\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const userInfo = computed(() => store.state.userInfo.userInfo);\n    const isSidebarCollapse = computed(() => store.state.sidebarState.isCollapse);\n    const isSidebarFloating = computed(() => store.state.sidebarState.isFloating);\n\n    const isWindowWidthLarge = () => window.innerWidth > 992;\n\n    const linkToUserInfo = () => {\n      router.push('/userinfo');\n    };\n\n    const headshotURL = computed(() => {\n      if (userInfo.value.headshot) {\n        return `${userInfo.value.headshot}`;\n      }\n      return 'https://image.flaticon.com/icons/png/512/3135/3135715.png';\n    });\n\n    const headshot = computed(() => {\n      if (userInfo.value.headshot) {\n        return `<img src=\"${userInfo.value.headshot}\">`;\n      }\n      return '<img src=\"https://image.flaticon.com/icons/png/512/3135/3135715.png\">';\n    });\n\n    const floatSidebar = () => {\n      store.dispatch('floatSidebar');\n    };\n\n    const lockSidebar = () => {\n      if (isSidebarCollapse.value === false) {\n        store.commit('setSidebarCollapse', true);\n      }\n      store.dispatch('lockSidebar');\n    };\n\n    return {\n      userInfo,\n      headshot,\n      headshotURL,\n      floatSidebar,\n      lockSidebar,\n      isSidebarCollapse,\n      isSidebarFloating,\n      linkToUserInfo,\n      isWindowWidthLarge,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/component/sidebar/_sidebar-utils.scss';\n.topfield{\n  width: inherit;\n  position: relative;\n  margin-bottom: 1rem;\n}\n.userfield{\n  box-sizing: border-box;\n  width: inherit;\n  display: flex;\n  padding: 1.2rem 1rem 1rem 1.2rem;\n  overflow: hidden;\n  &-icon{\n    border-radius: 50%;\n    width: 2.5rem;\n    height: 2.5rem;\n    line-height: 2.5rem;\n    text-align: center;\n    background: #c87a30;\n    color: #ebebeb;\n    margin-right: .5rem;\n    font-size: 1.3rem;\n    position: relative;\n  }\n  img{\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      border-radius: 50%;\n    }\n  &-info{\n    overflow-x: hidden;\n    &-name{\n      font-size: 1.1rem;\n      font-weight: bold;\n      line-height: 1.3rem;\n      margin-top: .2rem;\n      color: #afafaf;\n    }\n    &-email{\n      transform: scale(.8);\n      transform-origin: left;\n      color: #8b8b8b;\n    }\n  }\n  &:hover{\n    background: $item-hover-bc;\n    color: $color;\n  }\n}\n\n.left-collapse{\n  color: $color;\n  position: absolute;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  width: 3rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:hover{\n    background: $item-active-bc;\n  }\n}\n</style>\n","<template>\n  <div :class=\"className\"\n      type=\"button\"\n      @mouseenter=\"handleShow(true)\"\n      @mouseleave=\"handleShow(false)\"\n      @click=\"$emit('clickThen')\">\n    <transition>\n      <slot :isShow=\"isShow\"></slot>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport { showEffect } from './commonEffect';\n\nexport default {\n  name: 'NinjaButton',\n  props: ['className'],\n  setup() {\n    const { isShow, handleShow } = showEffect();\n\n    return {\n      isShow,\n      handleShow,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n","import { render } from \"./NinjaButton.vue?vue&type=template&id=30b92f35&scoped=true\"\nimport script from \"./NinjaButton.vue?vue&type=script&lang=js\"\nexport * from \"./NinjaButton.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-30b92f35\"\n\nexport default script","import { render } from \"./UserField.vue?vue&type=template&id=434fbd4f&scoped=true\"\nimport script from \"./UserField.vue?vue&type=script&lang=js\"\nexport * from \"./UserField.vue?vue&type=script&lang=js\"\n\nimport \"./UserField.vue?vue&type=style&index=0&id=434fbd4f&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-434fbd4f\"\n\nexport default script","<template>\n  <div class=\"customlist-group-item\"\n      type=\"button\"\n      :class=\"{'customlist-group-item-action': page.id === currentPageId }\"\n      @click=\"goCurrentPage(page.id)\"\n      @mouseenter=\"hoverHandle(true)\"\n      @mouseleave=\"hoverHandle(false)\">\n\n    <div :style=\"{ 'padding-left': `${number}rem` }\"></div> <!--調間距用-->\n\n    <div class=\"caret-icon customlist-item-1 scale-07 icon-button\" @click=\"toggleShow\">\n      <font-awesome-icon :icon=\"caretIcon\"/>\n    </div>\n\n    <div class=\"customlist-item-1\">\n      <font-awesome-icon :icon=\"['far', 'file']\"/>\n    </div>\n\n    <div class=\"customlist-item-name\">{{ page.name }}</div>\n\n    <div class=\"ms-auto icon-button\"\n        v-show=\"isHover\"\n        @click.stop=\"deletePage(page)\">\n      <font-awesome-icon :icon=\"['far', 'minus-square']\" style=\"color: #999999\" size=\"sm\"/>\n    </div>\n\n    <div class=\"icon-button\"\n        v-show=\"isHover\"\n        @click.stop=\"addPageInside(page)\">\n      <font-awesome-icon :icon=\"['far', 'plus-square']\" style=\"color: #999999\"/>\n    </div>\n\n  </div>\n\n  <div v-show=\"isShow\">\n    <template v-if=\"childrenPages.length !== 0\">\n      <CustomList\n        v-for=\"item in childrenPages\"\n        :key=\"item.id\"\n        :page=\"item\"\n        :number=\"number+1\"\n      />\n    </template>\n    <template v-else>\n      <div class=\"children-list-nopage\" :style=\"{ 'padding-left': `${3.5 + number}rem` }\">\n        沒有頁面\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport {\n  toRefs, computed, ref,\n} from 'vue';\nimport { useStore } from 'vuex';\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome';\nimport {\n  faCaretRight, faCaretDown,\n} from '@fortawesome/free-solid-svg-icons';\nimport commonUpdateEffect from '../views/commonUpdataEffect';\nimport { showEffect, generateRandomString } from './commonEffect';\n\nexport default {\n  name: 'CustomList',\n  components: {\n    FontAwesomeIcon,\n  },\n  props: {\n    page: {\n      type: Object,\n    },\n    number: {\n      type: Number,\n      default: 0,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const childrenPages = computed(() => store.getters['pages/childrenPages'](props.page.id));\n    const { currentPageId } = toRefs(store.state.pages);\n    const { goCurrentPage } = commonUpdateEffect();\n    const { isShow, handleShow, toggleShow } = showEffect();\n    const caretIcon = computed(() => (isShow.value ? faCaretRight : faCaretDown));\n\n    const addPageInside = (page) => {\n      const newPage = {\n        id: generateRandomString(),\n        name: 'untitle',\n        blocks: [],\n        parentId: page.id,\n        createdTime: new Date().getTime().toString(),\n        editTime: new Date().getTime().toString(),\n        tags: [],\n        cover: '',\n      };\n\n      store.commit('pages/addPage', newPage);\n\n      const newBlock = {\n        type: 'page',\n        id: generateRandomString(),\n        parentId: '',\n        content: newPage.id,\n        className: 'style-text-color__default',\n      };\n\n      store.dispatch('blocks/addBlock', {\n        page,\n        block: newBlock,\n      });\n\n      handleShow(true);\n    };\n\n    const deletePage = (page) => {\n      store.dispatch('pages/deletePage', page);\n    };\n\n    const isHover = ref(false);\n    const hoverHandle = (isTrueOrFalse) => {\n      isHover.value = isTrueOrFalse;\n    };\n\n    return {\n      goCurrentPage,\n      childrenPages,\n      currentPageId,\n      deletePage,\n      addPageInside,\n      hoverHandle,\n      isHover,\n      caretIcon,\n      isShow,\n      toggleShow,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../style/base.scss';\n@import '../style/component/_customlist-group.scss';\n.icon-button{\n  width: 1.5rem;\n  text-align: center;\n  &:hover{\n    background:#847786;\n    color: #c9c0c2;\n  }\n}\n.children-list{\n  &-nopage{\n    color: #666666;\n    font-size: 10px;\n    line-height: 1.9rem;;\n  }\n}\n.caret-icon{\n  width: 21px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n","import { render } from \"./CustomList.vue?vue&type=template&id=53f33416&scoped=true\"\nimport script from \"./CustomList.vue?vue&type=script&lang=js\"\nexport * from \"./CustomList.vue?vue&type=script&lang=js\"\n\nimport \"./CustomList.vue?vue&type=style&index=0&id=53f33416&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-53f33416\"\n\nexport default script","<template>\n    <div class=\"modal-mask\" @click=\"closeModalByClick($event)\">\n      <div :class=\"containerClass\" v-if=\"mode === 'component'\">\n        <slot name=\"component\"></slot>\n      </div>\n\n      <div class=\"modal-container\" v-else>\n        <div class=\"modal-header\">\n          <slot name=\"header\">\n          </slot>\n        </div>\n\n        <div class=\"modal-body\">\n          <slot name=\"body\"></slot>\n        </div>\n\n        <div class=\"modal-footer\">\n          <slot name=\"footer\">\n          </slot>\n        </div>\n      </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'Modal',\n  props: ['mode', 'isBgStatic', 'containerClass'],\n  setup(props, { emit }) {\n    const closeModalByClick = (e) => {\n      if (e.target.className === 'modal-wrapper' || e.target.className === 'modal-mask') emit('close');\n    };\n\n    return { closeModalByClick };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../style/color.scss';\n.modal-mask {\n  position: fixed;\n  z-index: 999;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  transition: opacity 0.3s ease;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.modal-container {\n  margin: 0px auto;\n  margin-top: 10rem;\n  transition: all 0.3s ease;\n  font-family: Helvetica, Arial, sans-serif;\n}\n\n.modal-header h3 {\n  margin-top: 0;\n  color: #42b983;\n}\n\n.modal-body {\n  margin: 20px 0;\n}\n\n.modal-default-button {\n  float: right;\n}\n\n.modal-enter-from, .modal-leave-to {\n  opacity: 0;\n}\n\n.modal-enter-active .modal-container,\n.modal-leave-active .modal-container {\n  -webkit-transform: scale(1.1);\n  transform: scale(1.1);\n}\n\n</style>\n","import { render } from \"./Modal.vue?vue&type=template&id=00195a12&scoped=true\"\nimport script from \"./Modal.vue?vue&type=script&lang=js\"\nexport * from \"./Modal.vue?vue&type=script&lang=js\"\n\nimport \"./Modal.vue?vue&type=style&index=0&id=00195a12&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-00195a12\"\n\nexport default script","<template>\n  <div class=\"search\">\n    <div class=\"search-input\">\n      <div class=\"search-icon\">\n        <font-awesome-icon :icon=\"['fas', 'search']\" size=\"1x\"/>\n      </div>\n      <input type=\"text\" v-model=\"searchInput\" placeholder=\"輸入搜尋內容\">\n    </div>\n    <div class=\"search-divide\"></div>\n    <div class=\"search-select\">\n      <template v-if=\"searchPages\">\n        <div class=\"search-list\" >\n          <div class=\"search-item\"\n                type=\"button\"\n                @click=\"goPageAndCloseModal(page.id)\"\n                v-for=\"(page) in searchPages\"\n                :key=\"page.id\">\n            <div class=\"d-flex\">\n              <div class=\"search-item-page-icon\">\n                <font-awesome-icon :icon=\"['far', 'file']\" size=\"1x\"/>\n              </div>\n              <div class=\"search-item-page\" v-html=\"getContentWithKeyword(page.name)\">\n              </div>\n            </div>\n          </div>\n        </div>\n      </template>\n      <template v-if=\"searchBlocks\">\n        <div class=\"search-list\" >\n          <div class=\"search-item\"\n                type=\"button\"\n                @click=\"goBlockPosition(getPage(block.id), block)\"\n                v-for=\"(block) in searchBlocks\"\n                :key=\"block.id\">\n            <div class=\"d-flex\">\n              <div class=\"search-item-page-icon\">\n                <font-awesome-icon :icon=\"['far', 'file']\" size=\"1x\"/>\n              </div>\n              <div class=\"search-item-page\">\n                {{ getPage(block.id).name }}\n              </div>\n            </div>\n            <div class=\"search-content\" v-html=\"getContentWithKeyword(block.content?.text)\"></div>\n          </div>\n        </div>\n      </template>\n      <!-- <template v-else>\n        <div class=\"recent\">\n          <div class=\"recent-subtitle\">最近造訪</div>\n          <div class=\"recent-page\" v-for=\"(page, index) in recentPages\"\n              :key=\"name + index\">\n            <div class=\"search-item-page-icon\">\n              <font-awesome-icon :icon=\"['far', 'file']\" size=\"1x\"/>\n            </div>\n            <div class=\"search-item-page\" type=\"button\" @click=\"goPageAndCloseModal(page.id)\">\n              {{ page.name }}\n            </div>\n          </div>\n        </div>\n      </template> -->\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, ref } from 'vue';\nimport { useStore } from 'vuex';\nimport commonUpdateEffect from './commonUpdataEffect';\n\nexport default {\n  name: 'Search',\n  emits: ['close'],\n  setup(props, { emit }) {\n    const store = useStore();\n    const { goCurrentPage } = commonUpdateEffect();\n    const searchInput = ref('');\n    const searchBlocks = computed(() => store.getters['blocks/searchBlocks'](searchInput.value));\n    const searchPages = computed(() => store.getters['pages/searchPages'](searchInput.value));\n    const recentPages = computed(() => store.getters['userInfo/getPagesInRecentPageIds']);\n\n    const getPage = (blockId) => computed(() => store.getters['pages/getPageByBlockId'](blockId)).value;\n\n    const goBlockPosition = (page, block) => {\n      emit('close');\n      store.dispatch('blocks/goBlockPosition', {\n        page,\n        block,\n      });\n    };\n\n    const goPageAndCloseModal = (id) => {\n      emit('close');\n      goCurrentPage(id);\n    };\n\n    const getContentWithKeyword = (str) => computed(() => {\n      const keyword = searchInput.value;\n      if (!str.includes(keyword)) return '';\n      const strArr = str.split(keyword);\n      let contentHtml = '';\n      for (let i = 0; i < strArr.length; i += 1) {\n        if (i === strArr.length - 1) {\n          contentHtml += strArr[i];\n          break;\n        }\n        contentHtml += (`${strArr[i]}<span style=\"font-weight: 900; color: #131313;\">${keyword}</span>`);\n      }\n      return contentHtml;\n    }).value;\n\n    return {\n      searchInput,\n      searchPages,\n      searchBlocks,\n      getPage,\n      goPageAndCloseModal,\n      goBlockPosition,\n      getContentWithKeyword,\n      recentPages,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@mixin icon{\n  width: 1.5rem;\n  text-align: left;\n}\n\n$search-border-bottom: .05rem solid rgb(212, 212, 212);\n.search{\n  height: 55vh;\n  width: 50vw;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33);\n  background: #faf9f2;\n  border-radius: .3rem;\n  padding-top: .8rem;\n  padding-bottom: .8rem;\n  display: flex;\n  flex-direction: column;\n  transition: width .3s ease-in;\n  @media (max-width: 992px) {\n    height: 55vh;\n    width: 60vw;\n  }\n  @media (max-width: 450px) {\n    height: 65vh;\n    width: 80vw;\n  }\n  &-input{\n    box-sizing: border-box;\n    display: flex;\n    padding: .4rem 1.5rem 1rem 1.5rem;\n    padding-top: .4rem;\n    border-bottom: $search-border-bottom;\n  }\n  &-select{\n    height: 100%;\n    padding: 0 1.5rem;\n    overflow-y: auto;\n    background: #faf9f2;\n    &::-webkit-scrollbar {\n      width: 8px;\n    }\n\n    /* Track */\n    &::-webkit-scrollbar-track {\n      background: #faf9f2;\n    }\n\n    /* Handle */\n    &::-webkit-scrollbar-thumb {\n      background: #bebeb9;\n      border-radius: 4px;\n    }\n\n    /* Handle on hover */\n    &::-webkit-scrollbar-thumb:hover {\n      background: #a3a39e;\n    }\n  }\n  &-icon{\n    @include icon;\n    color: rgb(167, 167, 167);\n  }\n\n  &-item{\n    margin: 0 -1.5rem 0 -1.5rem;\n    padding: .7rem 1.5rem;\n    border-bottom: $search-border-bottom;\n    &:hover{\n      background: rgb(221, 221, 221);\n    }\n    &-page{\n      font-size: 1.1rem;\n      color: rgb(122, 122, 122);\n      &-icon{\n        @include icon;\n        font-size: 1.1rem;\n        color: rgb(122, 122, 122);\n      }\n    }\n  }\n  &-content{\n    font-size: 12px;\n    font-weight: 300;\n    color: #92918b;\n    span{\n      color: aqua;\n    }\n  }\n}\n\n.recent{\n  margin-top: 1rem;\n  &-page{\n    display: flex;\n    line-height: 2rem;\n    font-weight: 700;\n  }\n  &-subtitle{\n    font-size: 1rem;\n    transform: scale(.8);\n    transform-origin: left;\n    color: #4e95e6;\n  }\n}\n\n.bb-light{\n  border-bottom: .2px solid rgb(146, 146, 146);\n}\n\n</style>\n","import { render } from \"./Search.vue?vue&type=template&id=7ec26dc8&scoped=true\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=7ec26dc8&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7ec26dc8\"\n\nexport default script","<template>\n  <div id=\"splitter\" :class=\"className\"></div>\n</template>\n\n<script>\nimport { onMounted } from 'vue';\nimport commonDomEffect from './commonDomEffect';\n\nexport default {\n  name: 'Splitter',\n  emits: ['getMouseOffset', 'stopMouseMove'],\n  props: ['className'],\n  setup(props, { emit }) {\n    const { getMouseOffsetByClickElAndMove } = commonDomEffect();\n\n    const returnMouseOffset = (offset) => {\n      emit('getMouseOffset', offset);\n    };\n\n    const stopMouseMove = () => {\n      emit('stopMouseMove');\n    };\n\n    onMounted(() => {\n      const splitter = document.getElementById('splitter');\n      const {\n        mouseDown,\n        mouseMove,\n        mouseUp,\n      } = getMouseOffsetByClickElAndMove();\n\n      splitter.addEventListener('mousedown', (e) => {\n        mouseDown(e, (offset) => { returnMouseOffset(offset); });\n      });\n      document.addEventListener('mousemove', (e) => {\n        mouseMove(e, (offset) => { returnMouseOffset(offset); });\n      });\n      document.addEventListener('mouseup', (e) => {\n        mouseUp(e, stopMouseMove);\n      });\n\n      return {\n        mouseDown,\n        mouseMove,\n        mouseUp,\n      };\n    });\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n","import { render } from \"./Splitter.vue?vue&type=template&id=5bd4d606&scoped=true\"\nimport script from \"./Splitter.vue?vue&type=script&lang=js\"\nexport * from \"./Splitter.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-5bd4d606\"\n\nexport default script","import { render } from \"./Sidebar.vue?vue&type=template&id=64caf338&scoped=true\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js\"\n\nimport \"./Sidebar.vue?vue&type=style&index=0&id=64caf338&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-64caf338\"\n\nexport default script","<template>\n  <BlockStyleEditor @hiddenStyleEditor=\"hiddenStyleEditor\"\n      :is-show=\"isShowBlockStyleEditor\"/>\n  <main class=\"mainspace\"\n      @mousemove=\"toggleFloatSidebar($event)\">\n    <div class=\"workspace\" v-if=\"currentPage\" @mousedown=\"clickActions($event)\">\n      <Header :currentPage=\"currentPage\"/>\n      <div class=\"content\">\n        <AreaSelect :work-area=\"'.content'\"/>\n        <div class=\"title\">\n          <PageEditable\n              :page=\"currentPage\"\n              :key=\"currentPage.id\"\n              :placeholder=\"'請輸入標題'\"\n              :className=\"'title-input'\"/>\n        </div>\n        <PageInfo :page=\"currentPage\" :key=\"currentPage.id + 'info'\"/>\n        <div class=\"blockcontent\" v-if=\"currentBlocks\">\n          <template v-for=\"(block) in currentBlocks\" :key=\"block.id\">\n            <Block :block=\"block\" :is-selected=\"isBlockSelected(block.id)\"\n                  :is-under-mouse-on-drag=\"currentIdUnderTheMouse === block.id\n                        && !dragStartIds.includes(block.id)\"\n                  v-show=\"!hiddenBlocksIds.includes(block.id)\"\n                  @showBlockStyleEditor=\"clickBlockStyleEditorIconAction(block)\"\n                  @drop=\"dropActions\"\n                  @dragenter=\"cancelDefault\"\n                  @dragover=\"handleBeforeDrop\"/>\n          </template>\n        </div>\n      </div>\n    </div>\n    <FrontPage v-else/>\n  </main>\n</template>\n\n<script>\nimport {\n  computed, toRefs, ref, watch, nextTick, onMounted,\n} from 'vue';\nimport { useStore } from 'vuex';\nimport commonUpdateEffect from '../commonUpdataEffect';\nimport commonDomEffect from '../../components/commonDomEffect';\nimport Header from './header/Header.vue';\nimport Block from '../../components/Block.vue';\nimport AreaSelect from '../../components/AreaSelect.vue';\nimport PageEditable from '../../components/input/PageEditable.vue';\nimport PageInfo from './PageInfo.vue';\nimport BlockStyleEditor from '../../components/BlockStyleEditor.vue';\nimport FrontPage from './FrontPage.vue';\nimport watchStoreEffect from '../../store/watchStoreEffect';\nimport updateIDsEffectByDragDrop from '../../components/updateIDsEffectByDragDrop';\n\nconst useKeyDownEffectWithBlocks = () => {\n  const store = useStore();\n  const selectedBlocksIds = computed(() => store.state.blocks.selectedBlocksIds);\n  const hasSelectedBlocks = () => (!!selectedBlocksIds.value?.length);\n\n  const {\n    pasteBlocksAction,\n    setClipboardBlocks,\n    setSelectedBlocksInClipboardBlocks,\n    deleteSelectedBlocks,\n    duplicateBlocksFromSelectedBlocks,\n  } = commonUpdateEffect();\n\n  const handleBlocksByPaste = (e) => {\n    if (selectedBlocksIds.value.length) {\n      pasteBlocksAction(e);\n    }\n  };\n\n  const handleBlocksByKeyDown = (e) => {\n    const setClipboardText = (text) => navigator.clipboard.writeText(text);\n\n    if (e.ctrlKey && e.key === 'c') {\n      if (hasSelectedBlocks()) {\n        setClipboardText('');\n        e.preventDefault();\n        setSelectedBlocksInClipboardBlocks();\n        document.activeElement.blur();\n      } else {\n        setClipboardBlocks([]);\n      }\n    }\n\n    if (hasSelectedBlocks() && (e.key === 'Backspace' || e.key === 'Delete')) {\n      e.preventDefault();\n      deleteSelectedBlocks(e);\n      document.activeElement.blur();\n    }\n\n    if (hasSelectedBlocks() && e.ctrlKey && e.key === 'd') {\n      e.preventDefault();\n      duplicateBlocksFromSelectedBlocks();\n      document.activeElement.blur();\n    }\n\n    // 目前此功能在處理page類型的block上有問題，待需處理\n    // if (hasSelectedBlocks() && e.ctrlKey && e.key === 'x') {\n    //   e.preventDefault();\n    //   setSelectedBlocksInClipboardBlocks();\n    //   deleteSelectedBlocks(e);\n    // }\n  };\n\n  const executeKeydownListeningWithBlocks = () => {\n    window.addEventListener('keydown', handleBlocksByKeyDown);\n    window.addEventListener('paste', handleBlocksByPaste);\n  };\n\n  return { executeKeydownListeningWithBlocks };\n};\n\nconst useDragDropBlocksEffect = () => {\n  const store = useStore();\n\n  const dragStartIds = computed(() => store.state.dragStartIds);\n  const currentBlocksIds = computed(() => store.getters['blocks/currentBlocksIds']);\n\n  const {\n    ids,\n    currentIdUnderTheMouse,\n    cancelDefault,\n    handleDrop,\n    handleBeforeDrop,\n  } = updateIDsEffectByDragDrop(currentBlocksIds,\n    (e) => e.target.closest('.block').dataset.blockId,\n    () => dragStartIds.value);\n\n  const dropActions = (e) => {\n    handleDrop(e, () => {\n      store.commit('setDragStartIds', []);\n    });\n  };\n\n  watch(() => ids.value, (curr) => {\n    store.commit('pages/editPageData', { key: 'blocks', value: [...curr] });\n  }, { deep: true });\n\n  watch(currentIdUnderTheMouse, (curr) => {\n    store.commit('setIframeActive', curr === '');\n  });\n\n  return {\n    cancelDefault,\n    handleBeforeDrop,\n    dropActions,\n    dragStartIds,\n    currentIdUnderTheMouse,\n  };\n};\n\nconst useClickEffectInWorkspace = (hiddenStyleEditor) => {\n  const store = useStore();\n  const currentBlocks = computed(() => store.getters['blocks/currentBlocks']);\n  const { isMouseUnderTheElement } = commonDomEffect();\n\n  const clickActionInContent = (e) => {\n    const finalBlock = currentBlocks.value[currentBlocks.value.length - 1];\n    if (!finalBlock) {\n      e.preventDefault();\n      store.dispatch('blocks/addBlockAndSetFocusBlockId', {});\n      return;\n    }\n\n    const finalBlockDom = document.querySelector(`[data-block-id=\"${finalBlock.id}\"]`);\n    if (isMouseUnderTheElement(finalBlockDom, e)) {\n      e.preventDefault();\n\n      const finalBlockEditable = finalBlockDom.querySelector('[contenteditable]');\n      if (!finalBlockEditable) {\n        store.dispatch('blocks/addBlockAndSetFocusBlockId', {});\n        return;\n      }\n\n      if (finalBlock.content.text === '') {\n        finalBlockEditable.focus();\n        return;\n      }\n\n      store.dispatch('blocks/addBlockAndSetFocusBlockId', {});\n    }\n  };\n\n  const clickActions = (e) => {\n    const el = e.target;\n    if (!el.closest('.workspace')) return;\n    if (el.closest('.blockcontent')) {\n      clickActionInContent(e);\n      return;\n    }\n    store.commit('blocks/setFocusBlockById', '');\n    store.commit('blocks/setSelectedBlocksIds', []);\n    hiddenStyleEditor();\n  };\n\n  return {\n    clickActions,\n  };\n};\n\nconst useBlockStyleEditorEffect = () => {\n  const store = useStore();\n  const selectedBlocksIds = computed(() => store.state.blocks.selectedBlocksIds);\n\n  const isShowBlockStyleEditor = ref(false);\n\n  const clickBlockStyleEditorIconAction = (block) => {\n    isShowBlockStyleEditor.value = true;\n    if (selectedBlocksIds.value.length === 0) {\n      store.commit('blocks/addIdToSelectedBlocksIds', block.id);\n      return;\n    }\n    if (!selectedBlocksIds.value.find((id) => id === block.id)) {\n      store.commit('blocks/setSelectedBlocksIds', []);\n      store.commit('blocks/addIdToSelectedBlocksIds', block.id);\n    }\n  };\n\n  const hiddenStyleEditor = () => {\n    isShowBlockStyleEditor.value = false;\n  };\n\n  return {\n    isShowBlockStyleEditor,\n    clickBlockStyleEditorIconAction,\n    hiddenStyleEditor,\n  };\n};\n\nexport default {\n  name: 'Workspace',\n  components: {\n    Header,\n    Block,\n    AreaSelect,\n    PageEditable,\n    PageInfo,\n    BlockStyleEditor,\n    FrontPage,\n  },\n  setup() {\n    const store = useStore();\n\n    const {\n      updatePagesToLSByWatching,\n      updateBlocksToLSByWatching,\n      storeObserver,\n    } = watchStoreEffect();\n\n    updatePagesToLSByWatching();\n    updateBlocksToLSByWatching();\n    storeObserver();\n\n    const { executeKeydownListeningWithBlocks } = useKeyDownEffectWithBlocks();\n    executeKeydownListeningWithBlocks();\n\n    const {\n      cancelDefault,\n      handleBeforeDrop,\n      dropActions,\n      dragStartIds,\n      currentIdUnderTheMouse,\n    } = useDragDropBlocksEffect();\n\n    const currentPage = computed(() => store.getters['pages/currentPage']);\n    const currentBlocks = computed(() => store.getters['blocks/currentBlocks']);\n    const currentFocusBlock = computed(() => store.getters['blocks/currentFocusBlock']);\n    const isSidebarFloating = computed(() => store.state.sidebarState.isFloating);\n    const selectedBlocksIds = computed(() => store.state.blocks.selectedBlocksIds);\n    const clipboardBlocks = computed(() => store.state.blocks.clipboardBlocks);\n    const clipboardBlocksIds = computed(() => store.getters['blocks/getClipboardBlocksIds']);\n    const isBlockSelected = (id) => computed(() => store.getters['blocks/isBlockSelected'](id)).value;\n\n    const {\n      currentFocusBlockId, hiddenBlocksIds,\n    } = toRefs(store.state.blocks);\n\n    const {\n      isShowBlockStyleEditor,\n      clickBlockStyleEditorIconAction,\n      hiddenStyleEditor,\n    } = useBlockStyleEditorEffect();\n\n    const {\n      clickActions,\n    } = useClickEffectInWorkspace(hiddenStyleEditor);\n\n    const toggleFloatSidebar = (e) => {\n      if (isSidebarFloating.value === false) return;\n      if (e.clientX < 45) {\n        store.commit('setSidebarCollapse', false);\n      } else {\n        store.commit('setSidebarCollapse', true);\n      }\n    };\n\n    const isWindowWidthLarge = () => window.innerWidth > 992;\n\n    const initSidebarState = () => {\n      if (isWindowWidthLarge()) {\n        store.dispatch('lockSidebar');\n      }\n    };\n\n    onMounted(() => {\n      window.addEventListener('resize', () => {\n        if (!isWindowWidthLarge() && isSidebarFloating.value === false) {\n          store.dispatch('floatSidebar');\n        }\n      });\n\n      initSidebarState();\n\n      watch( // 監聽是否切換到其他元素\n        currentFocusBlockId,\n        (curr, prev) => {\n          nextTick(() => {\n            if (!curr) return;\n\n            const getContenteditable = (el) => el.querySelector('[contenteditable]');\n\n            const getEditableElementById = (id) => {\n              const el = document.querySelector(`[data-block-id=\"${id}\"]`);\n              if (!el) return null;\n              if (getContenteditable(el)) return getContenteditable(el);\n              return null;\n            };\n\n            const setCursorToEnd = (el) => {\n              const range = window.getSelection();\n              range.selectAllChildren(el);\n              range.collapseToEnd();\n            };\n\n            const currFocusDom = getEditableElementById(curr);\n            const prevFocusDom = getEditableElementById(prev);\n\n            if (!currFocusDom) return;\n            currFocusDom.focus();\n            setCursorToEnd(currFocusDom);\n\n            if (!prevFocusDom) return;\n            prevFocusDom.placeholder = '';\n          });\n        },\n      );\n    });\n\n    return {\n      clickActions,\n      currentPage,\n      currentBlocks,\n      currentFocusBlockId,\n      currentFocusBlock,\n      selectedBlocksIds,\n      hiddenBlocksIds,\n      toggleFloatSidebar,\n      isShowBlockStyleEditor,\n      clickBlockStyleEditorIconAction,\n      hiddenStyleEditor,\n      isBlockSelected,\n      cancelDefault,\n      dropActions,\n      handleBeforeDrop,\n      currentIdUnderTheMouse,\n      dragStartIds,\n      clipboardBlocks,\n      clipboardBlocksIds,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/color.scss';\n\n[v-cloak] {\n  display: none;\n}\n\n@mixin mainspace {\n  position: relative;\n  z-index: 1;\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  /* Track */\n  &::-webkit-scrollbar-track {\n    background: #faf9f2;\n  }\n\n  /* Handle */\n  &::-webkit-scrollbar-thumb {\n    background: #bebeb9;\n    border-radius: 4px;\n  }\n\n  /* Handle on hover */\n  &::-webkit-scrollbar-thumb:hover {\n    background: #a3a39e;\n  }\n}\n\n.mainspace{\n  width: 100%;\n  position: relative;\n  z-index: 1;\n  height: 100vh;\n  overflow-y: auto;\n  background: rgb(253, 252, 251);\n}\n\n.workspace{\n  @include mainspace;\n  display: flex;\n  flex-direction: column;\n  border-radius: .2rem;\n  box-shadow: 0 0 5px 0 rgb(209, 193, 171);\n  height: 100%;\n  overflow: auto;\n  position: relative;\n}\n\n.content{\n  flex-grow:1;\n  padding: 0 20%;\n  padding-bottom: 7rem;\n  display: flex;\n  flex-direction: column;\n  @media (min-width:1100px){\n    padding: 0 22%;\n  }\n  @media (max-width:992px){\n    padding: 0 12%;\n  }\n\n  transition: padding .3s ease-out;\n}\n.blockcontent{\n  box-sizing: border-box;\n  width: 100%;\n  flex-grow: 1;\n  min-height: 350px;\n  padding-bottom: 10vh;\n  &-input{\n    width: inherit;\n    min-height: 50px;\n  }\n}\n\n.title{\n  position: relative;\n  &-input{\n    font-family: 'Noto Sans TC', sans-se rif;\n    font-weight: 700;\n    font-size: 3rem;\n    line-height: 3.8rem;\n    color: #4d464d;\n  }\n  .prefix-line{\n    position:absolute;\n    bottom: -.2rem;\n    left: 0;\n    width: 2rem;\n    height: .3rem;\n    background: $web-orange;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"header\">\n    <Breadcrumb :page=\"currentPage\"/>\n    <div class=\"update\" type=\"button\" @click=\"updateToFS\">\n      <div class=\"update-icon\" v-if=\"!isFSUpdating\">\n        <font-awesome-icon :icon=\"['fas', 'database']\"/>\n      </div>\n      <div class=\"update-icon\" v-else>\n        <font-awesome-icon :icon=\"['fas', 'sync-alt']\"/>\n      </div>\n      <div class=\"update-text\">更新到數據庫</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue';\nimport Breadcrumb from './Breadcrumb.vue';\nimport { updateStoreToFS } from '../../../store/firestore';\n\nexport default {\n  name: 'Header',\n  components: {\n    Breadcrumb,\n  },\n  props: ['currentPage'],\n  setup() {\n    const isFSUpdating = ref(false);\n    const isFSUpdatingHandle = (choose) => {\n      isFSUpdating.value = choose;\n    };\n\n    const updateToFS = async () => {\n      isFSUpdatingHandle(true);\n      try {\n        await updateStoreToFS();\n        isFSUpdatingHandle(false);\n      } catch (error) {\n        console.log(error);\n        isFSUpdatingHandle(false);\n      }\n    };\n\n    return {\n      isFSUpdating,\n      updateToFS,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.header{\n  box-sizing: border-box;\n  position: sticky;\n  width: 100%;\n  top: 0;\n  display: flex;\n  padding: 1.5rem .5rem 1.5rem 2rem;\n  margin-bottom: 5rem;\n  z-index: 7;\n  background-color: rgb(253, 252, 251);\n}\n\n.update{\n  top: 0;\n  border-radius: .3rem;\n  color: #646464;\n  padding: 0 .3rem;\n  margin-left: auto;\n  margin-right: 1rem;\n  display: flex;\n  &:hover{\n    background: #dbdbdb;\n  }\n  &-text{\n    margin-left: .5rem;\n  }\n}\n</style>\n","<template>\n  <nav aria-label=\"breadcrumb\">\n    <ol class=\"breadcrumb\">\n      <BreadcrumbItem :page=\"page\"/>\n    </ol>\n  </nav>\n</template>\n\n<script>\nimport BreadcrumbItem from './BreadcrumbItem.vue';\n\nexport default {\n  name: 'Breadcrumb',\n  props: ['page'],\n  components: { BreadcrumbItem },\n};\n</script>\n\n<style lang=\"scss\" scoped>\nol{\n  height: 100%;\n  margin-bottom: 0;\n}\n</style>\n","<template>\n  <template v-if=\"parentPage\">\n    <BreadcrumbItem :page=\"parentPage\" :number=\"number + 1\" v-if=\"number < 2\"/>\n  </template>\n  <li\n    :class=\"{'breadcrumb-item': true, effect: page !== currentPage}\"\n    :type=\"page !== currentPage ? 'button' : '' \"\n    @click=\"goCurrentPage(page.id)\"><font-awesome-icon :icon=\"['far', 'file']\"/>&nbsp;\n    {{ page.name }}\n  </li>\n</template>\n\n<script>\nimport { computed } from 'vue';\nimport { useStore } from 'vuex';\nimport commonUpdateEffect from '../../commonUpdataEffect';\n\nexport default {\n  name: 'BreadcrumbItem',\n  props: {\n    page: {\n      type: Object,\n    },\n    number: {\n      type: Number,\n      default: 0,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const parentPage = computed(() => store.getters['pages/parentPage'](props.page));\n    const currentPage = computed(() => store.getters['pages/currentPage']);\n    const { goCurrentPage } = commonUpdateEffect();\n\n    return { parentPage, currentPage, goCurrentPage };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.breadcrumb-item{\n  color: #a0a0a0;\n  font-weight: 700;\n}\n.effect{\n  &:hover{\n    color: #222222;\n    text-decoration: underline;\n  }\n}\n</style>\n","import { render } from \"./BreadcrumbItem.vue?vue&type=template&id=c8f24b30&scoped=true\"\nimport script from \"./BreadcrumbItem.vue?vue&type=script&lang=js\"\nexport * from \"./BreadcrumbItem.vue?vue&type=script&lang=js\"\n\nimport \"./BreadcrumbItem.vue?vue&type=style&index=0&id=c8f24b30&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-c8f24b30\"\n\nexport default script","import { render } from \"./Breadcrumb.vue?vue&type=template&id=da608e12&scoped=true\"\nimport script from \"./Breadcrumb.vue?vue&type=script&lang=js\"\nexport * from \"./Breadcrumb.vue?vue&type=script&lang=js\"\n\nimport \"./Breadcrumb.vue?vue&type=style&index=0&id=da608e12&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-da608e12\"\n\nexport default script","import { render } from \"./Header.vue?vue&type=template&id=13f33fb6&scoped=true\"\nimport script from \"./Header.vue?vue&type=script&lang=js\"\nexport * from \"./Header.vue?vue&type=script&lang=js\"\n\nimport \"./Header.vue?vue&type=style&index=0&id=13f33fb6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-13f33fb6\"\n\nexport default script","<template>\n  <div class=\"block\"\n      :class=\"getClassNameOfBlockType(block.type)\"\n      :data-block-id=\"block.id\"\n      @mouseenter=\"handleShow(true)\"\n      @mouseleave=\"handleShow(false)\"\n      :style=\"{ 'margin-left': `${getLevelOfBlock(block)*1.65}rem`,\n                'border-bottom': isUnderMouseOnDrag\n                  ? '.3rem solid rgb(134, 193, 241)' : 'none' }\">\n    <div class=\"block-tools\">\n      <transition name=\"drag\">\n        <div class=\"block-tool\"\n            v-show=\"isShow\"\n            type=\"button\"\n            @click=\"$emit('showBlockStyleEditor', true)\">\n          <font-awesome-icon :icon=\"['fas', 'adjust']\" size=\"xs\"/>\n        </div>\n      </transition>\n      <transition name=\"drag\">\n        <DragItem :block=\"block\"\n                  v-show=\"isShow\"/>\n      </transition>\n    </div>\n    <div style=\"width: 100%;\" :class=\"block.className\">\n      <div class=\"block-content\"\n          :class=\"{ 'block-selected': isSelected }\"\n          @drop=\"$emit('drop', $event)\"\n          @dragenter=\"$emit('dragenter', $event)\"\n          @dragover=\"$emit('dragover', $event)\">\n        <component\n            :is=\"getFirstToUpper(block.type)\"\n            :block=\"block\">\n        </component>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { commonStringEffect, showEffect } from './commonEffect';\nimport commonBlockEffect from './commonBlockEffect';\nimport DragItem from './DragItem.vue';\n\nexport default {\n  name: 'Block',\n  props: ['block', 'isSelected', 'isUnderMouseOnDrag'],\n  components: { DragItem },\n  setup() {\n    const store = useStore();\n    const { isShow, handleShow } = showEffect();\n    const { getLevelOfBlock } = commonBlockEffect();\n    const { getFirstToUpper } = commonStringEffect();\n\n    // eslint-disable-next-line max-len\n    const getClassNameOfBlockType = (type) => computed(() => store.getters.getClassNameOfBlockType(type)).value;\n\n    return {\n      isShow,\n      handleShow,\n      getFirstToUpper,\n      getLevelOfBlock,\n      getClassNameOfBlockType,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../style/component/_block.scss';\n@import '../style/_block-styles.scss';\n@import '../style/component/_block-type.scss';\n.drag-enter-active,\n.drag-leave-active{\n  transition: opacity 0.3s ease;\n}\n\n.drag-enter-from,\n.drag-leave-to{\n  opacity: 0;\n}\n\n.drag-enter-to,\n.drag-leave-from{\n  opacity: 1;\n}\n</style>\n","<template>\n  <div class=\"block-tool\"\n      draggable=\"true\"\n      @dragstart=\"handleDrag($event)\">\n    <font-awesome-icon :icon=\"['fas', 'expand-arrows-alt']\" size=\"xs\"/>\n  </div>\n</template>\n\n<script>\nimport { computed } from 'vue';\nimport { useStore } from 'vuex';\n\nconst useDragBlockStartEffect = (block) => {\n  const store = useStore();\n  const selectedBlocksIds = computed(() => store.state.blocks.selectedBlocksIds);\n\n  const handleDrag = (e) => {\n    if (selectedBlocksIds.value.includes(block.id)) {\n      store.commit('setDragStartIds', [...selectedBlocksIds.value]);\n      return;\n      // e.dataTransfer.setData('text/plain', ids);\n    }\n    const el = document.querySelector(`[data-block-id=\"${block.id}\"]`);\n    e.dataTransfer.setDragImage(el, -10, 10);\n    store.commit('setDragStartIds', [block.id]);\n    // e.dataTransfer.setData('text/plain', block.id);\n  };\n\n  return {\n    handleDrag,\n  };\n};\n\nexport default {\n  name: 'DragItem',\n  props: ['block'],\n  setup(props) {\n    const { handleDrag } = useDragBlockStartEffect(props.block);\n\n    return { handleDrag };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../style/component/_block.scss';\n</style>\n","import { render } from \"./DragItem.vue?vue&type=template&id=7065c0a5&scoped=true\"\nimport script from \"./DragItem.vue?vue&type=script&lang=js\"\nexport * from \"./DragItem.vue?vue&type=script&lang=js\"\n\nimport \"./DragItem.vue?vue&type=style&index=0&id=7065c0a5&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7065c0a5\"\n\nexport default script","import { render } from \"./Block.vue?vue&type=template&id=2128f502&scoped=true\"\nimport script from \"./Block.vue?vue&type=script&lang=js\"\nexport * from \"./Block.vue?vue&type=script&lang=js\"\n\nimport \"./Block.vue?vue&type=style&index=0&id=2128f502&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2128f502\"\n\nexport default script","<template>\n  <div id=\"area-select\"\n    :style=\"{\n      left: `${selector.left}px`,\n      top: `${selector.top}px`,\n      width: `${selector.width}px`,\n      height: `${selector.height}px` }\"></div>\n</template>\n\n<script>\nimport { watch, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { commonCollisionEffect } from './commonEffect';\nimport useAreaSelectEffect from './areaSelectEffect';\n\nexport default {\n  name: 'AreaSelect',\n  props: ['ids', 'workArea'],\n  setup() {\n    const store = useStore();\n    const { isBoxACollisionB } = commonCollisionEffect();\n    const currentBlocksIds = computed(() => store.getters['blocks/currentBlocksIds']);\n    const selectedBlocksIds = computed(() => store.state.blocks.selectedBlocksIds);\n\n    const {\n      mouseDown,\n      mouseUp,\n      mouseMove,\n      selector,\n      currentSelectedIds,\n      isAreaSelectActive,\n    } = useAreaSelectEffect(currentBlocksIds, isBoxACollisionB);\n\n    watch(() => currentSelectedIds, (curr) => {\n      store.commit('blocks/setSelectedBlocksIds', [...curr]);\n    }, { deep: true });\n\n    watch(isAreaSelectActive, (curr) => {\n      store.commit('setIframeActive', !curr);\n    });\n\n    document.addEventListener('mousedown', mouseDown);\n    document.addEventListener('mouseup', mouseUp);\n    document.addEventListener('mousemove', mouseMove);\n\n    return {\n      selector,\n      currentSelectedIds,\n      selectedBlocksIds,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.test {\n  position: fixed;\n  top: 70px;\n  left: 350px;\n  z-index: 50;\n}\n\n#area-select{\n  position: fixed;\n  left: 0;\n  top: 0;\n  background: rgb(71, 71, 71);\n  z-index: 3;\n  opacity: .2;\n  border: .2rem solid rgb(26, 26, 26);\n}\n</style>\n","import { reactive, ref } from 'vue';\n\nconst useAreaSelectEffect = (AllIds, isBoxACollisionB) => {\n  const isAreaSelectActive = ref(false);\n\n  const currentSelectedIds = reactive([]);\n\n  const selector = reactive({\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n  });\n\n  const position = {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n  };\n\n  const setSelector = (left, top, width, height) => {\n    selector.left = left;\n    selector.top = top;\n    selector.width = width;\n    selector.height = height;\n  };\n\n  const mouseDown = (e) => {\n    if (isAreaSelectActive.value === true) return;\n    if (!e.target.closest('.workspace')) return;\n    if (e.target.closest('.block') || e.target.hasAttribute('contenteditable')) {\n      if (e.target.closest('.block-tools')) return;\n      currentSelectedIds.length = 0;\n      return;\n    }\n\n    isAreaSelectActive.value = true;\n    position.x1 = e.clientX;\n    position.y1 = e.clientY;\n    currentSelectedIds.length = 0;\n  };\n\n  const mouseMove = (e) => {\n    if (isAreaSelectActive.value === false) return;\n    e.preventDefault();\n    e.stopPropagation();\n\n    document.activeElement.blur();\n\n    position.x2 = e.clientX;\n    position.y2 = e.clientY;\n\n    const left = Math.min(position.x1, position.x2);\n    const top = Math.min(position.y1, position.y2);\n    const width = Math.abs(position.x2 - position.x1);\n    const height = Math.abs(position.y2 - position.y1);\n\n    setSelector(left, top, width, height);\n\n    const selectorBox = {\n      left,\n      top,\n      right: left + width,\n      bottom: top + height,\n    };\n\n    if (!AllIds.value) return; // 處理這行\n    AllIds.value.forEach((id) => {\n      const blockEl = document.querySelector(`[data-block-id=\"${id}\"]`);\n      const blockBounding = blockEl.getBoundingClientRect();\n      if (isBoxACollisionB(selectorBox, blockBounding)) {\n        if (currentSelectedIds.includes(id)) return;\n        currentSelectedIds.push(id);\n      } else {\n        if (!currentSelectedIds.includes(id)) return;\n        const index = currentSelectedIds.indexOf(id);\n        currentSelectedIds.splice(index, 1);\n      }\n    });\n  };\n\n  const mouseUp = () => {\n    isAreaSelectActive.value = false;\n    setSelector(0, 0, 0, 0);\n  };\n\n  return {\n    mouseDown,\n    mouseUp,\n    mouseMove,\n    selector,\n    currentSelectedIds,\n    isAreaSelectActive,\n  };\n};\n\nexport default useAreaSelectEffect;\n","import { render } from \"./AreaSelect.vue?vue&type=template&id=e56945ea&scoped=true\"\nimport script from \"./AreaSelect.vue?vue&type=script&lang=js\"\nexport * from \"./AreaSelect.vue?vue&type=script&lang=js\"\n\nimport \"./AreaSelect.vue?vue&type=style&index=0&id=e56945ea&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-e56945ea\"\n\nexport default script","<template>\n    <ContentEditable\n        :placeholder=\"placeholder\"\n        :className=\"className\"\n        :id=\"noId ? '' : page.id\"\n        :value=\"page.name\"\n        @input.stop=\"inputToPageContent\"\n        @keydown.stop=\"keydownAction\"\n        @focus=\"setFocusBlock('')\"/>\n</template>\n\n<script>\nimport commonUpdateEffect from '../../views/commonUpdataEffect';\nimport ContentEditable from './ContentEditable.vue';\n\nexport default {\n  components: { ContentEditable },\n  name: 'PageEditable',\n  props: [\n    'page',\n    'placeholder',\n    'className',\n    'noId',\n  ],\n  setup(props) {\n    const { editPageData, checkKeydownInPageData, setFocusBlock } = commonUpdateEffect();\n\n    const inputToPageContent = (e) => {\n      editPageData('name', e.target.innerText);\n    };\n\n    const keydownAction = (e) => {\n      checkKeydownInPageData(props.page, e);\n    };\n\n    return {\n      inputToPageContent,\n      keydownAction,\n      setFocusBlock,\n    };\n  },\n};\n</script>\n","import { render } from \"./PageEditable.vue?vue&type=template&id=64f32f9e\"\nimport script from \"./PageEditable.vue?vue&type=script&lang=js\"\nexport * from \"./PageEditable.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"pageinfo\" v-if=\"page\">\n    <div class=\"pageinfo-item\">\n      <div class=\"pageinfo-item-name\">\n        <div class=\"pageinfo-item-icon\">\n          <font-awesome-icon :icon=\"['fas', 'clock']\"/>\n        </div>\n        創建於</div>\n      <div class=\"pageinfo-item-content\">{{ createdTime || '顯示出錯' }}</div>\n    </div>\n    <div class=\"pageinfo-item\">\n      <div class=\"pageinfo-item-name\">\n        <div class=\"pageinfo-item-icon\">\n          <font-awesome-icon :icon=\"['far', 'clock']\"/>\n        </div>\n        上次編輯</div>\n      <div class=\"pageinfo-item-content\">{{ editTime || '顯示出錯' }}</div>\n    </div>\n    <div class=\"pageinfo-item\" id=\"tagsfield\">\n      <div class=\"pageinfo-item-name addtag\" type=\"button\" @click=\"showTagNameInput\">\n        <div class=\"pageinfo-item-icon\">\n          <font-awesome-icon :icon=\"['fas', 'tags']\"/>\n        </div>\n        <span >標籤</span>\n        <div class=\"ms-2\">+</div>\n      </div>\n\n      <div class=\"pageinfo-item-content\"\n          @keydown.stop=\"handleKeyDownIntagInput($event)\">\n        <template v-if=\"page.tags.length !== 0\">\n          <div class=\"tag\" type=\"button\"\n              :style=\"{ 'background-color': `${tag.color}` }\"\n              v-for=\"(tag) in page.tags\"\n              :key=\"page.id + tag\"\n              @click=\"deleteTag($event, tag)\">\n            <div class=\"tag-content\">\n              {{ tag.name }}\n              <div class=\"tag-content-delete\">X</div>\n            </div>\n          </div>\n        </template>\n        <template v-else>\n          <div style=\"color: #777;\">\n            None\n          </div>\n        </template>\n        <input type=\"text\" placeholder=\"輸入標籤名稱後按下Enter鍵創建\"\n            v-show=\"isShow\"\n            id=\"tagNameInput\">\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, nextTick } from 'vue';\nimport { useStore } from 'vuex';\nimport { showEffect, transTimeStampToLocalTime } from '../../components/commonEffect';\n\nconst usePageTagEffect = () => {\n  const store = useStore();\n\n  const { isShow, handleShow } = showEffect();\n\n  const handleKeyDownIntagInput = (e) => {\n    if (e.keyCode === 13) {\n      store.dispatch('pages/addTag', e.target.value);\n      e.target.value = '';\n    }\n    if (e.keyCode === 8 && e.target.value === '') {\n      handleShow(false);\n    }\n  };\n\n  const focusToTagInput = () => {\n    nextTick(() => {\n      document.getElementById('tagNameInput').focus();\n    });\n  };\n\n  const showTagNameInput = () => {\n    handleShow(true);\n    focusToTagInput();\n  };\n\n  const deleteTag = (e, tag) => {\n    store.dispatch('pages/deleteTag', tag);\n    focusToTagInput();\n  };\n\n  const hiddenTagNameInputByClick = (e) => {\n    if (!isShow.value) return;\n    if (e.target.closest('#tagsfield') || e.target.closest('.tag')) return;\n    handleShow(false);\n  };\n\n  return {\n    isShow,\n    handleKeyDownIntagInput,\n    showTagNameInput,\n    hiddenTagNameInputByClick,\n    deleteTag,\n  };\n};\n\nexport default {\n  name: 'PageInfo',\n  props: ['page'],\n  setup(props) {\n    const createdTime = computed(() => transTimeStampToLocalTime(props.page.createdTime));\n    const editTime = computed(() => transTimeStampToLocalTime(props.page.editTime));\n\n    const {\n      isShow,\n      handleKeyDownIntagInput,\n      showTagNameInput,\n      hiddenTagNameInputByClick,\n      deleteTag,\n    } = usePageTagEffect();\n\n    document.addEventListener('click', (e) => hiddenTagNameInputByClick(e));\n\n    return {\n      createdTime,\n      editTime,\n      handleKeyDownIntagInput,\n      isShow,\n      showTagNameInput,\n      hiddenTagNameInputByClick,\n      deleteTag,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.pageinfo{\n  font-size: 13px;\n  border-bottom: 1px solid #dbdbdb;\n  margin-top: 1.5rem;\n  margin-bottom: 1.5rem;\n  padding-bottom: .5rem;\n  &-item{\n    display: flex;\n    min-height: 2.5rem;\n    &-icon{\n      width: 1.7rem;\n    }\n    &-name{\n      margin-left: .3rem;\n      margin-right: .5rem;\n      display: flex;\n      color: #adadad;\n      min-width: 8rem;\n    }\n    &-content{\n      width: 100%;\n      display: flex;\n      flex-wrap: wrap;\n      color: #646464;\n      input{\n        width: 100%;\n        &::placeholder{\n          color: #c4c4c4;\n        }\n      }\n    }\n  }\n}\n.tag{\n      line-height: 1.5rem;\n      height: 1.5rem;\n      border-radius: .3rem;\n      padding: 0 .4rem;\n      margin-right: .4rem;\n      margin-bottom: .4rem;\n      color: #525252;\n      background: #dfdfdf;\n      display: flex;\n      &-content{\n        position: relative;\n        &-delete{\n          position: absolute;\n          left: 50%;\n          top: 50%;\n          width: 100%;\n          height: 100%;\n          transform: translate(-50%, -50%);\n          color: transparent;\n          text-align: center;\n          font-weight: 700;\n          &:hover{\n            color: #636363;\n          }\n        }\n      }\n      &:hover{\n        color: #c5c5c5;\n      }\n    }\n.addtag{\n  color: #adadad;\n  transition: color .3s ease-out ;\n  &:hover{\n    color: #7e7e7e;\n  }\n}\n\n</style>\n","import { render } from \"./PageInfo.vue?vue&type=template&id=422e5e5c&scoped=true\"\nimport script from \"./PageInfo.vue?vue&type=script&lang=js\"\nexport * from \"./PageInfo.vue?vue&type=script&lang=js\"\n\nimport \"./PageInfo.vue?vue&type=style&index=0&id=422e5e5c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-422e5e5c\"\n\nexport default script","<template>\n  <div class=\"block-style-editor\"\n      :style=\"{ width: `${currentSidebarWidth}px`,\n          left: isShow ? '0' : `${-currentSidebarWidth || -600}px`}\">\n    <div class=\"style-editor-title\">挑選顏色 :</div>\n    <div class=\"style-editor-content d-flex flex-wrap\">\n      <div type=\"button\"\n          v-for=\"(color) in colors\"\n          :key=\"color.code\"\n          @click=\"setBlockColor(color.name)\"\n          :class=\"{ 'color-item': true,\n                'color-item-active': blockDress.color === color.name }\">\n        <div type=\"button\"\n            class=\"color-item-circle\"\n            :style=\"{ 'background-color': `#${color.code}` }\"></div>\n      </div>\n    </div>\n    <div class=\"style-editor-title\">區塊樣式 :</div>\n    <div class=\"style-editor-content\">\n      <div :class=\"{ 'style-item': true,\n            'style-item-active': blockDress.style === style.className }\"\n          type=\"button\"\n          v-for=\"(style) in styles\"\n          :key=\"style.name\"\n          @click=\"setBlockStyle(style.className)\">\n        <div class=\"style-name\">{{ style.name }}</div>\n        <div :class=\"style.className\" class=\"my-2\">text</div>\n      </div>\n    </div>\n\n    <div class=\"style-check\" type=\"button\" @click=\"checkAction\">確認修改</div>\n  </div>\n</template>\n\n<script>\nimport { reactive, computed, watch } from 'vue';\nimport { useStore } from 'vuex';\n\nconst colors = [\n  {\n    name: 'default',\n    code: '584d58',\n  },\n  {\n    name: 'orange',\n    code: 'eea14a',\n  },\n  {\n    name: 'red',\n    code: 'd13939',\n  },\n  {\n    name: 'blue',\n    code: '2a7eec',\n  },\n  {\n    name: 'yellow',\n    code: 'e0b833',\n  },\n  {\n    name: 'green',\n    code: '39d15f',\n  },\n  {\n    name: 'purple',\n    code: '9228e9',\n  },\n  {\n    name: 'gray',\n    code: 'c4c4c4',\n  },\n  {\n    name: 'pink',\n    code: 'db2571',\n  },\n];\n\nconst styles = [\n  {\n    name: '字體填色',\n    className: 'style-text-color',\n  },\n  {\n    name: '背景填色',\n    className: 'style-bg-color',\n  },\n  {\n    name: '外框填色',\n    className: 'style-border',\n  },\n];\n\nexport default {\n  name: 'BlockStyleEditor',\n  props: ['isShow'],\n  emits: ['hiddenStyleEditor'],\n  setup(props, { emit }) {\n    const store = useStore();\n    const currentSidebarWidth = computed(() => store.state.sidebarState.currentWidth);\n    const selectedBlocks = computed(() => store.getters['blocks/selectedBlocks']);\n\n    const setClassNameToBlock = (block, className) => {\n      store.commit('blocks/editBlockData', {\n        id: block.id,\n        key: 'className',\n        value: className,\n      });\n    };\n\n    const blockDress = reactive({\n      style: '',\n      color: '',\n    });\n\n    const setBlockColor = (color) => {\n      blockDress.color = color;\n    };\n\n    const setBlockStyle = (style) => {\n      blockDress.style = style;\n    };\n\n    const setBlockDressByClassName = (className) => {\n      if (className === '') {\n        blockDress.style = '';\n        blockDress.color = '';\n        return;\n      }\n      const style = className.split('__')[0];\n      const color = className.split('__')[1];\n      blockDress.style = style;\n      blockDress.color = color;\n    };\n\n    // 剛進入BlockStyleEditor的處理程序\n    watch(() => props.isShow, (curr, prev) => {\n      if (prev === true || curr === false) return;\n\n      if (selectedBlocks.value.length === 1) {\n        const block = selectedBlocks.value[0];\n        setBlockDressByClassName(block.className);\n        return;\n      }\n\n      const classNameOfFirstBlock = selectedBlocks.value[0].className;\n\n      // 所有選到的block的樣式都一樣 || 有不一樣的block樣式\n      if (selectedBlocks.value.every((block) => block.className === classNameOfFirstBlock)) {\n        setBlockDressByClassName(classNameOfFirstBlock);\n      } else {\n        setBlockDressByClassName('');\n      }\n    });\n\n    watch(() => blockDress, (curr) => {\n      if (blockDress.style === '' && blockDress.color === '') return;\n\n      if (blockDress.color !== '' && blockDress.style === '') {\n        setBlockStyle(styles[0].className);\n        return;\n      }\n\n      if (blockDress.style !== '' && blockDress.color === '') {\n        setBlockColor(colors[0].name);\n        return;\n      }\n\n      selectedBlocks.value.forEach((block) => {\n        setClassNameToBlock(block, `${curr.style}__${curr.color}`);\n      });\n    }, { deep: true });\n\n    const checkAction = () => {\n      emit('hiddenStyleEditor');\n    };\n\n    return {\n      colors,\n      styles,\n      setBlockColor,\n      setBlockStyle,\n      blockDress,\n      checkAction,\n      currentSidebarWidth,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.block-style-editor{\n  box-sizing: border-box;\n  background-color: #4d454e;\n  position: fixed;\n  left: -500px;\n  bottom: 0;\n  z-index: 30;\n  border: .1rem solid #665c68;\n  border-left: none;\n  border-radius: .5rem;\n  width: 300px;\n  padding: 1.5rem;\n  box-shadow: -3px -3px 5px 0 rgb(54, 54, 54);\n  overflow: hidden;\n  transition: left .2s ease-out;\n}\n\n.style-editor{\n  &-title{\n    transform: scale(.85);\n    transform-origin: left;\n    font-weight: 300;\n    color: #f1a726;\n    margin-bottom: .4rem;\n    font-weight: 500;\n  }\n  &-content {\n    border: .01rem solid #6b6b6b;\n    margin-bottom: 2rem;\n  }\n}\n\n.style{\n  &-item{\n    display: flex;\n    align-items: center;\n    padding: .3rem .8rem;\n    &:hover{\n      background-color: #5c545e;\n    }\n    &:active{\n      background-color: #69606b;\n    }\n    &-active{\n      background-color: #5c545e;\n    }\n  }\n  &-name{\n    color: #aea7af;\n    margin-right: 1rem;\n  }\n  &-bg{\n    flex: 1;\n    background-color: rgb(226, 226, 226);\n  }\n  &-text-color{\n    flex: 1;\n    color: #cec2cf;\n  }\n  &-border{\n    flex: 1;\n    color: #aea7af;\n    border: .1rem solid #aea7af;\n  }\n  &-bg-range{\n    width: 2rem;\n    background-color: rgb(226, 226, 226);\n  }\n  &-border-range{\n    width: 2rem;\n    color: #aea7af;\n    border: .1rem solid #aea7af;\n  }\n  &-check{\n    text-align: center;\n    margin: 0 auto;\n    padding: .5rem;\n    color: #2e2e2e;\n    border-radius: 2px;\n    background-color: #f1a726;\n    font-weight: 700;\n    transition: background-color .1s ease-out;\n    &:hover{\n      background-color: #eeb451;\n    }\n  }\n}\n\n.color-item{\n  flex-basis: auto;\n  opacity: .3;\n  transition: opacity .3s ease-out;\n  &-circle{\n    margin: .5rem;\n    height: 2rem;\n    width: 2rem;\n    border-radius: 50%;\n  }\n  &:hover{\n    opacity: .7;\n  }\n  &:active{\n    opacity: 1;\n\n  }\n  &-active{\n    background-color: #6c646e;\n    opacity: 1;\n  }\n}\n\n.bg{\n  &-orange{\n    background-color: #eea14a;\n  }\n  &-yellow{\n    background-color: #e0b833;\n  }\n  &-blue{\n    background-color: #2a7eec;\n  }\n  &-red{\n    background-color: #d13939;\n  }\n  &-green{\n    background-color: #39d15f;\n  }\n  &-purple{\n    background-color: #9228e9;\n  }\n  &-gray{\n    background-color: #c4c4c4;\n  }\n  &-pink{\n    background-color: #db2571;\n  }\n}\n\n</style>\n","import { render } from \"./BlockStyleEditor.vue?vue&type=template&id=16bab8ca&scoped=true\"\nimport script from \"./BlockStyleEditor.vue?vue&type=script&lang=js\"\nexport * from \"./BlockStyleEditor.vue?vue&type=script&lang=js\"\n\nimport \"./BlockStyleEditor.vue?vue&type=style&index=0&id=16bab8ca&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-16bab8ca\"\n\nexport default script","<template>\n  <div class=\"base\">\n  <div class=\"base-container\">\n    <div class=\"base-title\">\n      <div class=\"base-title-first\">N</div>\n    </div>\n    <div class=\"base-small\">區塊構成的世界...</div>\n    <div class=\"base-intro\">\n      <div class=\"base-intro-quote\">Note是一個筆記軟體</div>\n      <br>\n      <br>\n      <div class=\"base-intro-text\">\n        <p>使用不同的區塊工具</p>\n        <p>來記錄<span>文字</span>、影片、圖像等載體...</p>\n        <p></p>\n        <p></p>\n        <br>\n        <p>也能夠創建頁面</p>\n        <p>來為多個不同區塊分類</p>\n        <br>\n        <br>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nexport default {\n  name: 'FrontPage',\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.base{\n  height: 100%;\n  width: 100%;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &-container {\n    margin-left: -1rem;\n  }\n  &-title{\n    width: 100%;\n    color: #685d68;\n    color: #504952;\n    height: 12rem;\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n    &-first{\n      background: #575157;\n      color: #F1F0EA;\n      font-size: 8rem;\n      font-weight: bold;\n      line-height: 9rem;\n      box-shadow: 2px 1px 6px 0 #afafaf;\n      border-radius: .5rem;\n      padding: 0 .7rem;\n    }\n    &-second{\n      box-shadow: .1rem .1rem .3rem .1rem #858585;\n      font-size: 2rem;\n      font-weight: 900;\n      padding: 0 .5rem;\n      border-radius: .5rem;\n      color: #645b66;\n    }\n  }\n  &-small{\n    margin: .7rem;\n    padding-left: .7rem;\n    text-align: center;\n    color: #999999;\n    transform: scale(.85);\n  }\n  &-intro{\n    text-align: center;\n    color: #5f5661;\n    margin-top: 3rem;\n    &-quote{\n      margin-left: .5rem;\n      font-size: 1.3rem;\n      font-weight: bold;\n      color: #69646b;\n    }\n    &-text{\n      color: #807883;\n      p {\n        margin-bottom: .5rem;\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./FrontPage.vue?vue&type=template&id=e8fdf93c&scoped=true\"\nimport script from \"./FrontPage.vue?vue&type=script&lang=js\"\nexport * from \"./FrontPage.vue?vue&type=script&lang=js\"\n\nimport \"./FrontPage.vue?vue&type=style&index=0&id=e8fdf93c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-e8fdf93c\"\n\nexport default script","import SecureLS from 'secure-ls';\nimport { useStore } from 'vuex';\n\nconst watchStoreEffect = () => {\n  const store = useStore();\n  const ls = new SecureLS();\n\n  const updatePagesToLSByWatching = () => {\n    store.watch((state) => state.pages.pages, (curr) => {\n      ls.set('pages', curr);\n    }, { deep: true });\n  };\n\n  const updateBlocksToLSByWatching = () => {\n    store.watch((state) => state.blocks.blocks, (curr) => {\n      ls.set('blocks', curr);\n    }, { deep: true });\n  };\n\n  const storeObserver = () => {\n    const updateEditTimeOfPage = (mutation, state) => {\n      if (!state.pages.currentPageId) return;\n\n      const hasEditBlock = mutation.type === 'blocks/editBlockData';\n      const hasEditPage = mutation.type === 'pages/editPageData'\n        && mutation.payload?.key !== 'editTime';\n\n      if (hasEditBlock || hasEditPage) {\n        store.commit('pages/editPageData', {\n          key: 'editTime',\n          value: new Date().getTime().toString(),\n        });\n      }\n    };\n\n    const collapseSidebarByAddSomething = (mutation, state) => {\n      if (!(state.sidebarState.isCollapse === false\n        && state.sidebarState.isFloating === true)) return;\n      const mutations = [\n        'pages/deletePage',\n        'pages/setCurrentPageId',\n        'blocks/addBlock',\n      ];\n\n      for (let i = 0; i < mutations.length; i += 1) {\n        if (mutation.type === mutations[i]) {\n          store.commit('setSidebarCollapse', true);\n          return;\n        }\n      }\n    };\n\n    const checkDataInStoreThen = (mutation, callback) => {\n      if (mutation.type === 'setStoreData') {\n        callback();\n      }\n    };\n\n    const updateRecentPageIds = (mutation) => {\n      if (mutation.type === 'pages/setCurrentPageId') {\n        store.commit('userInfo/addIdToRecentPageIds', mutation.payload);\n      }\n      if (mutation.type === 'pages/deletePage') {\n        store.commit('userInfo/deleteIdFromRecentPageIds', mutation.payload);\n      }\n    };\n\n    store.subscribe((mutation, state) => {\n      updateEditTimeOfPage(mutation, state);\n      collapseSidebarByAddSomething(mutation, state);\n      checkDataInStoreThen(mutation, () => {\n        if (window.innerWidth > 992) {\n          store.commit('setSidebarCollapse', false);\n        }\n      });\n      updateRecentPageIds(mutation);\n    });\n  };\n\n  return {\n    updatePagesToLSByWatching,\n    updateBlocksToLSByWatching,\n    storeObserver,\n  };\n};\n\nexport default watchStoreEffect;\n","import { reactive, ref } from 'vue';\n\nconst updateIDsEffectByDragDrop = (allIds, getTargetId, getCatchIds) => {\n  const ids = reactive({ value: [] });\n  const currentIdUnderTheMouse = ref('');\n\n  const cancelDefault = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleBeforeDrop = (e) => {\n    cancelDefault(e);\n    currentIdUnderTheMouse.value = getTargetId(e);\n  };\n\n  const handleDrop = (e, callback) => {\n    cancelDefault(e);\n\n    currentIdUnderTheMouse.value = '';\n\n    const catchIds = getCatchIds(e);\n    const targetId = getTargetId(e);\n\n    if (catchIds.includes(targetId)) return;\n\n    const newArr = allIds.value.filter((id) => !catchIds.includes(id));\n    const newIndex = newArr.indexOf(targetId);\n\n    Array.prototype.splice.apply(newArr, [newIndex + 1, 0, ...catchIds]);\n    ids.value = newArr;\n\n    callback();\n  };\n\n  return {\n    ids,\n    currentIdUnderTheMouse,\n    cancelDefault,\n    handleDrop,\n    handleBeforeDrop,\n  };\n};\n\nexport default updateIDsEffectByDragDrop;\n","import { render } from \"./Workspace.vue?vue&type=template&id=511411a3&scoped=true\"\nimport script from \"./Workspace.vue?vue&type=script&lang=js\"\nexport * from \"./Workspace.vue?vue&type=script&lang=js\"\n\nimport \"./Workspace.vue?vue&type=style&index=0&id=511411a3&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-511411a3\"\n\nexport default script","import { render } from \"./Home.vue?vue&type=template&id=242ecd16&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=242ecd16&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-242ecd16\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserField.vue?vue&type=style&index=0&id=434fbd4f&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Workspace.vue?vue&type=style&index=0&id=511411a3&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Modal.vue?vue&type=style&index=0&id=00195a12&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Header.vue?vue&type=style&index=0&id=13f33fb6&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CustomList.vue?vue&type=style&index=0&id=53f33416&lang=scss&scoped=true\""],"sourceRoot":""}