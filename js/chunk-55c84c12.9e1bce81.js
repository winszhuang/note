(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55c84c12"],{"0092":function(e,t,c){},"06e1":function(e,t,c){},"0eaa":function(e,t,c){},1283:function(e,t,c){"use strict";c("bb6c")},"1fc8":function(e,t,c){"use strict";c("6185")},2127:function(e,t,c){},"2f1a":function(e,t,c){},"36a2":function(e,t,c){},4387:function(e,t,c){"use strict";c("2127")},"50e1":function(e,t,c){},5841:function(e,t,c){"use strict";c("06e1")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,c){var n=c("1d80"),a=c("5899"),o="["+a+"]",i=RegExp("^"+o+o+"*"),r=RegExp(o+o+"*$"),s=function(e){return function(t){var c=String(n(t));return 1&e&&(c=c.replace(i,"")),2&e&&(c=c.replace(r,"")),c}};e.exports={start:s(1),end:s(2),trim:s(3)}},6185:function(e,t,c){},"6e69":function(e,t,c){},"70a5":function(e,t,c){"use strict";c("f17d")},"73af":function(e,t,c){"use strict";c("50e1")},7884:function(e,t,c){},"81b1":function(e,t,c){},"901c":function(e,t,c){"use strict";c("0092")},9346:function(e,t,c){"use strict";c("36a2")},a127:function(e,t,c){"use strict";c("a7ef")},a3c1:function(e,t,c){"use strict";c("7884")},a7ef:function(e,t,c){},a9e3:function(e,t,c){"use strict";var n=c("83ab"),a=c("da84"),o=c("94ca"),i=c("6eeb"),r=c("5135"),s=c("c6b6"),l=c("7156"),d=c("c04e"),u=c("d039"),b=c("7c73"),f=c("241c").f,O=c("06cf").f,v=c("9bf2").f,p=c("58a8").trim,j="Number",g=a[j],m=g.prototype,k=s(b(m))==j,h=function(e){var t,c,n,a,o,i,r,s,l=d(e,!1);if("string"==typeof l&&l.length>2)if(l=p(l),t=l.charCodeAt(0),43===t||45===t){if(c=l.charCodeAt(2),88===c||120===c)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+l}for(o=l.slice(2),i=o.length,r=0;r<i;r++)if(s=o.charCodeAt(r),s<48||s>a)return NaN;return parseInt(o,n)}return+l};if(o(j,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var y,S=function(e){var t=arguments.length<1?0:e,c=this;return c instanceof S&&(k?u((function(){m.valueOf.call(c)})):s(c)!=j)?l(new g(h(t)),c,S):h(t)},I=n?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),w=0;I.length>w;w++)r(g,y=I[w])&&!r(S,y)&&v(S,y,O(g,y));S.prototype=m,m.constructor=S,i(a,j,S)}},ac5f:function(e,t,c){"use strict";c("81b1")},bb51:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a=Object(n["O"])("data-v-242ecd16");Object(n["v"])("data-v-242ecd16");var o={class:"all"};Object(n["t"])();var i=a((function(e,t,c,a,i,r){var s=Object(n["A"])("Sidebar"),l=Object(n["A"])("Workspace");return Object(n["s"])(),Object(n["e"])("div",o,[Object(n["i"])(s),Object(n["i"])(l)])})),r=(c("b0c0"),Object(n["O"])("data-v-64caf338"));Object(n["v"])("data-v-64caf338");var s=Object(n["i"])("div",{class:"field-title"},"通用 :",-1),l={class:"customlist-group"},d={class:"customlist-item-1 ms-4",style:{"margin-left":"1rem"}},u=Object(n["i"])("div",{class:"customlist-item-6 block-name "},"關鍵字搜尋",-1),b={class:"scollitem"},f=Object(n["i"])("div",{class:"field-title"},"頁面 :",-1),O={class:"customlist-group"},v=Object(n["i"])("div",{class:"ms-4 customlist-item-1"},"+",-1),p=Object(n["i"])("div",{class:"customlist-item-6"},"增加頁面",-1),j=Object(n["i"])("div",{class:"field-title"},"區塊 :",-1),g={class:"customlist-group"},m={class:"customlist-item-1 ms-4"},k={class:"customlist-item-6 block-name"},h={class:"sidebar-footer"},y=Object(n["i"])("div",{class:"addpage-text"},"+ 新頁面",-1);Object(n["t"])();var S=r((function(e,t,c,a,o,i){var S=Object(n["A"])("Search"),I=Object(n["A"])("Modal"),w=Object(n["A"])("UserField"),B=Object(n["A"])("Splitter"),P=Object(n["A"])("font-awesome-icon"),C=Object(n["A"])("CustomList");return Object(n["s"])(),Object(n["e"])(n["a"],null,[a.isShow?(Object(n["s"])(),Object(n["e"])(I,{key:0,onClose:t[2]||(t[2]=function(e){return a.handleShow(!1)}),mode:"component","container-class":"search-container","is-bg-static":!1},{component:r((function(){return[Object(n["i"])(S,{onClose:t[1]||(t[1]=function(e){return a.handleShow(!1)})})]})),_:1})):Object(n["f"])("",!0),Object(n["i"])("div",{class:{sidebar:!0,"sidebar-float":a.isSidebarFloating},style:{width:!0===a.isSidebarCollapse?"0":"".concat(a.sidebarWidth,"px")}},[Object(n["i"])(w),a.isSidebarFloating?Object(n["f"])("",!0):(Object(n["s"])(),Object(n["e"])(B,{key:0,"class-name":"splitter",onGetMouseOffset:a.setSidebarWidth,onStopMouseMove:a.setPrevSidebarWidth},null,8,["onGetMouseOffset","onStopMouseMove"])),s,Object(n["i"])("div",l,[Object(n["i"])("div",{class:"customlist-group-item",type:"button",onClick:t[3]||(t[3]=function(e){return a.handleShow(!0)})},[Object(n["i"])("div",d,[Object(n["i"])(P,{icon:["fas","search"]})]),u])]),Object(n["i"])("div",b,[f,Object(n["i"])("div",O,[(Object(n["s"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(a.rootPages,(function(e){return Object(n["s"])(),Object(n["e"])(C,{key:e.id,page:e},null,8,["page"])})),128)),Object(n["i"])("div",{class:"customlist-group-item addpage-small",type:"button",onClick:t[4]||(t[4]=function(){return a.addPage&&a.addPage.apply(a,arguments)})},[v,p])]),j,Object(n["i"])("div",g,[(Object(n["s"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(a.blocktype,(function(e){return Object(n["s"])(),Object(n["e"])("div",{class:"customlist-group-item",type:"button",key:e.type,onClick:function(t){return a.checkBlockTypeThenAdd(e.type)}},[Object(n["i"])("div",m,[Object(n["i"])(P,{icon:[a.transStyleToFAPrefix(e.style),e.icon||"heading"],size:e.size||"xs"},null,8,["icon","size"])]),Object(n["i"])("div",k,Object(n["E"])(e.name),1)],8,["onClick"])})),128))])]),Object(n["i"])("div",h,[Object(n["i"])("div",{class:"addpage",type:"button",onClick:t[5]||(t[5]=function(){return a.addPage&&a.addPage.apply(a,arguments)})},[y])])],6)],64)})),I=(c("d3b7"),c("25f0"),c("7db0"),c("5502")),w=Object(n["O"])("data-v-434fbd4f");Object(n["v"])("data-v-434fbd4f");var B={class:"topfield"},P={class:"userfield-icon"},C={class:"userfield-info"},A={class:"userfield-info-name"},T={class:"userfield-info-email"};Object(n["t"])();var E=w((function(e,t,c,a,o,i){var r,s,l=Object(n["A"])("font-awesome-icon"),d=Object(n["A"])("NinjaButton");return Object(n["s"])(),Object(n["e"])("div",B,[Object(n["i"])("div",{class:{userfield:!0,"p-0":a.isSidebarCollapse},type:"button",onClick:t[1]||(t[1]=function(){return a.linkToUserInfo&&a.linkToUserInfo.apply(a,arguments)})},[Object(n["i"])("div",P,[Object(n["i"])("div",{style:{"background-image":"url(".concat(a.headshotURL,");")}},"C",4)]),Object(n["i"])("div",C,[Object(n["i"])("div",A,Object(n["E"])((null===(r=a.userInfo)||void 0===r?void 0:r.name)||"遊客"),1),Object(n["i"])("div",T,Object(n["E"])((null===(s=a.userInfo)||void 0===s?void 0:s.email)||"xxx.gmail.com"),1)])],2),a.isSidebarFloating?Object(n["f"])("",!0):(Object(n["s"])(),Object(n["e"])(d,{key:0,onClickThen:a.floatSidebar,"class-name":"left-collapse"},{default:w((function(e){var t=e.isShow;return[Object(n["L"])(Object(n["i"])("div",null,[Object(n["i"])(l,{icon:["fas","angle-double-left"]})],512),[[n["I"],t]])]})),_:1},8,["onClickThen"])),a.isSidebarFloating&&a.isWindowWidthLarge()?(Object(n["s"])(),Object(n["e"])(d,{key:1,onClickThen:a.lockSidebar,"class-name":"left-collapse"},{default:w((function(e){var t=e.isShow;return[Object(n["L"])(Object(n["i"])("div",null,[Object(n["i"])(l,{icon:["fas","lock"]})],512),[[n["I"],t]])]})),_:1},8,["onClickThen"])):Object(n["f"])("",!0)])})),D=c("6c02"),N=Object(n["O"])("data-v-30b92f35"),x=N((function(e,t,c,a,o,i){return Object(n["s"])(),Object(n["e"])("div",{class:c.className,type:"button",onMouseenter:t[1]||(t[1]=function(e){return a.handleShow(!0)}),onMouseleave:t[2]||(t[2]=function(e){return a.handleShow(!1)}),onClick:t[3]||(t[3]=function(t){return e.$emit("clickThen")})},[Object(n["i"])(n["b"],null,{default:N((function(){return[Object(n["z"])(e.$slots,"default",{isShow:a.isShow},void 0,!0)]})),_:3})],34)})),_=c("13bf"),F={name:"NinjaButton",props:["className"],setup:function(){var e=Object(_["e"])(),t=e.isShow,c=e.handleShow;return{isShow:t,handleShow:c}}};F.render=x,F.__scopeId="data-v-30b92f35";var M=F,L={name:"UserField",components:{NinjaButton:M},setup:function(){var e=Object(I["b"])(),t=Object(D["d"])(),c=Object(n["c"])((function(){return e.state.userInfo.userInfo})),a=Object(n["c"])((function(){return e.state.sidebarState.isCollapse})),o=Object(n["c"])((function(){return e.state.sidebarState.isFloating})),i=function(){return window.innerWidth>992},r=function(){t.push("/userinfo")},s=Object(n["c"])((function(){return c.value.headshot?"".concat(c.value.headshot):"https://image.flaticon.com/icons/png/512/3135/3135715.png"})),l=Object(n["c"])((function(){return c.value.headshot?'<img src="'.concat(c.value.headshot,'">'):'<img src="https://image.flaticon.com/icons/png/512/3135/3135715.png">'})),d=function(){e.dispatch("floatSidebar")},u=function(){!1===a.value&&e.commit("setSidebarCollapse",!0),e.dispatch("lockSidebar")};return{userInfo:c,headshot:l,headshotURL:s,floatSidebar:d,lockSidebar:u,isSidebarCollapse:a,isSidebarFloating:o,linkToUserInfo:r,isWindowWidthLarge:i}}};c("bded");L.render=E,L.__scopeId="data-v-434fbd4f";var W=L,U=Object(n["O"])("data-v-53f33416");Object(n["v"])("data-v-53f33416");var H={class:"customlist-item-1"},z={class:"customlist-item-name"};Object(n["t"])();var K=U((function(e,t,c,a,o,i){var r=Object(n["A"])("font-awesome-icon"),s=Object(n["A"])("CustomList",!0);return Object(n["s"])(),Object(n["e"])(n["a"],null,[Object(n["i"])("div",{class:["customlist-group-item",{"customlist-group-item-action":c.page.id===a.currentPageId}],type:"button",onClick:t[4]||(t[4]=function(e){return a.goCurrentPage(c.page.id)}),onMouseenter:t[5]||(t[5]=function(e){return a.hoverHandle(!0)}),onMouseleave:t[6]||(t[6]=function(e){return a.hoverHandle(!1)})},[Object(n["i"])("div",{style:{"padding-left":"".concat(c.number,"rem")}},null,4),Object(n["i"])("div",{class:"caret-icon customlist-item-1 scale-07 icon-button",onClick:t[1]||(t[1]=function(){return a.toggleShow&&a.toggleShow.apply(a,arguments)})},[Object(n["i"])(r,{icon:a.caretIcon},null,8,["icon"])]),Object(n["i"])("div",H,[Object(n["i"])(r,{icon:["far","file"]})]),Object(n["i"])("div",z,Object(n["E"])(c.page.name),1),Object(n["L"])(Object(n["i"])("div",{class:"ms-auto icon-button",onClick:t[2]||(t[2]=Object(n["N"])((function(e){return a.deletePage(c.page)}),["stop"]))},[Object(n["i"])(r,{icon:["far","minus-square"],style:{color:"#999999"},size:"sm"})],512),[[n["I"],a.isHover]]),Object(n["L"])(Object(n["i"])("div",{class:"icon-button",onClick:t[3]||(t[3]=Object(n["N"])((function(e){return a.addPageInside(c.page)}),["stop"]))},[Object(n["i"])(r,{icon:["far","plus-square"],style:{color:"#999999"}})],512),[[n["I"],a.isHover]])],34),Object(n["L"])(Object(n["i"])("div",null,[0!==a.childrenPages.length?(Object(n["s"])(!0),Object(n["e"])(n["a"],{key:0},Object(n["y"])(a.childrenPages,(function(e){return Object(n["s"])(),Object(n["e"])(s,{key:e.id,page:e,number:c.number+1},null,8,["page","number"])})),128)):(Object(n["s"])(),Object(n["e"])("div",{key:1,class:"children-list-nopage",style:{"padding-left":"".concat(3.5+c.number,"rem")}}," 沒有頁面 ",4))],512),[[n["I"],a.isShow]])],64)})),q=(c("a9e3"),c("ad3d")),R=c("c074"),$=c("c960"),J={name:"CustomList",components:{FontAwesomeIcon:q["a"]},props:{page:{type:Object},number:{type:Number,default:0}},setup:function(e){var t=Object(I["b"])(),c=Object(n["c"])((function(){return t.getters["pages/childrenPages"](e.page.id)})),a=Object(n["F"])(t.state.pages),o=a.currentPageId,i=Object($["a"])(),r=i.goCurrentPage,s=Object(_["e"])(),l=s.isShow,d=s.handleShow,u=s.toggleShow,b=Object(n["c"])((function(){return l.value?R["f"]:R["e"]})),f=function(e){var c={id:Object(_["c"])(),name:"untitle",blocks:[],parentId:e.id,createdTime:(new Date).getTime().toString(),editTime:(new Date).getTime().toString(),tags:[],cover:""};t.commit("pages/addPage",c);var n={type:"page",id:Object(_["c"])(),parentId:"",content:c.id,className:"style-text-color__default"};t.dispatch("blocks/addBlock",{page:e,block:n}),d(!0)},O=function(e){t.dispatch("pages/deletePage",e)},v=Object(n["x"])(!1),p=function(e){v.value=e};return{goCurrentPage:r,childrenPages:c,currentPageId:o,deletePage:O,addPageInside:f,hoverHandle:p,isHover:v,caretIcon:b,isShow:l,toggleShow:u}}};c("fdfe");J.render=K,J.__scopeId="data-v-53f33416";var X=J,G=Object(n["O"])("data-v-00195a12");Object(n["v"])("data-v-00195a12");var V={key:1,class:"modal-container"},Y={class:"modal-header"},Q={class:"modal-body"},Z={class:"modal-footer"};Object(n["t"])();var ee=G((function(e,t,c,a,o,i){return Object(n["s"])(),Object(n["e"])("div",{class:"modal-mask",onClick:t[1]||(t[1]=function(e){return a.closeModalByClick(e)})},["component"===c.mode?(Object(n["s"])(),Object(n["e"])("div",{key:0,class:c.containerClass},[Object(n["z"])(e.$slots,"component",{},void 0,!0)],2)):(Object(n["s"])(),Object(n["e"])("div",V,[Object(n["i"])("div",Y,[Object(n["z"])(e.$slots,"header",{},void 0,!0)]),Object(n["i"])("div",Q,[Object(n["z"])(e.$slots,"body",{},void 0,!0)]),Object(n["i"])("div",Z,[Object(n["z"])(e.$slots,"footer",{},void 0,!0)])]))])})),te={name:"Modal",props:["mode","isBgStatic","containerClass"],setup:function(e,t){var c=t.emit,n=function(e){"modal-wrapper"!==e.target.className&&"modal-mask"!==e.target.className||c("close")};return{closeModalByClick:n}}};c("f57f");te.render=ee,te.__scopeId="data-v-00195a12";var ce=te,ne=Object(n["O"])("data-v-7ec26dc8");Object(n["v"])("data-v-7ec26dc8");var ae={class:"search"},oe={class:"search-input"},ie={class:"search-icon"},re=Object(n["i"])("div",{class:"search-divide"},null,-1),se={class:"search-select"},le={key:0,class:"search-list"},de={class:"d-flex"},ue={class:"search-item-page-icon"},be={key:1,class:"search-list"},fe={class:"d-flex"},Oe={class:"search-item-page-icon"},ve={class:"search-item-page"};Object(n["t"])();var pe=ne((function(e,t,c,a,o,i){var r=Object(n["A"])("font-awesome-icon");return Object(n["s"])(),Object(n["e"])("div",ae,[Object(n["i"])("div",oe,[Object(n["i"])("div",ie,[Object(n["i"])(r,{icon:["fas","search"],size:"1x"})]),Object(n["L"])(Object(n["i"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.searchInput=e}),placeholder:"輸入搜尋內容"},null,512),[[n["H"],a.searchInput]])]),re,Object(n["i"])("div",se,[a.searchPages?(Object(n["s"])(),Object(n["e"])("div",le,[(Object(n["s"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(a.searchPages,(function(e){return Object(n["s"])(),Object(n["e"])("div",{class:"search-item",type:"button",onClick:function(t){return a.goPageAndCloseModal(e.id)},key:e.id},[Object(n["i"])("div",de,[Object(n["i"])("div",ue,[Object(n["i"])(r,{icon:["far","file"],size:"1x"})]),Object(n["i"])("div",{class:"search-item-page",innerHTML:a.getContentWithKeyword(e.name)},null,8,["innerHTML"])])],8,["onClick"])})),128))])):Object(n["f"])("",!0),a.searchBlocks?(Object(n["s"])(),Object(n["e"])("div",be,[(Object(n["s"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(a.searchBlocks,(function(e){var t;return Object(n["s"])(),Object(n["e"])("div",{class:"search-item",type:"button",onClick:function(t){return a.goBlockPosition(a.getPage(e.id),e)},key:e.id},[Object(n["i"])("div",fe,[Object(n["i"])("div",Oe,[Object(n["i"])(r,{icon:["far","file"],size:"1x"})]),Object(n["i"])("div",ve,Object(n["E"])(a.getPage(e.id).name),1)]),Object(n["i"])("div",{class:"search-content",innerHTML:a.getContentWithKeyword(null===(t=e.content)||void 0===t?void 0:t.text)},null,8,["innerHTML"])],8,["onClick"])})),128))])):Object(n["f"])("",!0)])])})),je=(c("caad"),c("2532"),c("ac1f"),c("1276"),c("99af"),{name:"Search",emits:["close"],setup:function(e,t){var c=t.emit,a=Object(I["b"])(),o=Object($["a"])(),i=o.goCurrentPage,r=Object(n["x"])(""),s=Object(n["c"])((function(){return a.getters["blocks/searchBlocks"](r.value)})),l=Object(n["c"])((function(){return a.getters["pages/searchPages"](r.value)})),d=Object(n["c"])((function(){return a.getters["userInfo/getPagesInRecentPageIds"]})),u=function(e){return Object(n["c"])((function(){return a.getters["pages/getPageByBlockId"](e)})).value},b=function(e,t){c("close"),a.dispatch("blocks/goBlockPosition",{page:e,block:t})},f=function(e){c("close"),i(e)},O=function(e){return Object(n["c"])((function(){var t=r.value;if(!e.includes(t))return"";for(var c=e.split(t),n="",a=0;a<c.length;a+=1){if(a===c.length-1){n+=c[a];break}n+="".concat(c[a],'<span style="font-weight: 900; color: #131313;">').concat(t,"</span>")}return n})).value};return{searchInput:r,searchPages:l,searchBlocks:s,getPage:u,goPageAndCloseModal:f,goBlockPosition:b,getContentWithKeyword:O,recentPages:d}}});c("1fc8");je.render=pe,je.__scopeId="data-v-7ec26dc8";var ge=je,me=Object(n["O"])("data-v-5bd4d606"),ke=me((function(e,t,c,a,o,i){return Object(n["s"])(),Object(n["e"])("div",{id:"splitter",class:c.className},null,2)})),he=c("febf"),ye={name:"Splitter",emits:["getMouseOffset","stopMouseMove"],props:["className"],setup:function(e,t){var c=t.emit,a=Object(he["a"])(),o=a.getMouseOffsetByClickElAndMove,i=function(e){c("getMouseOffset",e)},r=function(){c("stopMouseMove")};Object(n["q"])((function(){var e=document.getElementById("splitter"),t=o(),c=t.mouseDown,n=t.mouseMove,a=t.mouseUp;return e.addEventListener("mousedown",(function(e){c(e,(function(e){i(e)}))})),document.addEventListener("mousemove",(function(e){n(e,(function(e){i(e)}))})),document.addEventListener("mouseup",(function(e){a(e,r)})),{mouseDown:c,mouseMove:n,mouseUp:a}}))}};ye.render=ke,ye.__scopeId="data-v-5bd4d606";var Se=ye,Ie=c("6cb0"),we=300,Be=function(e,t){var c=Object(I["b"])(),a=Object(n["x"])(0),o=Object(n["x"])(0),i=function(c){return a.value=o.value+c.x,a.value>t&&(a.value=t),a.value<e&&(a.value=e),a.value},r=function(e){a.value=i(e)},s=function(){o.value=a.value};return Object(n["q"])((function(){a.value=we,o.value=we})),Object(n["J"])(a,(function(e){c.commit("setCurrentSidebarWidth",e)}),{immediate:!0}),{setSidebarWidth:r,setPrevSidebarWidth:s,sidebarWidth:a,prevSidebarWidth:o}},Pe=function(){var e=Object(I["b"])(),t=Object(n["F"])(e.state),c=t.blocktype,a=Object(n["F"])(e.state.pages),o=a.currentPageId,i=Object(Ie["a"])(),r=i.BlockFactory,s=function(t){var c=Object(n["c"])((function(){return e.getters["blocks/currentFocusBlock"]}));if(c.value){var a=Object(n["c"])((function(){return e.getters["blocks/getIndexByBlockId"](c.value.id)}));e.dispatch("blocks/addBlockAndSetFocusBlockId",{block:t,index:a.value+1})}else e.dispatch("blocks/addBlockAndSetFocusBlockId",{block:t,index:void 0})},l=function(){var t=Object(_["c"])();e.commit("pages/addPage",{id:t,name:"untitle",blocks:[],parentId:o.value,createdTime:(new Date).getTime().toString(),editTime:(new Date).getTime().toString(),tags:[],cover:""});var c=new r("page").addContent(t);e.dispatch("blocks/addBlock",{block:c})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"p";if(""!==o.value)if(c.value.find((function(t){return t.type===e})))if("page"!==e){var t=new r(e);s(t)}else l();else console.log("沒有此type類型");else console.log("請先選擇頁面")};return{checkBlockTypeThenAdd:d}},Ce={name:"Sidebar",components:{UserField:W,CustomList:X,Modal:ce,Search:ge,Splitter:Se},setup:function(){var e=Object(I["b"])(),t=Object(n["c"])((function(){return e.getters["pages/childrenPages"]("")})),c=Object(n["c"])((function(){return e.state.sidebarState.isCollapse})),a=Object(n["c"])((function(){return e.state.sidebarState.isFloating})),o=Object(n["c"])((function(){return e.state.blocktype})),i=Be(220,420),r=i.setSidebarWidth,s=i.setPrevSidebarWidth,l=i.sidebarWidth,d=Object(_["e"])(),u=d.isShow,b=d.handleShow,f=Pe(),O=f.checkBlockTypeThenAdd,v=function(e){return"fa".concat(e.charAt(0))},p=function(){return e.commit("pages/addPage")};return Object(n["q"])((function(){return b(!1)})),{rootPages:t,blocktype:o,addPage:p,checkBlockTypeThenAdd:O,transStyleToFAPrefix:v,isShow:u,handleShow:b,isSidebarCollapse:c,isSidebarFloating:a,sidebarWidth:l,setSidebarWidth:r,setPrevSidebarWidth:s}}};c("4387");Ce.render=S,Ce.__scopeId="data-v-64caf338";var Ae=Ce,Te=Object(n["O"])("data-v-511411a3");Object(n["v"])("data-v-511411a3");var Ee={class:"content"},De={class:"title"},Ne={key:0,class:"blockcontent"};Object(n["t"])();var xe=Te((function(e,t,c,a,o,i){var r=Object(n["A"])("BlockStyleEditor"),s=Object(n["A"])("Header"),l=Object(n["A"])("AreaSelect"),d=Object(n["A"])("PageEditable"),u=Object(n["A"])("PageInfo"),b=Object(n["A"])("Block"),f=Object(n["A"])("FrontPage");return Object(n["s"])(),Object(n["e"])(n["a"],null,[Object(n["i"])(r,{onHiddenStyleEditor:a.hiddenStyleEditor,"is-show":a.isShowBlockStyleEditor},null,8,["onHiddenStyleEditor","is-show"]),Object(n["i"])("main",{class:"mainspace",onMousemove:t[2]||(t[2]=function(e){return a.toggleFloatSidebar(e)})},[a.currentPage?(Object(n["s"])(),Object(n["e"])("div",{key:0,class:"workspace",onMousedown:t[1]||(t[1]=function(e){return a.clickActions(e)})},[Object(n["i"])(s,{currentPage:a.currentPage},null,8,["currentPage"]),Object(n["i"])("div",Ee,[Object(n["i"])(l,{"work-area":".content"},null,8,["work-area"]),Object(n["i"])("div",De,[Object(n["i"])(d,{page:a.currentPage,key:a.currentPage.id,placeholder:"請輸入標題",className:"title-input"},null,8,["page"])]),Object(n["i"])(u,{page:a.currentPage,key:a.currentPage.id+"info"},null,8,["page"]),a.currentBlocks?(Object(n["s"])(),Object(n["e"])("div",Ne,[(Object(n["s"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(a.currentBlocks,(function(e){return Object(n["L"])((Object(n["s"])(),Object(n["e"])(b,{key:e.id,block:e,"is-selected":a.isBlockSelected(e.id),"is-under-mouse-on-drag":a.currentIdUnderTheMouse===e.id&&!a.dragStartIds.includes(e.id),onShowBlockStyleEditor:function(t){return a.clickBlockStyleEditorIconAction(e)},onDrop:a.dropActions,onDragenter:a.cancelDefault,onDragover:a.handleBeforeDrop},null,8,["block","is-selected","is-under-mouse-on-drag","onShowBlockStyleEditor","onDrop","onDragenter","onDragover"])),[[n["I"],!a.hiddenBlocksIds.includes(e.id)]])})),128))])):Object(n["f"])("",!0)])],32)):(Object(n["s"])(),Object(n["e"])(f,{key:1}))],32)],64)})),_e=c("2909"),Fe=Object(n["O"])("data-v-13f33fb6");Object(n["v"])("data-v-13f33fb6");var Me={class:"header"},Le={key:0,class:"update-icon"},We={key:1,class:"update-icon"},Ue=Object(n["i"])("div",{class:"update-text"},"更新到數據庫",-1);Object(n["t"])();var He=Fe((function(e,t,c,a,o,i){var r=Object(n["A"])("Breadcrumb"),s=Object(n["A"])("font-awesome-icon");return Object(n["s"])(),Object(n["e"])("div",Me,[Object(n["i"])(r,{page:c.currentPage},null,8,["page"]),Object(n["i"])("div",{class:"update",type:"button",onClick:t[1]||(t[1]=function(){return a.updateToFS&&a.updateToFS.apply(a,arguments)})},[a.isFSUpdating?(Object(n["s"])(),Object(n["e"])("div",We,[Object(n["i"])(s,{icon:["fas","sync-alt"]})])):(Object(n["s"])(),Object(n["e"])("div",Le,[Object(n["i"])(s,{icon:["fas","database"]})])),Ue])])})),ze=c("1da1"),Ke=(c("96cf"),Object(n["O"])("data-v-da608e12"));Object(n["v"])("data-v-da608e12");var qe={"aria-label":"breadcrumb"},Re={class:"breadcrumb"};Object(n["t"])();var $e=Ke((function(e,t,c,a,o,i){var r=Object(n["A"])("BreadcrumbItem");return Object(n["s"])(),Object(n["e"])("nav",qe,[Object(n["i"])("ol",Re,[Object(n["i"])(r,{page:c.page},null,8,["page"])])])})),Je=Object(n["O"])("data-v-c8f24b30"),Xe=Je((function(e,t,c,a,o,i){var r=Object(n["A"])("BreadcrumbItem",!0),s=Object(n["A"])("font-awesome-icon");return Object(n["s"])(),Object(n["e"])(n["a"],null,[a.parentPage?(Object(n["s"])(),Object(n["e"])(n["a"],{key:0},[c.number<2?(Object(n["s"])(),Object(n["e"])(r,{key:0,page:a.parentPage,number:c.number+1},null,8,["page","number"])):Object(n["f"])("",!0)],64)):Object(n["f"])("",!0),Object(n["i"])("li",{class:{"breadcrumb-item":!0,effect:c.page!==a.currentPage},type:c.page!==a.currentPage?"button":"",onClick:t[1]||(t[1]=function(e){return a.goCurrentPage(c.page.id)})},[Object(n["i"])(s,{icon:["far","file"]}),Object(n["h"])("  "+Object(n["E"])(c.page.name),1)],10,["type"])],64)})),Ge={name:"BreadcrumbItem",props:{page:{type:Object},number:{type:Number,default:0}},setup:function(e){var t=Object(I["b"])(),c=Object(n["c"])((function(){return t.getters["pages/parentPage"](e.page)})),a=Object(n["c"])((function(){return t.getters["pages/currentPage"]})),o=Object($["a"])(),i=o.goCurrentPage;return{parentPage:c,currentPage:a,goCurrentPage:i}}};c("1283");Ge.render=Xe,Ge.__scopeId="data-v-c8f24b30";var Ve=Ge,Ye={name:"Breadcrumb",props:["page"],components:{BreadcrumbItem:Ve}};c("9346");Ye.render=$e,Ye.__scopeId="data-v-da608e12";var Qe=Ye,Ze=c("475e"),et={name:"Header",components:{Breadcrumb:Qe},props:["currentPage"],setup:function(){var e=Object(n["x"])(!1),t=function(t){e.value=t},c=function(){var e=Object(ze["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,Object(Ze["c"])();case 4:t(!1),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.log(e.t0),t(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return{isFSUpdating:e,updateToFS:c}}};c("fcae");et.render=He,et.__scopeId="data-v-13f33fb6";var tt=et,ct=Object(n["O"])("data-v-2128f502");Object(n["v"])("data-v-2128f502");var nt={class:"block-tools"};Object(n["t"])();var at=ct((function(e,t,c,a,o,i){var r=Object(n["A"])("font-awesome-icon"),s=Object(n["A"])("DragItem");return Object(n["s"])(),Object(n["e"])("div",{class:["block",a.getClassNameOfBlockType(c.block.type)],"data-block-id":c.block.id,onMouseenter:t[5]||(t[5]=function(e){return a.handleShow(!0)}),onMouseleave:t[6]||(t[6]=function(e){return a.handleShow(!1)}),style:{"margin-left":"".concat(1.65*a.getLevelOfBlock(c.block),"rem"),"border-bottom":c.isUnderMouseOnDrag?".3rem solid rgb(134, 193, 241)":"none"}},[Object(n["i"])("div",nt,[Object(n["i"])(n["b"],{name:"drag"},{default:ct((function(){return[Object(n["L"])(Object(n["i"])("div",{class:"block-tool",type:"button",onClick:t[1]||(t[1]=function(t){return e.$emit("showBlockStyleEditor",!0)})},[Object(n["i"])(r,{icon:["fas","adjust"],size:"xs"})],512),[[n["I"],a.isShow]])]})),_:1}),Object(n["i"])(n["b"],{name:"drag"},{default:ct((function(){return[Object(n["L"])(Object(n["i"])(s,{block:c.block},null,8,["block"]),[[n["I"],a.isShow]])]})),_:1})]),Object(n["i"])("div",{style:{width:"100%"},class:c.block.className},[Object(n["i"])("div",{class:["block-content",{"block-selected":c.isSelected}],onDrop:t[2]||(t[2]=function(t){return e.$emit("drop",t)}),onDragenter:t[3]||(t[3]=function(t){return e.$emit("dragenter",t)}),onDragover:t[4]||(t[4]=function(t){return e.$emit("dragover",t)})},[(Object(n["s"])(),Object(n["e"])(Object(n["B"])(a.getFirstToUpper(c.block.type)),{block:c.block},null,8,["block"]))],34)],2)],46,["data-block-id"])})),ot=Object(n["O"])("data-v-7065c0a5"),it=ot((function(e,t,c,a,o,i){var r=Object(n["A"])("font-awesome-icon");return Object(n["s"])(),Object(n["e"])("div",{class:"block-tool",draggable:"true",onDragstart:t[1]||(t[1]=function(e){return a.handleDrag(e)})},[Object(n["i"])(r,{icon:["fas","expand-arrows-alt"],size:"xs"})],32)})),rt=function(e){var t=Object(I["b"])(),c=Object(n["c"])((function(){return t.state.blocks.selectedBlocksIds})),a=function(n){if(c.value.includes(e.id))t.commit("setDragStartIds",Object(_e["a"])(c.value));else{var a=document.querySelector('[data-block-id="'.concat(e.id,'"]'));n.dataTransfer.setDragImage(a,-10,10),t.commit("setDragStartIds",[e.id])}};return{handleDrag:a}},st={name:"DragItem",props:["block"],setup:function(e){var t=rt(e.block),c=t.handleDrag;return{handleDrag:c}}};c("a127");st.render=it,st.__scopeId="data-v-7065c0a5";var lt=st,dt={name:"Block",props:["block","isSelected","isUnderMouseOnDrag"],components:{DragItem:lt},setup:function(){var e=Object(I["b"])(),t=Object(_["e"])(),c=t.isShow,a=t.handleShow,o=Object(Ie["a"])(),i=o.getLevelOfBlock,r=Object(_["b"])(),s=r.getFirstToUpper,l=function(t){return Object(n["c"])((function(){return e.getters.getClassNameOfBlockType(t)})).value};return{isShow:c,handleShow:a,getFirstToUpper:s,getLevelOfBlock:i,getClassNameOfBlockType:l}}};c("a3c1");dt.render=at,dt.__scopeId="data-v-2128f502";var ut=dt,bt=Object(n["O"])("data-v-e56945ea"),ft=bt((function(e,t,c,a,o,i){return Object(n["s"])(),Object(n["e"])("div",{id:"area-select",style:{left:"".concat(a.selector.left,"px"),top:"".concat(a.selector.top,"px"),width:"".concat(a.selector.width,"px"),height:"".concat(a.selector.height,"px")}},null,4)})),Ot=(c("159b"),c("a434"),function(e,t){var c=Object(n["x"])(!1),a=Object(n["w"])([]),o=Object(n["w"])({left:0,top:0,width:0,height:0}),i={x1:0,y1:0,x2:0,y2:0},r=function(e,t,c,n){o.left=e,o.top=t,o.width=c,o.height=n},s=function(e){if(!0!==c.value&&e.target.closest(".workspace"))if(e.target.closest(".block")||e.target.hasAttribute("contenteditable")){if(e.target.closest(".block-tools"))return;a.length=0}else c.value=!0,i.x1=e.clientX,i.y1=e.clientY,a.length=0},l=function(n){if(!1!==c.value){n.preventDefault(),n.stopPropagation(),document.activeElement.blur(),i.x2=n.clientX,i.y2=n.clientY;var o=Math.min(i.x1,i.x2),s=Math.min(i.y1,i.y2),l=Math.abs(i.x2-i.x1),d=Math.abs(i.y2-i.y1);r(o,s,l,d);var u={left:o,top:s,right:o+l,bottom:s+d};e.value&&e.value.forEach((function(e){var c=document.querySelector('[data-block-id="'.concat(e,'"]')),n=c.getBoundingClientRect();if(t(u,n)){if(a.includes(e))return;a.push(e)}else{if(!a.includes(e))return;var o=a.indexOf(e);a.splice(o,1)}}))}},d=function(){c.value=!1,r(0,0,0,0)};return{mouseDown:s,mouseUp:d,mouseMove:l,selector:o,currentSelectedIds:a,isAreaSelectActive:c}}),vt=Ot,pt={name:"AreaSelect",props:["ids","workArea"],setup:function(){var e=Object(I["b"])(),t=Object(_["a"])(),c=t.isBoxACollisionB,a=Object(n["c"])((function(){return e.getters["blocks/currentBlocksIds"]})),o=Object(n["c"])((function(){return e.state.blocks.selectedBlocksIds})),i=vt(a,c),r=i.mouseDown,s=i.mouseUp,l=i.mouseMove,d=i.selector,u=i.currentSelectedIds,b=i.isAreaSelectActive;return Object(n["J"])((function(){return u}),(function(t){e.commit("blocks/setSelectedBlocksIds",Object(_e["a"])(t))}),{deep:!0}),Object(n["J"])(b,(function(t){e.commit("setIframeActive",!t)})),document.addEventListener("mousedown",r),document.addEventListener("mouseup",s),document.addEventListener("mousemove",l),{selector:d,currentSelectedIds:u,selectedBlocksIds:o}}};c("5841");pt.render=ft,pt.__scopeId="data-v-e56945ea";var jt=pt;function gt(e,t,c,a,o,i){var r=Object(n["A"])("ContentEditable");return Object(n["s"])(),Object(n["e"])(r,{placeholder:c.placeholder,className:c.className,id:c.noId?"":c.page.id,value:c.page.name,onInput:Object(n["N"])(a.inputToPageContent,["stop"]),onKeydown:Object(n["N"])(a.keydownAction,["stop"]),onFocus:t[1]||(t[1]=function(e){return a.setFocusBlock("")})},null,8,["placeholder","className","id","value","onInput","onKeydown"])}var mt=c("f225"),kt={components:{ContentEditable:mt["a"]},name:"PageEditable",props:["page","placeholder","className","noId"],setup:function(e){var t=Object($["a"])(),c=t.editPageData,n=t.checkKeydownInPageData,a=t.setFocusBlock,o=function(e){c("name",e.target.innerText)},i=function(t){n(e.page,t)};return{inputToPageContent:o,keydownAction:i,setFocusBlock:a}}};kt.render=gt;var ht=kt,yt=Object(n["O"])("data-v-422e5e5c");Object(n["v"])("data-v-422e5e5c");var St={key:0,class:"pageinfo"},It={class:"pageinfo-item"},wt={class:"pageinfo-item-name"},Bt={class:"pageinfo-item-icon"},Pt=Object(n["h"])(" 創建於"),Ct={class:"pageinfo-item-content"},At={class:"pageinfo-item"},Tt={class:"pageinfo-item-name"},Et={class:"pageinfo-item-icon"},Dt=Object(n["h"])(" 上次編輯"),Nt={class:"pageinfo-item-content"},xt={class:"pageinfo-item",id:"tagsfield"},_t={class:"pageinfo-item-icon"},Ft=Object(n["i"])("span",null,"標籤",-1),Mt=Object(n["i"])("div",{class:"ms-2"},"+",-1),Lt={class:"tag-content"},Wt=Object(n["i"])("div",{class:"tag-content-delete"},"X",-1),Ut={key:1,style:{color:"#777"}},Ht={type:"text",placeholder:"輸入標籤名稱後按下Enter鍵創建",id:"tagNameInput"};Object(n["t"])();var zt=yt((function(e,t,c,a,o,i){var r=Object(n["A"])("font-awesome-icon");return c.page?(Object(n["s"])(),Object(n["e"])("div",St,[Object(n["i"])("div",It,[Object(n["i"])("div",wt,[Object(n["i"])("div",Bt,[Object(n["i"])(r,{icon:["fas","clock"]})]),Pt]),Object(n["i"])("div",Ct,Object(n["E"])(a.createdTime||"顯示出錯"),1)]),Object(n["i"])("div",At,[Object(n["i"])("div",Tt,[Object(n["i"])("div",Et,[Object(n["i"])(r,{icon:["far","clock"]})]),Dt]),Object(n["i"])("div",Nt,Object(n["E"])(a.editTime||"顯示出錯"),1)]),Object(n["i"])("div",xt,[Object(n["i"])("div",{class:"pageinfo-item-name addtag",type:"button",onClick:t[1]||(t[1]=function(){return a.showTagNameInput&&a.showTagNameInput.apply(a,arguments)})},[Object(n["i"])("div",_t,[Object(n["i"])(r,{icon:["fas","tags"]})]),Ft,Mt]),Object(n["i"])("div",{class:"pageinfo-item-content",onKeydown:t[2]||(t[2]=Object(n["N"])((function(e){return a.handleKeyDownIntagInput(e)}),["stop"]))},[0!==c.page.tags.length?(Object(n["s"])(!0),Object(n["e"])(n["a"],{key:0},Object(n["y"])(c.page.tags,(function(e){return Object(n["s"])(),Object(n["e"])("div",{class:"tag",type:"button",style:{"background-color":"".concat(e.color)},key:c.page.id+e,onClick:function(t){return a.deleteTag(t,e)}},[Object(n["i"])("div",Lt,[Object(n["h"])(Object(n["E"])(e.name)+" ",1),Wt])],12,["onClick"])})),128)):(Object(n["s"])(),Object(n["e"])("div",Ut," None ")),Object(n["L"])(Object(n["i"])("input",Ht,null,512),[[n["I"],a.isShow]])],32)])])):Object(n["f"])("",!0)})),Kt=function(){var e=Object(I["b"])(),t=Object(_["e"])(),c=t.isShow,a=t.handleShow,o=function(t){13===t.keyCode&&(e.dispatch("pages/addTag",t.target.value),t.target.value=""),8===t.keyCode&&""===t.target.value&&a(!1)},i=function(){Object(n["n"])((function(){document.getElementById("tagNameInput").focus()}))},r=function(){a(!0),i()},s=function(t,c){e.dispatch("pages/deleteTag",c),i()},l=function(e){c.value&&(e.target.closest("#tagsfield")||e.target.closest(".tag")||a(!1))};return{isShow:c,handleKeyDownIntagInput:o,showTagNameInput:r,hiddenTagNameInputByClick:l,deleteTag:s}},qt={name:"PageInfo",props:["page"],setup:function(e){var t=Object(n["c"])((function(){return Object(_["g"])(e.page.createdTime)})),c=Object(n["c"])((function(){return Object(_["g"])(e.page.editTime)})),a=Kt(),o=a.isShow,i=a.handleKeyDownIntagInput,r=a.showTagNameInput,s=a.hiddenTagNameInputByClick,l=a.deleteTag;return document.addEventListener("click",(function(e){return s(e)})),{createdTime:t,editTime:c,handleKeyDownIntagInput:i,isShow:o,showTagNameInput:r,hiddenTagNameInputByClick:s,deleteTag:l}}};c("901c");qt.render=zt,qt.__scopeId="data-v-422e5e5c";var Rt=qt,$t=Object(n["O"])("data-v-16bab8ca");Object(n["v"])("data-v-16bab8ca");var Jt=Object(n["i"])("div",{class:"style-editor-title"},"挑選顏色 :",-1),Xt={class:"style-editor-content d-flex flex-wrap"},Gt=Object(n["i"])("div",{class:"style-editor-title"},"區塊樣式 :",-1),Vt={class:"style-editor-content"},Yt={class:"style-name"};Object(n["t"])();var Qt=$t((function(e,t,c,a,o,i){return Object(n["s"])(),Object(n["e"])("div",{class:"block-style-editor",style:{width:"".concat(a.currentSidebarWidth,"px"),left:c.isShow?"0":"".concat(-a.currentSidebarWidth||-600,"px")}},[Jt,Object(n["i"])("div",Xt,[(Object(n["s"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(a.colors,(function(e){return Object(n["s"])(),Object(n["e"])("div",{type:"button",key:e.code,onClick:function(t){return a.setBlockColor(e.name)},class:{"color-item":!0,"color-item-active":a.blockDress.color===e.name}},[Object(n["i"])("div",{type:"button",class:"color-item-circle",style:{"background-color":"#".concat(e.code)}},null,4)],10,["onClick"])})),128))]),Gt,Object(n["i"])("div",Vt,[(Object(n["s"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(a.styles,(function(e){return Object(n["s"])(),Object(n["e"])("div",{class:{"style-item":!0,"style-item-active":a.blockDress.style===e.className},type:"button",key:e.name,onClick:function(t){return a.setBlockStyle(e.className)}},[Object(n["i"])("div",Yt,Object(n["E"])(e.name),1),Object(n["i"])("div",{class:[e.className,"my-2"]},"text",2)],10,["onClick"])})),128))]),Object(n["i"])("div",{class:"style-check",type:"button",onClick:t[1]||(t[1]=function(){return a.checkAction&&a.checkAction.apply(a,arguments)})},"確認修改")],4)})),Zt=[{name:"default",code:"584d58"},{name:"orange",code:"eea14a"},{name:"red",code:"d13939"},{name:"blue",code:"2a7eec"},{name:"yellow",code:"e0b833"},{name:"green",code:"39d15f"},{name:"purple",code:"9228e9"},{name:"gray",code:"c4c4c4"},{name:"pink",code:"db2571"}],ec=[{name:"字體填色",className:"style-text-color"},{name:"背景填色",className:"style-bg-color"},{name:"外框填色",className:"style-border"}],tc={name:"BlockStyleEditor",props:["isShow"],emits:["hiddenStyleEditor"],setup:function(e,t){var c=t.emit,a=Object(I["b"])(),o=Object(n["c"])((function(){return a.state.sidebarState.currentWidth})),i=Object(n["c"])((function(){return a.getters["blocks/selectedBlocks"]})),r=function(e,t){a.commit("blocks/editBlockData",{id:e.id,key:"className",value:t})},s=Object(n["w"])({style:"",color:""}),l=function(e){s.color=e},d=function(e){s.style=e},u=function(e){if(""===e)return s.style="",void(s.color="");var t=e.split("__")[0],c=e.split("__")[1];s.style=t,s.color=c};Object(n["J"])((function(){return e.isShow}),(function(e,t){if(!0!==t&&!1!==e)if(1!==i.value.length){var c=i.value[0].className;i.value.every((function(e){return e.className===c}))?u(c):u("")}else{var n=i.value[0];u(n.className)}})),Object(n["J"])((function(){return s}),(function(e){""===s.style&&""===s.color||(""===s.color||""!==s.style?""===s.style||""!==s.color?i.value.forEach((function(t){r(t,"".concat(e.style,"__").concat(e.color))})):l(Zt[0].name):d(ec[0].className))}),{deep:!0});var b=function(){c("hiddenStyleEditor")};return{colors:Zt,styles:ec,setBlockColor:l,setBlockStyle:d,blockDress:s,checkAction:b,currentSidebarWidth:o}}};c("70a5");tc.render=Qt,tc.__scopeId="data-v-16bab8ca";var cc=tc,nc=Object(n["O"])("data-v-e8fdf93c");Object(n["v"])("data-v-e8fdf93c");var ac={class:"base"},oc=Object(n["g"])('<div class="base-container" data-v-e8fdf93c><div class="base-title" data-v-e8fdf93c><div class="base-title-first" data-v-e8fdf93c>N</div></div><div class="base-small" data-v-e8fdf93c>區塊構成的世界...</div><div class="base-intro" data-v-e8fdf93c><div class="base-intro-quote" data-v-e8fdf93c>Note是一個筆記軟體</div><br data-v-e8fdf93c><br data-v-e8fdf93c><div class="base-intro-text" data-v-e8fdf93c><p data-v-e8fdf93c>使用不同的區塊工具</p><p data-v-e8fdf93c>來記錄<span data-v-e8fdf93c>文字</span>、影片、圖像等載體...</p><p data-v-e8fdf93c></p><p data-v-e8fdf93c></p><br data-v-e8fdf93c><p data-v-e8fdf93c>也能夠創建頁面</p><p data-v-e8fdf93c>來為多個不同區塊分類</p><br data-v-e8fdf93c><br data-v-e8fdf93c></div></div></div>',1);Object(n["t"])();var ic=nc((function(e,t,c,a,o,i){return Object(n["s"])(),Object(n["e"])("div",ac,[oc])})),rc={name:"FrontPage"};c("ac5f");rc.render=ic,rc.__scopeId="data-v-e8fdf93c";var sc=rc,lc=c("88b4"),dc=c.n(lc),uc=function(){var e=Object(I["b"])(),t=new dc.a,c=function(){e.watch((function(e){return e.pages.pages}),(function(e){t.set("pages",e)}),{deep:!0})},n=function(){e.watch((function(e){return e.blocks.blocks}),(function(e){t.set("blocks",e)}),{deep:!0})},a=function(){var t=function(t,c){var n;if(c.pages.currentPageId){var a="blocks/editBlockData"===t.type,o="pages/editPageData"===t.type&&"editTime"!==(null===(n=t.payload)||void 0===n?void 0:n.key);(a||o)&&e.commit("pages/editPageData",{key:"editTime",value:(new Date).getTime().toString()})}},c=function(t,c){if(!1===c.sidebarState.isCollapse&&!0===c.sidebarState.isFloating)for(var n=["pages/deletePage","pages/setCurrentPageId","blocks/addBlock"],a=0;a<n.length;a+=1)if(t.type===n[a])return void e.commit("setSidebarCollapse",!0)},n=function(e,t){"setStoreData"===e.type&&t()},a=function(t){"pages/setCurrentPageId"===t.type&&e.commit("userInfo/addIdToRecentPageIds",t.payload),"pages/deletePage"===t.type&&e.commit("userInfo/deleteIdFromRecentPageIds",t.payload)};e.subscribe((function(o,i){t(o,i),c(o,i),n(o,(function(){window.innerWidth>992&&e.commit("setSidebarCollapse",!1)})),a(o)}))};return{updatePagesToLSByWatching:c,updateBlocksToLSByWatching:n,storeObserver:a}},bc=uc,fc=(c("4de4"),function(e,t,c){var a=Object(n["w"])({value:[]}),o=Object(n["x"])(""),i=function(e){e.preventDefault(),e.stopPropagation()},r=function(e){i(e),o.value=t(e)},s=function(n,r){i(n),o.value="";var s=c(n),l=t(n);if(!s.includes(l)){var d=e.value.filter((function(e){return!s.includes(e)})),u=d.indexOf(l);Array.prototype.splice.apply(d,[u+1,0].concat(Object(_e["a"])(s))),a.value=d,r()}};return{ids:a,currentIdUnderTheMouse:o,cancelDefault:i,handleDrop:s,handleBeforeDrop:r}}),Oc=fc,vc=function(){var e=Object(I["b"])(),t=Object(n["c"])((function(){return e.state.blocks.selectedBlocksIds})),c=function(){var e;return!(null===(e=t.value)||void 0===e||!e.length)},a=Object($["a"])(),o=a.pasteBlocksAction,i=a.setClipboardBlocks,r=a.setSelectedBlocksInClipboardBlocks,s=a.deleteSelectedBlocks,l=a.duplicateBlocksFromSelectedBlocks,d=function(e){t.value.length&&o(e)},u=function(e){var t=function(e){return navigator.clipboard.writeText(e)};e.ctrlKey&&"c"===e.key&&(c()?(t(""),e.preventDefault(),r(),document.activeElement.blur()):i([])),!c()||"Backspace"!==e.key&&"Delete"!==e.key||(e.preventDefault(),s(e),document.activeElement.blur()),c()&&e.ctrlKey&&"d"===e.key&&(e.preventDefault(),l(),document.activeElement.blur())},b=function(){window.addEventListener("keydown",u),window.addEventListener("paste",d)};return{executeKeydownListeningWithBlocks:b}},pc=function(){var e=Object(I["b"])(),t=Object(n["c"])((function(){return e.state.dragStartIds})),c=Object(n["c"])((function(){return e.getters["blocks/currentBlocksIds"]})),a=Oc(c,(function(e){return e.target.closest(".block").dataset.blockId}),(function(){return t.value})),o=a.ids,i=a.currentIdUnderTheMouse,r=a.cancelDefault,s=a.handleDrop,l=a.handleBeforeDrop,d=function(t){s(t,(function(){e.commit("setDragStartIds",[])}))};return Object(n["J"])((function(){return o.value}),(function(t){e.commit("pages/editPageData",{key:"blocks",value:Object(_e["a"])(t)})}),{deep:!0}),Object(n["J"])(i,(function(t){e.commit("setIframeActive",""===t)})),{cancelDefault:r,handleBeforeDrop:l,dropActions:d,dragStartIds:t,currentIdUnderTheMouse:i}},jc=function(e){var t=Object(I["b"])(),c=Object(n["c"])((function(){return t.getters["blocks/currentBlocks"]})),a=Object(he["a"])(),o=a.isMouseUnderTheElement,i=function(e){var n=c.value[c.value.length-1];if(!n)return e.preventDefault(),void t.dispatch("blocks/addBlockAndSetFocusBlockId",{});var a=document.querySelector('[data-block-id="'.concat(n.id,'"]'));if(o(a,e)){e.preventDefault();var i=a.querySelector("[contenteditable]");if(!i)return void t.dispatch("blocks/addBlockAndSetFocusBlockId",{});if(""===n.content.text)return void i.focus();t.dispatch("blocks/addBlockAndSetFocusBlockId",{})}},r=function(c){var n=c.target;n.closest(".workspace")&&(n.closest(".blockcontent")?i(c):(t.commit("blocks/setFocusBlockById",""),t.commit("blocks/setSelectedBlocksIds",[]),e()))};return{clickActions:r}},gc=function(){var e=Object(I["b"])(),t=Object(n["c"])((function(){return e.state.blocks.selectedBlocksIds})),c=Object(n["x"])(!1),a=function(n){c.value=!0,0!==t.value.length?t.value.find((function(e){return e===n.id}))||(e.commit("blocks/setSelectedBlocksIds",[]),e.commit("blocks/addIdToSelectedBlocksIds",n.id)):e.commit("blocks/addIdToSelectedBlocksIds",n.id)},o=function(){c.value=!1};return{isShowBlockStyleEditor:c,clickBlockStyleEditorIconAction:a,hiddenStyleEditor:o}},mc={name:"Workspace",components:{Header:tt,Block:ut,AreaSelect:jt,PageEditable:ht,PageInfo:Rt,BlockStyleEditor:cc,FrontPage:sc},setup:function(){var e=Object(I["b"])(),t=bc(),c=t.updatePagesToLSByWatching,a=t.updateBlocksToLSByWatching,o=t.storeObserver;c(),a(),o();var i=vc(),r=i.executeKeydownListeningWithBlocks;r();var s=pc(),l=s.cancelDefault,d=s.handleBeforeDrop,u=s.dropActions,b=s.dragStartIds,f=s.currentIdUnderTheMouse,O=Object(n["c"])((function(){return e.getters["pages/currentPage"]})),v=Object(n["c"])((function(){return e.getters["blocks/currentBlocks"]})),p=Object(n["c"])((function(){return e.getters["blocks/currentFocusBlock"]})),j=Object(n["c"])((function(){return e.state.sidebarState.isFloating})),g=Object(n["c"])((function(){return e.state.blocks.selectedBlocksIds})),m=Object(n["c"])((function(){return e.state.blocks.clipboardBlocks})),k=Object(n["c"])((function(){return e.getters["blocks/getClipboardBlocksIds"]})),h=function(t){return Object(n["c"])((function(){return e.getters["blocks/isBlockSelected"](t)})).value},y=Object(n["F"])(e.state.blocks),S=y.currentFocusBlockId,w=y.hiddenBlocksIds,B=gc(),P=B.isShowBlockStyleEditor,C=B.clickBlockStyleEditorIconAction,A=B.hiddenStyleEditor,T=jc(A),E=T.clickActions,D=function(t){!1!==j.value&&(t.clientX<45?e.commit("setSidebarCollapse",!1):e.commit("setSidebarCollapse",!0))},N=function(){return window.innerWidth>992},x=function(){N()&&e.dispatch("lockSidebar")};return Object(n["q"])((function(){window.addEventListener("resize",(function(){N()||!1!==j.value||e.dispatch("floatSidebar")})),x(),Object(n["J"])(S,(function(e,t){Object(n["n"])((function(){if(e){var c=function(e){return e.querySelector("[contenteditable]")},n=function(e){var t=document.querySelector('[data-block-id="'.concat(e,'"]'));return t&&c(t)?c(t):null},a=function(e){var t=window.getSelection();t.selectAllChildren(e),t.collapseToEnd()},o=n(e),i=n(t);o&&(o.focus(),a(o),i&&(i.placeholder=""))}}))}))})),{clickActions:E,currentPage:O,currentBlocks:v,currentFocusBlockId:S,currentFocusBlock:p,selectedBlocksIds:g,hiddenBlocksIds:w,toggleFloatSidebar:D,isShowBlockStyleEditor:P,clickBlockStyleEditorIconAction:C,hiddenStyleEditor:A,isBlockSelected:h,cancelDefault:l,dropActions:u,handleBeforeDrop:d,currentIdUnderTheMouse:f,dragStartIds:b,clipboardBlocks:m,clipboardBlocksIds:k}}};c("f540");mc.render=xe,mc.__scopeId="data-v-511411a3";var kc=mc,hc={name:"Home",components:{Sidebar:Ae,Workspace:kc}};c("73af");hc.render=i,hc.__scopeId="data-v-242ecd16";t["default"]=hc},bb6c:function(e,t,c){},bded:function(e,t,c){"use strict";c("0eaa")},be2a:function(e,t,c){},d4cd:function(e,t,c){},f17d:function(e,t,c){},f540:function(e,t,c){"use strict";c("6e69")},f57f:function(e,t,c){"use strict";c("2f1a")},fcae:function(e,t,c){"use strict";c("be2a")},fdfe:function(e,t,c){"use strict";c("d4cd")}}]);
//# sourceMappingURL=chunk-55c84c12.9e1bce81.js.map