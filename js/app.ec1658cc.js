(function(e){function t(t){for(var c,o,i=t[0],l=t[1],u=t[2],s=0,d=[];s<i.length;s++)o=i[s],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(e[c]=l[c]);f&&f(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],c=!0,o=1;o<n.length;o++){var i=n[o];0!==r[i]&&(c=!1)}c&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var c={},o={app:0},r={app:0},a=[];function i(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-006a47c7":"87cc9967","chunk-1fc39ff8":"abf38cb5","chunk-43663db4":"9a1a4161","chunk-55c84c12":"9e1bce81"}[e]+".js"}function l(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-006a47c7":1,"chunk-1fc39ff8":1,"chunk-43663db4":1,"chunk-55c84c12":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var c="css/"+({}[e]||e)+"."+{"chunk-006a47c7":"c475e492","chunk-1fc39ff8":"045c8dda","chunk-43663db4":"705ce97d","chunk-55c84c12":"a206c848"}[e]+".css",r=l.p+c,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var u=a[i],s=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(s===c||s===r))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],s=u.getAttribute("data-href");if(s===c||s===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var c=t&&t.target&&t.target.src||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=c,delete o[e],f.parentNode.removeChild(f),n(a)},f.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[e]=0})));var c=r[e];if(0!==c)if(c)t.push(c[2]);else{var a=new Promise((function(t,n){c=r[e]=[t,n]}));t.push(c[2]=a);var u,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=i(e);var d=new Error;u=function(t){s.onerror=s.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var c=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+c+": "+o+")",d.name="ChunkLoadError",d.type=c,d.request=o,n[1](d)}r[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:s})}),12e4);s.onerror=s.onload=u,document.head.appendChild(s)}return Promise.all(t)},l.m=e,l.c=c,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)l.d(n,c,function(t){return e[t]}.bind(null,c));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/note/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"05fe":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var c=n("260b"),o=(n("e71f"),n("ea7b"),{apiKey:"AIzaSyDonVssAookt2duygiVRQW24dFRQuKTkJU",authDomain:"note-38484.firebaseapp.com",projectId:"note-38484",storageBucket:"note-38484.appspot.com",messagingSenderId:"929018557393",appId:"1:929018557393:web:16cc3fb617ecedc93826f0",measurementId:"G-4GXGJN5W2F"});c["a"].initializeApp(o);var r=c["a"].firestore(),a=c["a"].auth(),i=c["a"].firestore;i.TimeStamp,i.GeoPoint;r.settings({timestampsInSnapshots:!0})},"07f7":function(e,t,n){},"113a":function(e,t,n){},"13bf":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return i}));var c=n("1da1"),o=(n("2909"),n("96cf"),n("d3b7"),n("25f0"),n("ac1f"),n("1276"),n("caad"),n("2532"),n("a434"),n("fb6a"),n("7a23")),r=function(){return Math.random().toString(36).substr(2,14)+Date.now().toString(36).substr(4,14)},a=function(){for(var e="BCDEF".split(""),t="#",n=0;n<6;n+=1)t+=e[Math.floor(Math.random()*e.length)];return t},i=function(){var e=r();return function(t){var n=parseInt(t,36)+parseInt(e,36),c=n.toString(36);return c.length<15?"".concat(c,"6"):c.length>15?c.slice(0,15):c}},l=function(){var e=function(e){return e[0].toUpperCase()+e.slice(1)};return{getFirstToUpper:e}},u=function(){var e=function(e,t){return e.right>t.left&&e.left<t.right&&e.top<t.bottom&&e.bottom>t.top};return{isBoxACollisionB:e}},s=function(){var e=Object(o["x"])(!1),t=function(t){e.value=t},n=function(){e.value=!e.value};return{isShow:e,handleShow:t,toggleShow:n}},d=function(e){var t=e;return"string"===typeof e&&(t=parseInt(e,10)),new Date(t).toLocaleString().slice(0,-3)},f=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){n(),e()}),1e3*t)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},"14d3":function(e,t,n){"use strict";n("3444")},"17d3":function(e,t,n){"use strict";n("b9b6")},2179:function(e,t,n){},"30bc":function(e,t,n){"use strict";n("6b6a")},3444:function(e,t,n){},3709:function(e,t,n){},"407b":function(e,t,n){"use strict";var c={page:{cover:"",name:"Note ",createdTime:"1630687828342",id:"uba9uqkk2hhfh4m",tags:[{color:"#BFEBFE",name:"note"}],parentId:"",blocks:["dk75vhqipqis558","9w1lg6e7w8v6wsz","3iqx0vh6ap3794r","fhj7t6ckg5j1n1g","jmsrbxrhhmxnyw","4109or7kftym0w7","u4sljmzfw0o69jq","5huu2lqe4quhvbb","bg415c0t7autn0k","3prrrwphj7otqml","yfr1xh4mtfquemc","5nqu6bv43mruiph","km1vjfl7r4upp9","752nh83f12euubg","7wsp7qnhifwvgxh","rqqp7hlyfreyfuj","pa5km4g2zjzbzm","uhvuoju70er0waj","l03j48338zn1j1n","kqj8ek8jph82137","ywssaqsldz2g8b","83w8xq8b822kei","bf3fq1juqd96fka","6bvv9bf4vf56gyh","0xd21yzjcr7zi4r","94s76m9vrpi0mxv","rolwh0wa2k0o83","zxcjhb8i2k4e6i","qv1alsaphsc4lne","un7cpjleudaeu8","yql3atld6wiwu5","ameiyp6qntwi4p3","qd8fvpxnrveblfn","bxohjj3gt2c619x","gronzht7jrja1fd","wjmgset6w6h5f4","sralaqrt1zeii3y","apcudm5mskuk93s","iu8m7k4ca2ao75b","lvrl4irw23oiri","vt5ca2owpqbepe","a0g37lp49iebohl","pie9npuhsccna9","xirwbktp98rw9p","7vi9tcnt0ovs3hx","8b4l84jxl6jv4jv","ff77g71bybvpur","q58gjuch6fdw8er","gnqa4830deu4bwq","4jyvq3zqohr65d5","pqwq48p6d69hl","pi756lq8l69pt","gjuzhaevak69uy","gpzw3je85x46a02","sfb0jwfxhtc6a4y","4p6s13i710c6aa2","5qv6c1s026c6afe","hvycs1fo0nf6aky","zkpv72dinwc6aqa","xiuck8vc7tc6avu","rax7q8qawqf6b1e","upba9dfscmi6b6q","dwyxkti2af6bde"],editTime:"1630934644625"},blocks:[{type:"h2",id:"dk75vhqipqis558",parentId:"",content:{html:"專案介紹",text:"專案介紹"},className:"style-text-color__default"},{type:"quote",id:"9w1lg6e7w8v6wsz",parentId:"",content:{text:"Note是一個筆記軟體",html:"Note是一個筆記軟體"},className:"style-text-color__default"},{type:"p",id:"3iqx0vh6ap3794r",parentId:"",content:{text:"主要功能參考至筆記軟體notion，目前為Beta測試版，後續會增加更多實用功能",html:"主要功能參考至筆記軟體notion，目前為Beta測試版，後續會增加更多實用功能"},className:"style-text-color__default"},{type:"p",id:"fhj7t6ckg5j1n1g",parentId:"",content:{text:"",html:""},className:"style-text-color__default"},{type:"p",id:"jmsrbxrhhmxnyw",parentId:"",content:{text:"主要開發都是在web上，因此最好使用電腦來操作此網頁，若是使用手機來操作，可能尚有許多問題",html:"主要開發都是在web上，因此最好使用電腦來操作此網頁，若是使用手機來操作，可能尚有許多問題"},className:"style-text-color__default"},{type:"p",id:"4109or7kftym0w7",parentId:"",content:{text:"",html:""},className:"style-text-color__default"},{type:"h2",id:"u4sljmzfw0o69jq",parentId:"",content:{html:"涉及知識點",text:"涉及知識點"},className:"style-text-color__default"},{type:"dividingLine",id:"5huu2lqe4quhvbb",parentId:"",content:"",className:"style-text-color__default"},{type:"bulletItem",id:"bg415c0t7autn0k",parentId:"",content:{text:"vue 3",html:"vue 3",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"3prrrwphj7otqml",parentId:"",content:{text:"composition api",html:"composition api",indent:1},className:"style-text-color__red"},{type:"bulletItem",id:"yfr1xh4mtfquemc",parentId:"",content:{text:"遞迴組件(樹狀結構)",html:"遞迴組件(樹狀結構)",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"5nqu6bv43mruiph",parentId:"",content:{text:"vuex 4",html:"vuex 4",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"km1vjfl7r4upp9",parentId:"",content:{text:"使用modules管理不同的數據",html:"使用modules管理不同的數據",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"752nh83f12euubg",parentId:"",content:{text:"store.watch監聽state變化順便更新到資料庫",html:"store.watch監聽state變化順便更新到資料庫",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"7wsp7qnhifwvgxh",parentId:"",content:{text:"store.subscribe監聽mutation的更新",html:"store.subscribe監聽mutation的更新",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"rqqp7hlyfreyfuj",parentId:"",content:{text:"vue router 4",html:"vue router 4",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"pa5km4g2zjzbzm",parentId:"",content:{text:"路由導航",html:"路由導航",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"uhvuoju70er0waj",parentId:"",content:{text:"套件",html:"套件",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"l03j48338zn1j1n",parentId:"",content:{text:"secure LS (localstorage加密)",html:"secure LS (localstorage加密)",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"kqj8ek8jph82137",parentId:"",content:{text:"prismjs (程式碼高亮顯示)",html:"prismjs (程式碼高亮顯示)",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"ywssaqsldz2g8b",parentId:"",content:{text:"bootstrap 5.0",html:"bootstrap 5.0",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"83w8xq8b822kei",parentId:"",content:{text:"font awesome 5.0",html:"font awesome 5.0",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"bf3fq1juqd96fka",parentId:"",content:{text:"scss",html:"scss",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"6bvv9bf4vf56gyh",parentId:"",content:{text:"eslint (使用airbnb風格)",html:"eslint (使用airbnb風格)",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"0xd21yzjcr7zi4r",parentId:"",content:{text:"firebase",html:"firebase",indent:1},className:"style-text-color__default"},{type:"bulletItem",id:"94s76m9vrpi0mxv",parentId:"",content:{text:"Authentication",html:"Authentication",indent:2},className:"style-text-color__default"},{type:"bulletItem",id:"rolwh0wa2k0o83",parentId:"",content:{text:"firestore",html:"firestore",indent:2},className:"style-text-color__default"},{type:"bulletItem",id:"zxcjhb8i2k4e6i",parentId:"",content:{text:"使用到的api",html:"使用到的api",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"qv1alsaphsc4lne",parentId:"",content:{text:"LinkPreview API",html:"LinkPreview API",indent:1},className:"style-text-color__default"},{type:"p",id:"un7cpjleudaeu8",parentId:"",content:{text:"",html:""},className:"style-text-color__default"},{type:"h2",id:"yql3atld6wiwu5",parentId:"",content:{html:"功能說明",text:"功能說明"},className:"style-text-color__default"},{type:"dividingLine",id:"ameiyp6qntwi4p3",parentId:"",content:"",className:"style-text-color__default"},{type:"p",id:"qd8fvpxnrveblfn",parentId:"",content:{text:"完整功能可以參考以下連結(或者如果是Notion使用者，可以依照對Notion的經驗自己嘗試玩看看~)",html:"完整功能可以參考以下連結(或者如果是Notion使用者，可以依照對Notion的經驗自己嘗試玩看看~)"},className:"style-text-color__default"},{type:"linkPreview",id:"bxohjj3gt2c619x",parentId:"",content:{title:"Note - HackMD",description:"![](https://i.imgur.com/p924bGV.png) # Note > Note是一個筆記軟體 主要功能參考至notion。目前為測試版，有許多小問題... 後續會增",image:"https://www.gravatar.com/avatar/dbcf568e433f289f7e93f61f9dedbb7e?s=400",url:"https://hackmd.io/@Wins/SyqEdjwfD"},className:"style-text-color__default"},{type:"p",id:"gronzht7jrja1fd",parentId:"",content:{text:"",html:""},className:"style-text-color__default"},{type:"h2",id:"wjmgset6w6h5f4",parentId:"",content:{text:"關於資料的更新和保存",html:"關於資料的更新和保存"},className:"style-text-color__purple"},{type:"dividingLine",id:"sralaqrt1zeii3y",parentId:"",content:"",className:"style-text-color__default"},{type:"p",id:"apcudm5mskuk93s",parentId:"",content:{text:"原本最初的作法是 : 修改數據就更新到firestore數據庫上，結果某一次測試輸入太多文字，firestore就爆流量限制問題了...",html:"原本最初的作法是 : 修改數據就更新到firestore數據庫上，結果某一次測試輸入太多文字，firestore就爆流量限制問題了..."},className:"style-text-color__default"},{type:"quote",id:"iu8m7k4ca2ao75b",parentId:"",content:{text:"免費的不要要求太多...",html:"免費的不要要求太多..."},className:"style-text-color__default"},{type:"p",id:"lvrl4irw23oiri",parentId:"",content:{text:"所以目前資料的保存，會在每一次的編輯立馬更新到localstorage上，這是目前的暫緩作法。(不用特地到localstorage改資料，已經做加密處理，除非你要清空所有資料...)",html:"所以目前資料的保存，會在每一次的編輯立馬更新到localstorage上，這是目前的暫緩作法。(不用特地到localstorage改資料，已經做加密處理，除非你要清空所有資料...)"},className:"style-text-color__default"},{type:"p",id:"vt5ca2owpqbepe",parentId:"",content:{text:" ",html:"<br>"},className:"style-text-color__default"},{type:"p",id:"a0g37lp49iebohl",parentId:"",content:{text:"因此目前使用者在此網站上輸入任何內容都會是保存狀態。",html:"因此目前使用者在此網站上輸入任何內容都會是保存狀態。"},className:"style-text-color__default"},{type:"p",id:"pie9npuhsccna9",parentId:"",content:{text:"若想要在其他台電腦使用當前資料繼續編輯，請按下畫面最右上方的 -更新到數據庫- ，會直接把資料儲存到雲端數據庫中",html:"若想要在其他台電腦使用當前資料繼續編輯，請按下畫面最右上方的 -更新到數據庫- ，會直接把資料儲存到雲端數據庫中"},className:"style-text-color__default"},{type:"p",id:"xirwbktp98rw9p",parentId:"",content:{text:"",html:""},className:"style-text-color__default"},{type:"h2",id:"7vi9tcnt0ovs3hx",parentId:"",content:{text:"一直點左邊的按鈕增加block(區塊)好麻煩，有沒有快捷鍵?",html:"一直點左邊的按鈕增加block(區塊)好麻煩，有沒有快捷鍵?"},className:"style-text-color__default"},{type:"todoItem",id:"8b4l84jxl6jv4jv",parentId:"",content:{text:"有",html:"有",isChecked:!0},className:"style-text-color__default"},{type:"todoItem",id:"ff77g71bybvpur",parentId:"",content:{text:"作者太懶了，沒有",html:"作者太懶了，沒有",isChecked:!1},className:"style-text-color__default"},{type:"p",id:"q58gjuch6fdw8er",parentId:"",content:{text:"",html:""},className:"style-text-color__default"},{type:"p",id:"gnqa4830deu4bwq",parentId:"",content:{text:"可以輸入以下快捷鍵，並按下Enter，即可轉換為其他類型的block",html:"可以輸入以下快捷鍵，並按下Enter，即可轉換為其他類型的block"},className:"style-text-color__default"},{type:"bulletItem",id:"4jyvq3zqohr65d5",parentId:"",content:{text:"/h1",html:"/h1",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"pqwq48p6d69hl",parentId:"",content:{text:"/h2",html:"/h2",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"pi756lq8l69pt",parentId:"",content:{text:"/h3",html:"/h3",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"gjuzhaevak69uy",parentId:"",content:{text:"/vid",html:"/vid",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"gpzw3je85x46a02",parentId:"",content:{text:"/img",html:"/img",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"sfb0jwfxhtc6a4y",parentId:"",content:{text:"/p",html:"/p",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"4p6s13i710c6aa2",parentId:"",content:{text:"/pag",html:"/pag",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"5qv6c1s026c6afe",parentId:"",content:{text:"/num",html:"/num",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"hvycs1fo0nf6aky",parentId:"",content:{text:"/bul",html:"/bul",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"zkpv72dinwc6aqa",parentId:"",content:{text:"/todo",html:"/todo",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"xiuck8vc7tc6avu",parentId:"",content:{text:"/div",html:"/div",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"rax7q8qawqf6b1e",parentId:"",content:{text:"/code",html:"/code",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"upba9dfscmi6b6q",parentId:"",content:{text:"/quo",html:"/quo",indent:0},className:"style-text-color__default"},{type:"bulletItem",id:"dwyxkti2af6bde",parentId:"",content:{text:"/link",html:"/link",indent:0},className:"style-text-color__default"}]};t["a"]=c},4360:function(e,t,n){"use strict";var c=n("1da1"),o=(n("96cf"),n("b0c0"),n("7db0"),n("5502")),r=n("2909"),a=(n("d3b7"),n("25f0"),n("a434"),n("4de4"),n("caad"),n("2532"),n("159b"),n("99af"),function(e,t){return e.find((function(e){return e.id===t}))}),i=function(e,t){var n=Object(r["a"])(e),c=n.indexOf(t);return n.splice(c,1),n},l=n("13bf"),u={namespaced:!0,state:{pages:[],currentPageId:"",currentPageIdOnMouse:""},mutations:{resetPages:function(e){e.pages=[],e.currentPageId=""},addPage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:Object(l["c"])(),name:"untitle",blocks:[],parentId:"",createdTime:(new Date).getTime().toString(),editTime:(new Date).getTime().toString(),tags:[],cover:""};e.pages.push(t)},deletePage:function(e,t){e.pages=i(e.pages,t)},editPageData:function(e,t){var n=t.page,c=void 0===n?a(e.pages,e.currentPageId):n,o=t.key,r=t.value;c?c[o]=r:console.log("請先選擇頁面")},addIdToBlocksOfPage:function(e,t){var n=t.page,c=void 0===n?a(e.pages,e.currentPageId):n,o=t.id,r=t.index;void 0!==r?c.blocks.splice(r,0,o):c.blocks.push(o)},deleteIdToBlocksOfPage:function(e,t){var n=t.page,c=void 0===n?a(e.pages,e.currentPageId):n,o=t.id,r=c.blocks.indexOf(o);c.blocks.splice(r,1)},setCurrentPageId:function(e,t){t!==e.currentPageId&&(e.currentPageId=t)}},getters:{childrenPages:function(e){return function(t){return e.pages.filter((function(e){return e.parentId===t}))}},parentPage:function(e){return function(t){return a(e.pages,t.parentId)}},choosePage:function(e){return function(t){return a(e.pages,t)}},currentPage:function(e){return a(e.pages,e.currentPageId)},searchPages:function(e){return function(t){return""!==t?e.pages.filter((function(e){return e.name.includes(t)})):null}},getPageByBlockId:function(e){return function(t){return e.pages.find((function(e){return e.blocks.includes(t)}))}},allPagesIds:function(e){var t=[];return e.pages.forEach((function(e){t.push(e.id)})),t}},actions:{moveIdInBlocksOfPage:function(e,t){var n=e.commit,c=t.page,o=t.id,r=t.index;n("deleteIdToBlocksOfPage",{page:c,id:o}),n("addIdToBlocksOfPage",{page:c,id:o,index:r})},deletePage:function(e,t){var n=e.state,c=e.rootState,o=e.commit,i=e.dispatch;if(""!==t.parentId){var l=c.blocks.blocks.find((function(e){return e.content===t.id}));l&&i("blocks/deleteBlock",{containPage:a(n.pages,t.parentId),block:l},{root:!0})}var u=Object(r["a"])(t.blocks);u.forEach((function(e){var n=c.blocks.blocks.find((function(t){return t.id===e}));i("blocks/deleteBlock",{containPage:t,block:n},{root:!0})})),o("deletePage",t);var s=n.pages.filter((function(e){return e.parentId===t.id}));s&&0!==s.length&&s.forEach((function(e){return i("deletePage",e)}))},addTag:function(e,t){var n=e.state,c=e.commit,o=a(n.pages,n.currentPageId),i={name:t,color:Object(l["d"])()};c("editPageData",{key:"tags",value:[].concat(Object(r["a"])(o.tags),[i])})},deleteTag:function(e,t){var n=e.state,c=e.commit,o=a(n.pages,n.currentPageId);c("editPageData",{key:"tags",value:o.tags.filter((function(e){return e!==t}))})}}},s=n("5530"),d=(n("d81d"),{namespaced:!0,state:{blocks:[],currentFocusBlockId:"",selectedBlocksIds:[],clipboardBlocks:[],hiddenBlocksIds:[],blockStyleEditor:{isShow:!1}},mutations:{resetBlocks:function(e){e.blocks=[],e.currentFocusBlockId="",e.selectedBlocksIds=[],e.hiddenBlocksIds=[]},addBlock:function(e,t){e.blocks.push(t)},deleteBlock:function(e,t){var n=e.blocks.indexOf(t);e.blocks.splice(n,1)},addIdToBlocksOfBlock:function(e,t){var n=t.block,c=t.blockId,o=t.index;void 0!==o?n.blocks.splice(o,0,c):n.blocks.push(c)},deleteIdToBlocksOfBlock:function(e,t){var n=t.block,c=t.blockId,o=n.blocks.indexOf(c);n.blocks.splice(o,1)},editBlockData:function(e,t){var n=t.id,c=void 0===n?e.currentFocusBlockId:n,o=t.value,r=t.key,i=void 0===r?"content":r;a(e.blocks,c)[i]=o},changeBlock:function(e,t){var n=t.oldBlock,c=t.newBlock,o=e.blocks.indexOf(n);-1!==o&&(e.blocks[o]=c)},setFocusBlockById:function(e,t){e.currentFocusBlockId=t},setSelectedBlocksIds:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.selectedBlocksIds=t},addIdToSelectedBlocksIds:function(e,t){return!e.selectedBlocksIds.includes(t)&&(e.selectedBlocksIds.push(t),!0)},deleteIdFromSelectedBlocksIds:function(e,t){if(e.selectedBlocksIds.includes(t)){var n=e.selectedBlocksIds.indexOf(t);return e.selectedBlocksIds.splice(n,1),!0}return!1},addIdsToHiddenBlocksIds:function(e,t){t.forEach((function(t){e.hiddenBlocksIds.includes(t)||e.hiddenBlocksIds.push(t)}))},deleteIdsToHiddenBlocksIds:function(e,t){t.forEach((function(t){if(e.hiddenBlocksIds.includes(t)){var n=e.hiddenBlocksIds.indexOf(t);e.hiddenBlocksIds.splice(n,1)}}))},resetHiddenBlocksIds:function(e){e.hiddenBlocksIds=[]},setStyleEditorShow:function(e,t){e.blockStyleEditor=t},setClipboardBlocks:function(e,t){e.clipboardBlocks=Object(r["a"])(t)}},getters:{currentBlocks:function(e,t,n,c){return c["pages/currentPage"].blocks.map((function(t){return a(e.blocks,t)}))},currentBlocksIds:function(e,t,n,c){return c["pages/currentPage"].blocks},chooseBlock:function(e){return function(t){return a(e.blocks,t)}},childrenCurrentBlocks:function(e,t){return function(e){return t.currentBlocks.filter((function(t){return t.parentId===e}))}},currentFocusBlock:function(e,t){return a(t.currentBlocks,e.currentFocusBlockId)},searchBlocks:function(e){return function(t){return""!==t?e.blocks.filter((function(e){var n,c;return null===(n=e.content)||void 0===n||null===(c=n.text)||void 0===c?void 0:c.includes(t)})):null}},isIdInHiddenBlocksIds:function(e){return function(t){return e.hiddenBlocksIds.includes(t)}},getIndexByBlockId:function(e,t){return function(e){return t.currentBlocksIds.indexOf(e)}},getPrevBlockByid:function(e,t){return function(e){var n=t.currentBlocksIds.indexOf(e);return 0===n?null:t.currentBlocks[n-1]}},getNextBlockByid:function(e,t){return function(e){var n=t.currentBlocksIds.indexOf(e);return n===t.currentBlocksIds.length-1?null:t.currentBlocks[n+1]}},selectedBlocks:function(e,t){var n=[];return e.selectedBlocksIds.forEach((function(e){var c=a(t.currentBlocks,e);n.push(c)})),n},isBlockSelected:function(e){return function(t){return e.selectedBlocksIds.includes(t)}},allBlocksIds:function(e){var t=[];return e.blocks.forEach((function(e){t.push(e.id)})),t},getClipboardBlocksIds:function(e){return e.clipboardBlocks.map((function(e){return e.id}))}},actions:{addBlock:function(e,t){var n=e.commit,c=e.rootState,o=t.page,r=void 0===o?a(c.pages.pages,c.pages.currentPageId):o,i=t.block,u=void 0===i?{id:Object(l["c"])(),type:"p",content:"",blocks:[],parentId:"",className:"style-text-color__default"}:i,s=t.index;n("addBlock",u),n("pages/addIdToBlocksOfPage",{page:r,id:u.id,index:s||void 0},{root:!0})},addBlockAndSetFocusBlockId:function(e,t){var n=e.commit,c=e.dispatch,o=e.rootState,r=t.page,i=void 0===r?a(o.pages.pages,o.pages.currentPageId):r,u=t.block,s=void 0===u?{id:Object(l["c"])(),type:"p",content:{text:"",html:""},blocks:[],parentId:"",className:"style-text-color__default"}:u,d=t.index;c("addBlock",{block:s,page:i,index:d}),n("blocks/setFocusBlockById",s.id,{root:!0})},addPageTypeBlock:function(e,t){var n=e.commit,c=e.dispatch,o=e.rootState,r=t.block,a=t.page,i=void 0===a?o.pages.currentPageId:a,u=Object(s["a"])({},r);u.content!==i.id&&(u.content=i.id),c("addBlock",{block:u});var d={id:Object(l["c"])(),name:"untitle",blocks:[],parentId:i.id,createdTime:(new Date).getTime().toString(),editTime:(new Date).getTime().toString(),tags:[],cover:""};n("pages/addPage",d,{root:!0})},deleteBlock:function(e,t){var n=e.state,c=e.rootState,o=e.commit,r=t.containPage,i=void 0===r?a(c.pages.pages,c.pages.currentPageId):r,l=t.block,u=void 0===l?a(n.blocks,n.currentFocusBlockId):l;o("pages/deleteIdToBlocksOfPage",{page:i,id:u.id},{root:!0}),o("deleteBlock",u)},deleteSelectedBlocks:function(e){var t=e.state,n=e.dispatch;t.selectedBlocksIds.forEach((function(e){var c=a(t.blocks,e);n("deleteBlock",{block:c})}))},editSelectedBlocksData:function(e,t){var n=e.state,c=e.commit,o=t.key,r=t.value;n.selectedBlocksIds.forEach((function(e){c("editBlockData",{key:o,value:r,id:e})}))},goBlockPosition:function(e,t){var n=e.commit,c=t.page,o=t.block;n("pages/setCurrentPageId",c.id,{root:!0}),n("setFocusBlockById",o.id)}}}),f={namespaced:!0,state:{userInfo:{}},mutations:{resetUserInfo:function(e){e.userInfo={}},setUserInfo:function(e,t){e.userInfo=t},addIdToRecentPageIds:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.currentPageId;e.userInfo.recentPageIds.includes(t)||(e.userInfo.recentPageIds.push(t),e.userInfo.recentPageIds.length>10&&e.userInfo.recentPageIds.splice(0,1))},deleteIdFromRecentPageIds:function(e,t){var n=e.userInfo.recentPageIds.indexOf(t);e.userInfo.recentPageIds.splice(n,1)}},getters:{getPagesInRecentPageIds:function(e,t,n,c){var o=[];return e.userInfo.recentPageIds.forEach((function(e){var t=c["pages/choosePage"](e);t&&o.push(t)})),o}}},p=function(){return window.innerWidth>992};t["a"]=Object(o["a"])({state:{blocktype:[{type:"h1",icon:"heading",style:"solid",name:"大標題",className:"block-h1",hotKey:"h1"},{type:"h2",icon:"heading",style:"solid",name:"中標題",className:"block-h2",hotKey:"h2"},{type:"h3",icon:"heading",style:"solid",name:"小標題",className:"block-h3",hotKey:"h3"},{type:"video",icon:"video",style:"solid",name:"影片",className:"block-video",hotKey:"vid"},{type:"img",icon:"images",style:"regular",name:"圖片",className:"block-img",hotKey:"img"},{type:"p",icon:"font",style:"solid",name:"文字片段",className:"block-p",hotKey:"p"},{type:"page",icon:"file",style:"regular",size:"1x",name:"內嵌頁面",className:"block-page",hotKey:"pag"},{type:"numberItem",icon:"list-ol",style:"solid",name:"順序列表",className:"block-number-item",hotKey:"num"},{type:"bulletItem",icon:"list-ul",style:"solid",name:"無序列表",className:"block-bullet-item",hotKey:"bul"},{type:"todoItem",icon:"check-square",style:"regular",name:"核取框",className:"block-todo-item",hotKey:"todo"},{type:"dividingLine",icon:"window-minimize",style:"regular",name:"分割線",className:"block-dividing-line",hotKey:"div"},{type:"codeEditor",icon:"laptop-code",style:"solid",name:"程式碼",className:"block-code-editor",hotKey:"code"},{type:"quote",icon:"quote-left",style:"solid",name:"引言",className:"block-quote",hotKey:"quo"},{type:"linkPreview",icon:"eye",style:"regular",name:"連結預覽",className:"block-link-preview",hotKey:"link"}],colors:["D7EBBA","fac3cd","c5d9e4","fac9c9","c2d1f1","faeca5","E6F8B2"],sidebarState:{isCollapse:!0,isFloating:!p(),currentWidth:""},windowWidth:"",dragStartIds:"",isIframeActive:!1},mutations:{setStoreData:function(e,t){var n=t.data,c=t.name;e[c][c]=n},setWindowWidth:function(e,t){e.windowWidth=t},setSidebarCollapse:function(e,t){e.sidebarState.isCollapse=t},setSidebarFloating:function(e,t){e.sidebarState.isFloating=t},setCurrentSidebarWidth:function(e,t){e.sidebarState.currentWidth=t},setDragStartIds:function(e,t){e.dragStartIds=t},setIframeActive:function(e,t){e.isIframeActive=t}},getters:{getClassNameOfBlockType:function(e){return function(t){return e.blocktype.find((function(e){return e.type===t})).className}}},actions:{resetStoreData:function(e){var t=e.commit;t("pages/resetPages",null,{root:!0}),t("blocks/resetBlocks",null,{root:!0})},floatSidebar:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,c=e.state,!1===c.sidebarState.isCollapse&&n("setSidebarCollapse",!0),t.next=4,Object(l["h"])(1.2,(function(){!1===c.sidebarState.isFloating&&n("setSidebarFloating",!0)}));case 4:case"end":return t.stop()}}),t)})))()},lockSidebar:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Object(l["h"])(.5,(function(){n("setSidebarFloating",!1)}));case 3:n("setSidebarCollapse",!1);case 4:case"end":return t.stop()}}),t)})))()}},modules:{pages:u,blocks:d,userInfo:f}})},"475e":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var c=n("1da1"),o=(n("96cf"),n("d3b7"),n("159b"),n("7a23")),r=n("4360"),a=n("05fe"),i=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){a["b"].collection("users").where("userInfo.email","==",t).get().then((function(t){t.empty?e(null):t.forEach((function(t){e(t.data())}))})).catch((function(e){n(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){a["b"].collection("users").doc(t.userInfo.email).set(t).then((function(){e()})).catch((function(e){n(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,c,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(o["c"])((function(){return r["a"].state.pages.pages})),n=Object(o["c"])((function(){return r["a"].state.blocks.blocks})),c=Object(o["c"])((function(){return r["a"].state.userInfo.userInfo})),a={userInfo:c.value,pages:t.value,blocks:n.value},e.next=6,l(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},4865:function(e,t,n){"use strict";n("60c1")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),o=n("ad3d"),r=n("ecee"),a=n("f2d1"),i=n("b702"),l=n("c074"),u=(n("7b17"),Object(c["O"])("data-v-74d09eaa")),s=u((function(e,t,n,o,r,a){var i=Object(c["A"])("BlockEditable");return Object(c["s"])(),Object(c["e"])(i,{block:n.block,placeholder:"請輸入標題",className:"h1"},null,8,["block"])}));function d(e,t,n,o,r,a){var i=Object(c["A"])("ContentEditable");return Object(c["s"])(),Object(c["e"])(i,{placeholder:n.placeholder,className:n.className,id:n.noId?"":n.block.id,value:n.block.content.text,onInput:o.inputToBlockContent,onFocus:o.focusToBlock,onKeydown:Object(c["N"])(o.keydownAction,["stop"]),onPaste:Object(c["N"])(o.pasteBlocksAction,["stop"])},null,8,["placeholder","className","id","value","onInput","onFocus","onKeydown","onPaste"])}var f=n("5530"),p=n("f225"),b=n("c960"),m={components:{ContentEditable:p["a"]},name:"BlockEditable",props:["block","placeholder","className","noId"],setup:function(e){var t=Object(b["a"])(),n=t.editBlockData,c=t.setFocusBlock,o=t.pasteBlocksAction,r=t.checkKeydownInBlockContent,a=function(t){var c=Object(f["a"])({},e.block.content);c.text=t.target.innerText,c.html=t.target.innerHTML,n(e.block.id,c,"content")},i=function(t){r(e.block,t)},l=function(){c(e.block.id)};return{inputToBlockContent:a,keydownAction:i,focusToBlock:l,pasteBlocksAction:o}}};m.render=d;var v=m,h={name:"H1",props:["block"],components:{BlockEditable:v}};n("d3fe");h.render=s,h.__scopeId="data-v-74d09eaa";var k=h,g=Object(c["O"])("data-v-90deed66"),y=g((function(e,t,n,o,r,a){var i=Object(c["A"])("BlockEditable");return Object(c["s"])(),Object(c["e"])(i,{block:n.block,placeholder:"請輸入標題",className:"h3"},null,8,["block"])})),I={name:"H2",props:["block"],components:{BlockEditable:v}};n("14d3");I.render=y,I.__scopeId="data-v-90deed66";var j=I,O=Object(c["O"])("data-v-29208c9e"),x=O((function(e,t,n,o,r,a){var i=Object(c["A"])("BlockEditable");return Object(c["s"])(),Object(c["e"])(i,{block:n.block,placeholder:"請輸入標題",className:"h4"},null,8,["block"])})),w={name:"H3",props:["block"],components:{BlockEditable:v}};n("e030");w.render=x,w.__scopeId="data-v-29208c9e";var B=w,_=Object(c["O"])("data-v-470ff68e"),N=_((function(e,t,n,o,r,a){var i=Object(c["A"])("ContentEditable"),l=Object(c["A"])("ScaleController");return Object(c["s"])(),Object(c["e"])(c["a"],null,[o.isShow?Object(c["f"])("",!0):(Object(c["s"])(),Object(c["e"])(i,{key:0,placeholder:"ctrl + v 貼上複製的圖片",onPaste:Object(c["N"])(o.paste,["stop"]),onKeydown:t[1]||(t[1]=Object(c["N"])((function(e){return o.deleteInput(e,n.block)}),["stop"])),onFocus:t[2]||(t[2]=function(){return o.setFocusBlock(n.block.id)})},null,8,["onPaste"])),n.block.content.url?(Object(c["s"])(),Object(c["e"])(l,{id:n.block.id+"scale",key:n.block.id+"scale","min-width":200,"once-compression-width":n.block.content.compressionWidth,onGetCompressionWidth:o.setCompressionWidthInBlock},{default:_((function(){return[Object(c["i"])(c["b"],null,{default:_((function(){return[Object(c["i"])("img",{id:n.block.id,src:n.block.content.url,referrerpolicy:"no-referrer"},null,8,["id","src"])]})),_:1})]})),_:1},8,["id","once-compression-width","onGetCompressionWidth"])):Object(c["f"])("",!0)],64)})),P=n("1da1"),C=(n("96cf"),n("d3b7"),n("9911"),Object(c["O"])("data-v-4dbd9100"));Object(c["v"])("data-v-4dbd9100");var S={class:"scale-controller",ref:"scontroller"},T={class:"scale-area"},E={class:"scale-handle-left"},q=Object(c["i"])("div",{class:"scale-handle-item"},null,-1),A={class:"scale-handle-right"},D=Object(c["i"])("div",{class:"scale-handle-item"},null,-1);Object(c["t"])();var R=C((function(e,t,n,o,r,a){return Object(c["s"])(),Object(c["e"])("div",S,[Object(c["i"])("div",T,[Object(c["i"])("div",{class:"scale-compression",style:{width:o.width>0?"".concat(o.width,"px"):0}},null,4),Object(c["i"])("div",{class:"scale-object",id:n.id,style:{height:"".concat(o.getHeight)}},[Object(c["z"])(e.$slots,"default",{isActive:o.isActive},void 0,!0),Object(c["i"])(c["b"],null,{default:C((function(){return[Object(c["L"])(Object(c["i"])("div",E,[q],512),[[c["I"],o.isShow]])]})),_:1}),Object(c["i"])(c["b"],null,{default:C((function(){return[Object(c["L"])(Object(c["i"])("div",A,[D],512),[[c["I"],o.isShow]])]})),_:1})],12,["id"]),Object(c["i"])("div",{class:"scale-compression",style:{width:o.width>0?"".concat(o.width,"px"):0}},null,4)])],512)})),F=n("13bf"),W={name:"ScaleController",props:["aspectRatio","min-width","max-width","once-compression-width","id"],emits:["getCompressionWidth"],setup:function(e,t){var n=t.emit,o=0,r=Object(c["x"])(""),a=Object(c["x"])(0),i=Object(c["x"])("false"),l=Object(F["e"])(),u=l.isShow,s=l.handleShow,d=Object(c["c"])((function(){if(!e.aspectRatio)return"auto";var t=document.getElementsByClassName("blockcontent")[0];if(!t)return"auto";var n=t.getBoundingClientRect(),c=e.aspectRatio[0]/e.aspectRatio[1],o="".concat((n.width-2*a.value)/c,"px");return o})),f=function(){n("getCompressionWidth",a.value)};return Object(c["q"])((function(){var t=document.getElementById(e.id);o=e.onceCompressionWidth,a.value=e.onceCompressionWidth,i.value=!1;var n=0,c=0,l="",u=function(t){!1!==i.value&&"right"!==l&&(r.value=t.clientX-c,a.value=o+r.value,a.value>e.minWidth/2&&(a.value=e.minWidth/2),a.value<0&&(a.value=0),f())},d=function(t){!1!==i.value&&"left"!==l&&(r.value=n-t.clientX,a.value=o+r.value,a.value>e.minWidth/2&&(a.value=e.minWidth/2),a.value<0&&(a.value=0),f())},p=function(){o=a.value,i.value=!1},b=function(e){e.preventDefault(),i.value=!0,r.value=0,c=e.clientX,l="left"},m=function(e){e.preventDefault(),i.value=!0,r.value=0,n=e.clientX,l="right"};t.addEventListener("mouseenter",(function(){s(!0)})),t.addEventListener("mouseleave",(function(){s(!1)})),t.querySelector(".scale-handle-left").addEventListener("mousedown",b),t.querySelector(".scale-handle-right").addEventListener("mousedown",m),document.addEventListener("mousemove",u),document.addEventListener("mousemove",d),document.addEventListener("mouseup",p)})),{offsetX:r,isShow:u,getHeight:d,prevWidth:o,width:a,isActive:i}}};n("30bc");W.render=R,W.__scopeId="data-v-4dbd9100";var L=W,K=n("febf"),z="794a032c7e8e6f4",H={name:"Img",props:["block"],components:{ScaleController:L,ContentEditable:p["a"]},setup:function(e){var t=Object(b["a"])(),n=t.editBlockData,o=t.deleteInput,r=t.setFocusBlock,a=Object(K["a"])(),i=a.getBlobByClipBoardData,l=Object(F["e"])(),u=l.isShow,s=l.handleShow;Object(c["q"])((function(){s(""!==e.block.content.url)}));var d=function(t){n(e.block.id,{url:e.block.content.url,compressionWidth:t},"content")},f=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=new FormData;c.append("image",t),fetch("https://api.imgur.com/3/image",{method:"post",headers:{Authorization:"Client-ID ".concat(z)},body:c,referrer:""}).then((function(e){return e.text()})).then((function(t){var n=JSON.parse(t);e(n.data.link)})).catch((function(e){return n(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(c){var o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o="text/plain"===c.clipboardData.types[0],!o){t.next=5;break}return n(e.block.id,{url:c.clipboardData.getData("text/plain"),compressionWidth:0},"content"),s(!0),t.abrupt("return");case 5:return t.prev=5,t.next=8,i(c);case 8:return r=t.sent,t.next=11,f(r);case 11:a=t.sent,n(e.block.id,{url:a,compressionWidth:0},"content"),s(!0),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](5),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}();return{deleteInput:o,paste:p,isShow:u,handleShow:s,setFocusBlock:r,setCompressionWidthInBlock:d}}};n("d386");H.render=N,H.__scopeId="data-v-470ff68e";var M=H,U=(n("b0c0"),Object(c["O"])("data-v-75ce77a2")),J=U((function(e,t,n,o,r,a){var i=Object(c["A"])("font-awesome-icon");return Object(c["s"])(),Object(c["e"])("div",{class:"d-flex",type:"button","data-pageid":n.block.content,id:n.block.id,onClick:t[1]||(t[1]=function(e){return o.goCurrentPage(n.block.content)})},[Object(c["i"])("div",{class:"prefix","data-pageid":n.block.content},[Object(c["i"])(i,{icon:["far","file"]})],8,["data-pageid"]),Object(c["i"])("div",{class:"p","data-pageid":n.block.content},Object(c["E"])(o.targetPage.name),9,["data-pageid"])],8,["data-pageid","id"])})),G=n("5502"),X={name:"P",props:["block"],setup:function(e){var t=Object(b["a"])(),n=t.goCurrentPage,o=Object(c["F"])(e),r=o.block,a=Object(G["b"])(),i=Object(c["c"])((function(){return a.getters["pages/choosePage"](r.value.content)}));return{targetPage:i,goCurrentPage:n}}};n("cccd");X.render=J,X.__scopeId="data-v-75ce77a2";var V=X,$=Object(c["O"])("data-v-e649c350"),Q=$((function(e,t,n,o,r,a){var i=Object(c["A"])("ContentEditable"),l=Object(c["A"])("ScaleController");return Object(c["s"])(),Object(c["e"])(c["a"],null,[""===n.block.content.url?(Object(c["s"])(),Object(c["e"])(i,{key:0,placeholder:"請貼上影片(youtube)網址",onKeydown:t[1]||(t[1]=Object(c["N"])((function(e){return o.deleteInput(e,n.block)}),["stop"])),onInput:t[2]||(t[2]=function(e){return o.checkURL(e,n.block)})},null,8,["placeholder"])):Object(c["f"])("",!0),""!==n.block.content.url?(Object(c["s"])(),Object(c["e"])(l,{key:1,id:n.block.id+"scale","min-width":200,"aspect-ratio":[16,9],"once-compression-width":n.block.content.compressionWidth,onGetCompressionWidth:o.setCompressionWidthInBlock},{default:$((function(e){var t=e.isActive;return[Object(c["i"])("iframe",{id:n.block.id,src:n.block.content.url,frameborder:"0",style:{"pointer-events":t||!o.isIframeActive?"none":"auto"},allow:"accelerometer; autoplay;\n          clipboard-write; encrypted-media; gyroscope;\n          picture-in-picture",allowfullscreen:""},null,12,["id","src"])]})),_:1},8,["id","once-compression-width","onGetCompressionWidth"])):Object(c["f"])("",!0)],64)})),Y=(n("caad"),n("2532"),n("fb6a"),n("ac1f"),n("1276"),n("6cb0")),Z={name:"Video",props:["block"],components:{ScaleController:L,ContentEditable:p["a"]},setup:function(e){var t=Object(G["b"])(),n=Object(c["c"])((function(){return t.state.isIframeActive})),o=Object(Y["a"])(),r=o.getBlockWidthById,a=Object(b["a"])(),i=a.editBlockData,l=a.deleteInput,u=function(t){i(e.block.id,{url:e.block.content.url,compressionWidth:t},"content")},s=["youtu.be/","youtube.com/embed/","youtube.com/watch?v="],d=function(e,t){for(var n=e.target.innerText,c=0;c<s.length;c+=1)if(n.includes(s[c])){var o=n.split(s[c])[1].slice(0,11);return void i(t.id,{url:"https://www.youtube-nocookie.com/embed/".concat(o),compressionWidth:0},"content")}};return{isIframeActive:n,deleteInput:l,checkURL:d,getBlockWidthById:r,setCompressionWidthInBlock:u}}};n("e784");Z.render=Q,Z.__scopeId="data-v-e649c350";var ee=Z,te=Object(c["O"])("data-v-789de821"),ne=te((function(e,t,n,o,r,a){var i=Object(c["A"])("BlockEditable");return Object(c["s"])(),Object(c["e"])(i,{block:n.block,placeholder:"請輸入文字",className:"p"},null,8,["block"])})),ce={name:"P",props:["block"],components:{BlockEditable:v}};n("4865");ce.render=ne,ce.__scopeId="data-v-789de821";var oe=ce,re=Object(c["O"])("data-v-50ba80ec");Object(c["v"])("data-v-50ba80ec");var ae={class:"d-flex"};Object(c["t"])();var ie=re((function(e,t,n,o,r,a){var i=Object(c["A"])("P");return Object(c["s"])(),Object(c["e"])("div",ae,[Object(c["i"])("input",{type:"checkbox",class:"prefix m-auto",checked:n.block.content.isChecked,onInput:t[1]||(t[1]=function(e){return o.setTodoItemData(e,n.block)})},null,40,["checked"]),Object(c["i"])(i,{block:n.block},null,8,["block"])])})),le={name:"TodoItem",props:["block"],components:{P:oe},setup:function(){var e=Object(b["a"])(),t=e.editBlockData,n=function(e,n){t(n.id,{text:n.content.text,html:n.content.html,isChecked:e.target.checked},"content")};return{setTodoItemData:n}}};le.render=ie,le.__scopeId="data-v-50ba80ec";var ue=le,se=Object(c["O"])("data-v-972473ec");Object(c["v"])("data-v-972473ec");var de={class:"prefix"};Object(c["t"])();var fe=se((function(e,t,n,o,r,a){var i=Object(c["A"])("P");return Object(c["s"])(),Object(c["e"])("div",{class:"d-flex",style:{"margin-left":"".concat(1.5*n.block.content.indent,"rem")}},[Object(c["i"])("div",de,Object(c["E"])(o.index+1)+". ",1),Object(c["i"])(i,{block:n.block,onKeydown:t[1]||(t[1]=Object(c["M"])((function(e){return o.handleIndent(e,n.block)}),["tab"]))},null,8,["block"])],4)})),pe=function(){var e=Object(G["b"])(),t=function(t){return Object(c["c"])((function(){return e.getters["blocks/getPrevBlockByid"](t)}))},n=function(e,t){return(null===e||void 0===e?void 0:e.type)===(null===t||void 0===t?void 0:t.type)},o=function(e,t){var n,c;return(null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.indent)===(null===t||void 0===t||null===(c=t.content)||void 0===c?void 0:c.indent)},r=function(e,t){var n,c;return(null===(n=e.content)||void 0===n?void 0:n.indent)<=(null===(c=t.content)||void 0===c?void 0:c.indent)},a=function(c){var o=t(c.id).value;if(o&&n(c,o)&&r(c,o)){var a=Object(f["a"])({},c.content);a.indent+=1,e.commit("blocks/editBlockData",{id:c.id,key:"content",value:a})}},i=function(t){if(t.content.indent>0){var n=Object(f["a"])({},t.content);n.indent-=1,e.commit("blocks/editBlockData",{id:t.id,key:"content",value:n})}},l=function(e,t){e.preventDefault(),e.shiftKey?i(t):a(t)};return{isSameType:n,isSameIndent:o,getPrevBlockById:t,isAIndentNoMoreThanB:r,handleIndent:l}},be=pe,me={name:"NumberItem",props:["block"],component:{P:oe},setup:function(e){var t=be(),n=t.isSameType,o=t.isSameIndent,r=t.getPrevBlockById,a=t.handleIndent,i=Object(c["c"])((function(){var t=0,c=Object(f["a"])({},e.block);while(n(r(c.id).value,c)&&o(r(c.id).value,c))t+=1,c=r(c.id).value;return t}));return{index:i,handleIndent:a}}};me.render=fe,me.__scopeId="data-v-972473ec";var ve=me,he=Object(c["O"])("data-v-706ce222");Object(c["v"])("data-v-706ce222");var ke=Object(c["i"])("div",{class:"prefix"},[Object(c["i"])("div",{class:"bullet"},"⦁")],-1);Object(c["t"])();var ge=he((function(e,t,n,o,r,a){var i=Object(c["A"])("P");return Object(c["s"])(),Object(c["e"])("div",{class:"d-flex",style:{"margin-left":"".concat(1.5*n.block.content.indent,"rem")}},[ke,Object(c["i"])(i,{block:n.block,onKeydown:t[1]||(t[1]=Object(c["M"])((function(e){return o.handleIndent(e,n.block)}),["tab"]))},null,8,["block"])],4)})),ye={name:"NumberItem",props:["block"],component:{P:oe},setup:function(){var e=be(),t=e.handleIndent;return{handleIndent:t}}};n("17d3");ye.render=ge,ye.__scopeId="data-v-706ce222";var Ie=ye,je=Object(c["O"])("data-v-2a45146e");Object(c["v"])("data-v-2a45146e");var Oe={class:"dividing-content"};Object(c["t"])();var xe=je((function(e,t,n,o,r,a){return Object(c["s"])(),Object(c["e"])("div",Oe,[Object(c["i"])("div",{class:"dividing-line",id:n.block.id},null,8,["id"])])})),we={name:"DividingLine",props:["block"]};n("ed79");we.render=xe,we.__scopeId="data-v-2a45146e";var Be=we,_e=Object(c["O"])("data-v-7128d1dc");Object(c["v"])("data-v-7128d1dc");var Ne={class:"d-flex"};Object(c["t"])();var Pe=_e((function(e,t,n,o,r,a){var i=Object(c["A"])("font-awesome-icon"),l=Object(c["A"])("P");return Object(c["s"])(),Object(c["e"])("div",Ne,[Object(c["i"])("div",{class:"prefix toggle-button",onClick:t[1]||(t[1]=function(){return o.toggleShowAndUpdateHiddenBlocks&&o.toggleShowAndUpdateHiddenBlocks.apply(o,arguments)}),type:"button"},[Object(c["i"])(i,{icon:["fas",o.iconName],key:o.iconName,size:"1x"},null,8,["icon"])]),Object(c["i"])(l,{block:n.block},null,8,["block"])])})),Ce=n("2909"),Se={name:"ToggleList",props:["block"],components:{P:oe},setup:function(e){var t=Object(G["b"])(),n=Object(F["e"])(),o=n.isShow,r=n.toggleShow,a=n.handleShow,i=Object(c["c"])((function(){return o.value?"caret-down":"caret-right"})),l=function(){r();var n=e.block.blocks;if(o.value){if(0===n.length)return;t.commit("blocks/deleteIdsToHiddenBlocksIds",Object(Ce["a"])(n))}else t.commit("blocks/addIdsToHiddenBlocksIds",Object(Ce["a"])(n))};return Object(c["q"])((function(){t.dispatch("blocks/addBlockInside",e.block),t.commit("blocks/addIdsToHiddenBlocksIds",Object(Ce["a"])(e.block.blocks)),a(!1)})),{isShow:o,toggleShow:r,iconName:i,toggleShowAndUpdateHiddenBlocks:l}}};n("92f7");Se.render=Pe,Se.__scopeId="data-v-7128d1dc";var Te=Se,Ee=Object(c["O"])("data-v-710fe8cc");Object(c["v"])("data-v-710fe8cc");var qe=Object(c["h"])("\n    ");Object(c["t"])();var Ae=Ee((function(e,t,n,o,r,a){var i=Object(c["A"])("ContentEditable");return Object(c["s"])(),Object(c["e"])("div",{class:"code-container",style:{height:"".concat(o.editorHeight,"px")}},[Object(c["i"])("pre",{class:"language-javascript",id:"code-editor",scrollLeft:o.scrollLeft,style:{height:"".concat(o.editorHeight,"px")}},[Object(c["i"])("code",{class:"language-javascript",textContent:Object(c["E"])(o.codeText)},null,8,["textContent"]),qe],12,["scrollLeft"]),Object(c["i"])(i,{placeholder:o.placeholderInfo,id:n.block.id,className:"editor",value:n.block.content.text,onInput:o.editCodeText,onKeydown:o.tabAction,onPaste:o.pasteAction,onFocus:t[1]||(t[1]=function(){return o.setFocusBlock(n.block.id)}),onScroll:o.setScrollLeft},null,8,["placeholder","id","value","onInput","onKeydown","onPaste","onScroll"])],4)})),De=n("8c7a"),Re=n.n(De),Fe=(n("cb55"),n("6cf3"),n("416b"),n("6605"),n("c0f1"),n("a11e"),n("3835")),We=(n("4de4"),n("2ca0"),n("d81d"),n("159b"),n("4ec9"),n("3ca3"),n("ddb0"),n("7db0"),function(e){if(!e.childNodes.length){var t=document.createTextNode("");e.appendChild(t)}}),Le=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},Ke=function(e){return!e.includes("\r\n")},ze=function(e){return e>=0?e:0},He=function(e){var t,n=function(){return document.createTextNode("\n")};t=e.includes("\r")?e.split("\r\n"):e.split("\n");for(var c=document.createDocumentFragment(),o=t.length-1,r=0;r<t.length;r+=1){var a=document.createTextNode(t[r]);c.appendChild(a),r<o&&c.appendChild(n())}return c},Me=function(){var e=function(e){if("Tab"===e.key){e.preventDefault();var t=e.currentTarget;We(t);var n="  ",c=window.getSelection(),o=c.getRangeAt(0).cloneRange(),r=o.startContainer,a=o.startOffset,i=o.endContainer,l=o.endOffset,u=function(){var e=function(e){return Array.prototype.indexOf.call(t.childNodes,e)},n=e(r),c=e(i),o=function(e){return e>=n&&e<=c},a=function(e){return"\n"!==e.textContent},l=function(e,t){return a(e)&&o(t)};return Array.prototype.filter.call(t.childNodes,l)},s=function(e){var t=e,n=0;while(t.startsWith(" "))n+=1,t=t.substring(1);return n},d=function(e){var t=e.textContent,c=s(t);return c>=n.length?n.length:c},f=function(e){return Array.prototype.map.call(e,(function(e){return document.createTextNode(n+e.textContent)}))},p=function(e){return Array.prototype.map.call(e,(function(e){var t=d(e);return document.createTextNode(e.textContent.substring(t))}))},b=function(){var e=r.textContent,o=e.substring(0,a)+n+e.substring(a),i=document.createTextNode(o);t.replaceChild(i,r),c.setBaseAndExtent(i,a+n.length,i,a+n.length)},m=function(){var e=d(r),n=r.textContent,o=document.createTextNode(n.substring(e));t.replaceChild(o,r);var i=ze(a-e);c.setBaseAndExtent(o,i,o,i)},v=function(){var e=u(),o=f(e),r=a+n.length,i=l+n.length;e.forEach((function(e,n){t.replaceChild(o[n],e)})),c.setBaseAndExtent(o[0],r,o[o.length-1],i)},h=function(){var e=u(),n=p(e),o=ze(a-d(e[0])),r=ze(l-d(e[e.length-1]));e.forEach((function(e,c){return t.replaceChild(n[c],e)})),c.setBaseAndExtent(n[0],o,n[n.length-1],r)},k=function(){var t=new Map([[{isCollapse:!0,hasShiftKey:!0},m],[{isCollapse:!0,hasShiftKey:!1},b],[{isCollapse:!1,hasShiftKey:!0},h],[{isCollapse:!1,hasShiftKey:!1},v]]),n=Object(Ce["a"])(t).find((function(t){var n=Object(Fe["a"])(t,1),c=n[0];return c.isCollapse===o.collapsed&&c.hasShiftKey===e.shiftKey}));n[1]()};k()}},t=function(e){We(e.currentTarget);var t=e.clipboardData.getData("Text");t&&(Ke(t)||(e.preventDefault(),Object(c["n"])((function(){var n=window.getSelection(),c=n.focusNode,o=He(t);if(c!==e.currentTarget)if("\n"===c.textContent)Le(o,c);else{var r=document.createTextNode("\n");Le(r,c),Le(o,r)}else e.currentTarget.appendChild(o)}))))};return{handleIndent:e,handlePaste:t,generateTextAndWrapNodes:He}},Ue=Me,Je={name:"CodeEditor",props:["block"],components:{ContentEditable:p["a"]},setup:function(e){var t="輸入或貼上code...\ntab鍵往前縮排、shift + tab往後縮排\n搭配反白文字範圍可以多行縮排",n=Object(b["a"])(),o=n.editBlockData,r=n.setFocusBlock,a=Ue(),i=a.handleIndent,l=a.handlePaste,u=a.generateTextAndWrapNodes,s=Object(c["x"])(""),d=function(e){s.value=e.target.scrollLeft},f=Object(c["x"])(0),p=function(e){f.value=e},m=Object(c["x"])(""),v=function(e){m.value=e},h=function(e){Object(c["n"])((function(){v(e.innerText),p(e.getBoundingClientRect().height)}))},k=function(e){"Tab"===e.key&&(i(e),h(e.currentTarget))},g=function(e){l(e),h(e.currentTarget)},y=function(e){if(!(e.childNodes.length>1)){var t=u(e.innerText);e.replaceChildren(),e.appendChild(t)}};Object(c["q"])((function(){var t=document.getElementById(e.block.id);y(t),h(t)}));var I=function(e){var t=e.target;h(t)};return Object(c["J"])(m,(function(t){Object(c["n"])((function(){Re.a.highlightAll(),o(e.block.id,{text:t,html:t},"content")}))})),{placeholderInfo:t,scrollLeft:s,setScrollLeft:d,editorHeight:f,tabAction:k,pasteAction:g,handlePaste:l,codeText:m,editCodeText:I,setFocusBlock:r}}};n("ab0f");Je.render=Ae,Je.__scopeId="data-v-710fe8cc";var Ge=Je,Xe=Object(c["O"])("data-v-4df6ac71");Object(c["v"])("data-v-4df6ac71");var Ve={class:"quote"};Object(c["t"])();var $e=Xe((function(e,t,n,o,r,a){var i=Object(c["A"])("BlockEditable");return Object(c["s"])(),Object(c["e"])("div",Ve,[Object(c["i"])(i,{block:n.block,placeholder:"請輸入引言",className:"h5"},null,8,["block"])])})),Qe={name:"Quote",props:["block"],components:{BlockEditable:v}};n("ca60");Qe.render=$e,Qe.__scopeId="data-v-4df6ac71";var Ye=Qe,Ze=(n("a4d3"),n("e01a"),Object(c["O"])("data-v-64bdfe5f"));Object(c["v"])("data-v-64bdfe5f");var et={class:"card"},tt={class:"card-body"},nt={class:"card-title"},ct={class:"card-text"},ot={class:"card-url"};Object(c["t"])();var rt=Ze((function(e,t,n,o,r,a){var i=Object(c["A"])("ContentEditable");return Object(c["s"])(),Object(c["e"])(c["a"],null,[n.block.content.url?Object(c["f"])("",!0):(Object(c["s"])(),Object(c["e"])(i,{key:0,placeholder:"ctrl + v 貼上網址",onPaste:Object(c["N"])(o.pasteLinkAction,["stop"]),onKeydown:t[1]||(t[1]=Object(c["N"])((function(e){return o.deleteInput(e,n.block)}),["stop"])),onFocus:t[2]||(t[2]=function(){return o.setFocusBlock(n.block.id)})},null,8,["onPaste"])),n.block.content.url?(Object(c["s"])(),Object(c["e"])("div",{key:1,class:"lp-container",onClick:t[3]||(t[3]=function(e){return o.openInNewTab(n.block.content.url)})},[Object(c["i"])("div",{class:"lp-img",style:{"background-image":"url(".concat(n.block.content.image,")")}},null,4),Object(c["i"])("div",et,[Object(c["i"])("div",tt,[Object(c["i"])("h6",nt,Object(c["E"])(n.block.content.title),1),Object(c["i"])("p",ct,Object(c["E"])(n.block.content.description),1),Object(c["i"])("p",ot,Object(c["E"])(n.block.content.url),1)])])])):Object(c["f"])("",!0)],64)})),at={name:"LinkPreview",props:["block"],components:{ContentEditable:p["a"]},setup:function(e){var t=Object(b["a"])(),n=t.editBlockData,c=t.deleteInput,o=t.setFocusBlock,r="https://api.linkpreview.net",a="a1f90b74d8c73d2e2ca415e33bc74ae7",i=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){var n,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={key:a,q:t},e.prev=1,e.next=4,fetch(r,{method:"POST",mode:"cors",body:JSON.stringify(n)});case 4:return c=e.sent,e.next=7,c.json();case 7:return o=e.sent,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e["catch"](1),console.log(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(){var c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.readText();case 3:return c=t.sent,n(e.block.id,{title:"",description:"",image:"",url:c},"content"),t.next=7,i(c);case 7:o=t.sent,n(e.block.id,{title:o.title||"無法顯示",description:o.description||"",image:o.image||"",url:o.url||c},"content"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),u=function(e){window.open(e,"_blank")};return{pasteLinkAction:l,deleteInput:c,setFocusBlock:o,openInNewTab:u}}};n("919e");at.render=rt,at.__scopeId="data-v-64bdfe5f";var it=at;function lt(e,t,n,o,r,a){var i=Object(c["A"])("router-view");return Object(c["s"])(),Object(c["e"])(i)}n("b64b");var ut=n("88b4"),st=n.n(ut),dt=n("6c02"),ft=n("990b"),pt=n("407b"),bt=n("475e"),mt={name:"App",setup:function(){var e=Object(G["b"])(),t=Object(dt["d"])(),n=Object(dt["c"])(),c=new st.a,o=function(){"/signin"!==n.path&&"/register"!==n.path||(console.log("跳到首頁"),t.push("/"))},r=function(e){Object.keys(e).forEach((function(t){c.set(t,e[t])}))},a=function(t){Object.keys(t).forEach((function(n){var c=t[n]||[];e.commit("setStoreData",{data:c,name:n})}))},i=function(e){var t=c.get("userInfo");return!(!t||(null===t||void 0===t?void 0:t.email)!==e.email)},l=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(bt["a"])(t.email);case 3:if(n=e.sent,!n){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 9:return e.prev=9,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){var n,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:if(n=e.sent,n){e.next=11;break}return u={userInfo:{email:t.email,headshot:t.photoURL,name:t.displayName,recentPageIds:[]},pages:[pt["a"].page],blocks:pt["a"].blocks},e.next=7,Object(bt["b"])(u);case 7:return r(u),a(u),o(),e.abrupt("return");case 11:if(!i(t)){e.next=15;break}return a({pages:c.get("pages"),blocks:c.get("blocks"),userInfo:c.get("userInfo")}),o(),e.abrupt("return");case 15:return e.next=17,Object(bt["a"])(t.email);case 17:s=e.sent,r(s),a(s),o();case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var n=Object(P["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!c.get("userInfo")){n.next=11;break}return n.prev=1,n.next=4,Object(bt["c"])();case 4:n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](1),console.log(n.t0);case 9:e.dispatch("resetStoreData"),c.removeAll();case 11:t.push("/signin");case 12:case"end":return n.stop()}}),n,null,[[1,6]])})));return function(){return n.apply(this,arguments)}}();Object(ft["a"])((function(e){var t=e?"signin":"signout",n={signin:function(){return u(e)},signout:s};n[t]()}))}};mt.render=lt;var vt=mt,ht=new st.a,kt=[{path:"/",name:"Home",meta:{requiresAuth:!0},component:function(){return n.e("chunk-55c84c12").then(n.bind(null,"bb51"))}},{path:"/userinfo",name:"UserInfo",component:function(){return n.e("chunk-1fc39ff8").then(n.bind(null,"7b7d"))}},{path:"/signin",name:"SignIn",component:function(){return n.e("chunk-006a47c7").then(n.bind(null,"832b"))}},{path:"/register",name:"Register",component:function(){return n.e("chunk-43663db4").then(n.bind(null,"d64c"))}}],gt=Object(dt["a"])({history:Object(dt["b"])("/note/"),routes:kt});gt.beforeEach((function(e,t,n){var c=e.name;ht.get("userInfo")?(console.log("已登入"),"SignIn"===c||"Register"===c?n({name:"Home"}):n()):(console.log("未登入"),"SignIn"===c||"Register"===c?n():n({name:"SignIn"}))}));var yt=gt,It=n("4360");n("8e1f");r["c"].add(l["f"]),r["c"].add(l["e"]),r["c"].add(i["g"]),r["c"].add(i["f"]),r["c"].add(i["d"]),r["c"].add(l["s"]),r["c"].add(l["i"]),r["c"].add(l["j"]),r["c"].add(l["l"]),r["c"].add(i["e"]),r["c"].add(l["C"]),r["c"].add(l["k"]),r["c"].add(l["p"]),r["c"].add(l["o"]),r["c"].add(l["z"]),r["c"].add(l["u"]),r["c"].add(i["a"]),r["c"].add(i["h"]),r["c"].add(l["B"]),r["c"].add(l["y"]),r["c"].add(i["b"]),r["c"].add(l["g"]),r["c"].add(l["h"]),r["c"].add(l["x"]),r["c"].add(l["n"]),r["c"].add(l["b"]),r["c"].add(l["c"]),r["c"].add(l["q"]),r["c"].add(l["a"]),r["c"].add(i["c"]),r["c"].add(a["b"]),r["c"].add(a["a"]),r["c"].add(a["c"]),r["c"].add(l["d"]),r["c"].add(l["m"]),r["c"].add(l["A"]),r["c"].add(l["v"]),r["c"].add(l["w"]),r["c"].add(l["r"]),r["c"].add(l["t"]),Object(c["d"])(vt).component("font-awesome-icon",o["a"]).component("H1",k).component("H2",j).component("H3",B).component("P",oe).component("Img",M).component("Page",V).component("Video",ee).component("NumberItem",ve).component("BulletItem",Ie).component("TodoItem",ue).component("DividingLine",Be).component("ToggleList",Te).component("CodeEditor",Ge).component("Quote",Ye).component("LinkPreview",it).use(It["a"]).use(yt).mount("#app")},"5e85":function(e,t,n){},"60c1":function(e,t,n){},"6b6a":function(e,t,n){},"6cb0":function(e,t,n){"use strict";var c=n("5530"),o=n("d4ec"),r=n("bee2"),a=(n("d81d"),n("7db0"),n("7a23")),i=n("5502"),l=n("13bf"),u=function(){var e=Object(i["b"])(),t=Object(a["c"])((function(){return e.getters["blocks/currentFocusBlock"]})),n=function(t){var n={value:0},c={value:t};while(""!==c.value.parentId)c.value=Object(a["c"])((function(){return e.getters["blocks/chooseBlock"](c.value.parentId)})).value,n.value+=1;return n.value},u=function(e){var t=document.querySelector('[data-block-id="'.concat(e,'"]')),n=t.getBoundingClientRect().width;return n},s=function(){return{text:"",html:""}},d=function(e){return{text:"",html:"",indent:t.value.type===e?t.value.content.indent:0}},f=function(){return{url:"",compressionWidth:""}},p=function(){return{text:"",html:"",isChecked:!1}},b=function(){return{text:"",html:"",isHidden:!1}},m=function(){return{title:"",description:"",image:"",url:""}},v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"p";Object(o["a"])(this,e),this.type=t,this.id=Object(l["c"])(),this.parentId="",this.content="",this.className="style-text-color__default"}return Object(r["a"])(e,[{key:"addType",value:function(e){return this.type=e,this}},{key:"addContent",value:function(e){return this.content=e,this}},{key:"addBlocks",value:function(e){return this.blocks=e,this}},{key:"addParentId",value:function(e){return this.parentId=e,this}},{key:"addClassName",value:function(e){return this.className=e,this}},{key:"copyBlock",value:function(e){return this.type=e.type,this.id=e.id,this.parentId=e.parentId,this.content=Object(c["a"])({},e.content),this}}]),e}(),h=function e(t){Object(o["a"])(this,e);var n={h1:function(){return new v(t).addContent(s())},h2:function(){return new v(t).addContent(s())},h3:function(){return new v(t).addContent(s())},p:function(){return new v(t).addContent(s())},quote:function(){return new v(t).addContent(s())},codeEditor:function(){return new v(t).addContent(s())},numberItem:function(){return new v(t).addContent(d("numberItem"))},bulletItem:function(){return new v(t).addContent(d("bulletItem"))},linkPreview:function(){return new v(t).addContent(m())},img:function(){return new v(t).addContent(f())},video:function(){return new v(t).addContent(f())},todoItem:function(){return new v(t).addContent(p())},dividingLine:function(){return new v(t)},page:function(){return new v(t)}};return n[t]?n[t]():null},k=function(e){var t=JSON.parse(JSON.stringify(e));return t.id=Object(l["c"])(),t},g=function(e){var t=JSON.parse(JSON.stringify(e));return t.map((function(e){var t=Object(c["a"])({},e);return t.id=Object(l["c"])(),t}))},y=function(t){var n=Object(a["c"])((function(){return e.state.blocktype})).value,c=n.find((function(e){return e.type===t}));return!!c},I=function(t){var n=Object(a["c"])((function(){return e.state.blocktype})).value,c=n.find((function(e){return t(e.hotKey)}));return c?c.type:null};return{Block:v,BlockFactory:h,newTextContent:s,newListContent:d,newMediaContent:f,newCheckBoxContent:p,newToggleTypeContent:b,newLinkContent:m,getLevelOfBlock:n,getCopyBlockWithNewId:k,getCopyBlocksWithNewId:g,getBlockWidthById:u,getTypeByHotKey:I,hasBlockType:y}};t["a"]=u},"8e1f":function(e,t,n){},"919e":function(e,t,n){"use strict";n("2179")},"92f7":function(e,t,n){"use strict";n("ee9f")},"990b":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var c=n("1da1"),o=(n("96cf"),n("d3b7"),n("260b")),r=n("05fe"),a=function(e){r["a"].onAuthStateChanged((function(t){e(t)}))},i=function(){r["a"].signOut(),console.log("已登出")},l=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){r["a"].createUserWithEmailAndPassword(t,n).then((function(t){e(t)})).catch((function(e){c(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){r["a"].signInWithEmailAndPassword(t,n).then((function(t){e(t)})).catch((function(e){c(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),s=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){return{google:function(){return new o["a"].auth.GoogleAuthProvider},facebook:function(){return new o["a"].auth.FacebookAuthProvider},twitter:function(){return new o["a"].auth.TwitterAuthProvider}}},c=n()[t](),e.abrupt("return",new Promise((function(e,t){r["a"].signInWithPopup(c).then((function(t){e(t)})).catch((function(e){t(e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},a11e:function(e,t,n){},ab0f:function(e,t,n){"use strict";n("5e85")},b9b6:function(e,t,n){},bae2:function(e,t,n){},c960:function(e,t,n){"use strict";var c=n("1da1"),o=n("2909"),r=(n("96cf"),n("159b"),n("d3b7"),n("25f0"),n("d81d"),n("fb6a"),n("a434"),n("99af"),n("4de4"),n("7a23")),a=n("5502"),i=n("6cb0"),l=n("13bf"),u=function(){var e=Object(a["b"])(),t=Object(r["c"])((function(){return e.getters["pages/currentPage"]})),n=Object(r["c"])((function(){return e.getters["blocks/currentFocusBlock"]})),u=Object(r["c"])((function(){return e.getters["blocks/currentBlocksIds"]})),s=Object(r["c"])((function(){return e.state.blocks.currentFocusBlockId})),d=Object(r["c"])((function(){return e.getters["blocks/getIndexByBlockId"](n.value.id)})),f=Object(r["c"])((function(){return e.getters["blocks/selectedBlocks"]})),p=Object(r["c"])((function(){return e.state.blocks.selectedBlocksIds})),b=Object(r["c"])((function(){return e.state.blocks.clipboardBlocks})),m=Object(i["a"])(),v=m.BlockFactory,h=m.getCopyBlockWithNewId,k=m.getCopyBlocksWithNewId,g=m.getTypeByHotKey,y=function(t,n){e.commit("pages/editPageData",{key:t,value:n})},I=function(n,c,o){""!==t.value?e.commit("blocks/editBlockData",{id:n,value:c,key:o}):console.log("請先選擇頁面")},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.commit("blocks/setFocusBlockById",t)},O=function(t){e.commit("blocks/setClipboardBlocks",t)},x=function(){e.commit("blocks/setClipboardBlocks",k(f.value))},w=function(t,n){if("Enter"===n.key&&!n.shiftKey){if(n.preventDefault(),0===t.blocks.length)return void e.dispatch("blocks/addBlock",{type:"p"});j(t.blocks[0])}},B=function(t){var n,c=function(){if(t.blocks&&0!==t.blocks.length){var n=Object(r["c"])((function(){return e.getters["blocks/childrenCurrentBlocks"](t.id)}));n.value.forEach((function(t){e.commit("blocks/editBlockData",{id:t.id,key:"parentId",value:""})}))}},o=function(){if(""!==t.parentId){var n=Object(r["c"])((function(){return e.getters["blocks/chooseBlock"](t.parentId)}));e.commit("blocks/deleteIdToBlocksOfBlock",{block:n.value,blockId:t.id})}},a=function(){var n=Object(r["c"])((function(){return e.getters["pages/choosePage"](t.content)}));e.dispatch("pages/deletePage",n.value)};if("page"!==t.type){c(),o();var i=Object(r["c"])((function(){return e.getters["blocks/getPrevBlockByid"](t.id)}));e.commit("blocks/setFocusBlockById",null===(n=i.value)||void 0===n?void 0:n.id),e.dispatch("blocks/deleteBlock",{block:t})}else a()},_=function(e,t){""===e.target.innerText&&8===e.keyCode&&B(t)},N=function(t){var n=function(n){""!==t.parentId&&e.commit("blocks/editBlockData",{id:n.id,value:t.parentId,key:"parentId"})},c={h1:function(){return new v("p")},h2:function(){return new v("p")},h3:function(){return new v("p")},p:function(){return new v("p")},quote:function(){return new v("p")},numberItem:function(){return new v("numberItem")},bulletItem:function(){return new v("bulletItem")},todoItem:function(){return new v("todoItem")}},o=c[t.type]();e.dispatch("blocks/addBlockAndSetFocusBlockId",{block:o,index:d.value+1}),n(o)},P=function(t){var n=h(t);e.commit("blocks/addBlock",n),e.commit("pages/addIdToBlocksOfPage",{id:n.id,index:d.value+1}),e.commit("blocks/setSelectedBlocksIds",[n.id]),e.commit("blocks/setFocusBlockById","")},C=function t(n,c){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=function(){var t=JSON.parse(JSON.stringify(n));t.id=c(t.id),t.createdTime=(new Date).getTime().toString(),t.editTime=(new Date).getTime().toString(),t.blocks=t.blocks.map((function(e){return c(e)})),t.parentId=0===o?t.parentId:c(t.parentId),e.commit("pages/addPage",t)};a(),n.blocks.forEach((function(n){var a=Object(r["c"])((function(){return e.getters["blocks/chooseBlock"](n)})).value,i=JSON.parse(JSON.stringify(a));if(i.id=c(i.id),"page"===a.type){i.content=c(i.content);var l=a.content,u=Object(r["c"])((function(){return e.getters["pages/choosePage"](l)}));t(u.value,c,o+1)}e.commit("blocks/addBlock",i)}))},S=function(n,c){var a=new v(c);if("page"===c){var i=Object(l["c"])();e.commit("pages/addPage",{id:i,name:"untitle",blocks:[],parentId:t.value.id,createdTime:(new Date).getTime().toString(),editTime:(new Date).getTime().toString(),tags:[],cover:""}),a.content=i}e.commit("blocks/addBlock",a);var u=Object(o["a"])(t.value.blocks),s=u.indexOf(n.id);u[s]=a.id,e.commit("pages/editPageData",{key:"blocks",value:u}),e.commit("blocks/deleteBlock",n),Object(r["n"])((function(){var e=document.querySelector('[data-block-id="'.concat(a.id,'"]'));e&&e.querySelector("[contenteditable]")&&e.querySelector("[contenteditable]").focus()}))},T=function(e,t){if(s.value===e.id){if(""===n.value.content.text&&"Backspace"===t.key&&(t.preventDefault(),B(e)),"Enter"===t.key&&!t.shiftKey){t.preventDefault();var c=g((function(e){return e===t.target.innerText.slice(1)}));if(c)return void S(e,c);N(e)}"c"===t.key&&t.ctrlKey&&O([]),"d"===t.key&&t.ctrlKey&&(t.preventDefault(),P(e),document.activeElement.blur())}},E=function(t){e.commit("pages/setCurrentPageId",t)},q=function(t){e.commit("pages/editPageData",{key:"blocks",value:t})},A=function(t,n){var c=[];t.forEach((function(t){e.commit("blocks/addBlock",t),c.push(t.id)}));var r=Object(o["a"])(u.value);Array.prototype.splice.apply(r,n(c)),q(r)},D=function(t){var n=t.content,c=Object(r["c"])((function(){return e.getters["pages/choosePage"](n)})),o=Object(l["f"])();e.commit("blocks/editBlockData",{id:t.id,value:"".concat(o(c.value.id)),key:"content"}),C(c.value,o)},R=function(){var t=k(f.value);A(t,(function(t){var n=p.value[p.value.length-1],c=Object(r["c"])((function(){return e.getters["blocks/getIndexByBlockId"](n)}));return[c.value+1,0].concat(Object(o["a"])(t))}));var n=t.map((function(e){return e.id}));e.commit("blocks/setSelectedBlocksIds",n);var c=t.filter((function(e){return"page"===e.type}));c.length&&c.forEach((function(e){D(e)}))},F=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var i,l,u,s,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){navigator.clipboard.readText("text").then((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,i();case 3:if(l=t.sent,""===l){t.next=7;break}return O([]),t.abrupt("return");case 7:if(b.value){t.next=9;break}return t.abrupt("return");case 9:if(b.value.length){t.next=11;break}return t.abrupt("return");case 11:a.preventDefault(),u=k(b.value),n.value?A(u,(function(e){return[d.value+1,0].concat(Object(o["a"])(e))})):(console.log("11111111111111111"),A(u,(function(t){if(p.value.length<1)return[-1,0].concat(Object(o["a"])(t));var n=p.value[p.value.length-1],c=Object(r["c"])((function(){return e.getters["blocks/getIndexByBlockId"](n)}));return[c.value+1,0].concat(Object(o["a"])(t))}))),s=u.map((function(e){return e.id})),e.commit("blocks/setSelectedBlocksIds",s),f=u.filter((function(e){return"page"===e.type})),f.length&&f.forEach((function(e){D(e)}));case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),W=function(){p.value.forEach((function(t){var n=Object(r["c"])((function(){return e.getters["blocks/chooseBlock"](t)}));B(n.value)}))};return{editBlockData:I,editPageData:y,checkKeydownInBlockContent:T,checkKeydownInPageData:w,deleteBlockAndDependByPressBackspace:B,deleteInput:_,setFocusBlock:j,goCurrentPage:E,setClipboardBlocks:O,setSelectedBlocksInClipboardBlocks:x,pasteBlocksAction:F,deleteSelectedBlocks:W,duplicateBlock:P,duplicateBlocksFromSelectedBlocks:R}};t["a"]=u},ca60:function(e,t,n){"use strict";n("3709")},cccd:function(e,t,n){"use strict";n("bae2")},d386:function(e,t,n){"use strict";n("e716")},d3fe:function(e,t,n){"use strict";n("113a")},dad4:function(e,t,n){},e030:function(e,t,n){"use strict";n("dad4")},e716:function(e,t,n){},e784:function(e,t,n){"use strict";n("fa4a")},ed79:function(e,t,n){"use strict";n("07f7")},ee9f:function(e,t,n){},f225:function(e,t,n){"use strict";var c=n("7a23");function o(e,t,n,o,r,a){return t[7]||(Object(c["C"])(-1),t[7]=Object(c["i"])("div",{type:"text",contenteditable:"plaintext-only",class:n.className,placeholder:n.placeholder,id:n.id,value:n.value||"",onInput:t[1]||(t[1]=function(t){return e.$emit("input",t)}),onKeydown:t[2]||(t[2]=function(t){return e.$emit("keydown",t)}),onKeyup:t[3]||(t[3]=function(t){return e.$emit("keyup",t)}),onFocus:t[4]||(t[4]=function(t){return e.$emit("focus",t)}),onBlur:t[5]||(t[5]=function(t){return e.$emit("blur",t)}),onPaste:t[6]||(t[6]=function(t){return e.$emit("paste",t)})},Object(c["E"])(n.value||""),43,["placeholder","id","value"]),Object(c["C"])(1),t[7])}var r={name:"ContentEditable",emits:["input","keydown","keyup","focus","blur","paste"],props:["placeholder","className","id","value"]};r.render=o;t["a"]=r},fa4a:function(e,t,n){},febf:function(e,t,n){"use strict";var c=n("1da1"),o=(n("96cf"),n("159b"),n("99af"),n("fb6a"),n("d3b7"),n("7a23")),r=function(){var e=function(e){var t="";return e.forEach((function(e,n,c){t+="#".concat(e).concat(n===c.length-1?"":", ")})),document.querySelectorAll(t)},t=function(e){var t="";return"."===e.charAt(0)&&(t=document.getElementsByClassName(e.slice(1))[0]),"#"===e.charAt(0)&&(t=document.getElementById(e.slice(1))),t},n=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){for(var c=t.clipboardData||t.originalEvent.clipboardData,o=c.items,r=null,a=0;a<o.length;a+=1)0===o[a].type.indexOf("image")&&(r=o[a].getAsFile());if(null!==r){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(e){n(e)},i.readAsDataURL(r)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){for(var c=t.clipboardData||t.originalEvent.clipboardData,o=c.items,r=null,a=0;a<o.length;a+=1)0===o[a].type.indexOf("image")&&(r=o[a].getAsFile());null!==r&&e(r),n()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=!1,t={x:"",y:""},n=function(e,n){t.x=e,t.y=n},c=Object(o["w"])({x:"",y:""}),r=function(e,t){c.x=e,c.y=t},a=function(t,o){t.preventDefault(),n(t.clientX,t.clientY),r(0,0),e=!0,o(c)},i=function(n,o){!0===e&&(n.preventDefault(),r(n.clientX-t.x,n.clientY-t.y),o(c))},l=function(t,n){t.preventDefault(),e=!1,n(c)};return{mouseDown:a,mouseMove:i,mouseUp:l,mouseOffset:c}},i=function(e,t){var n=t.clientX,c=t.clientY,o=e.getBoundingClientRect();return!(n<o.left||n>o.left+o.width||c<o.top||c>o.top+o.height)},l=function(e,t){var n=t.clientX,c=t.clientY,o=e.getBoundingClientRect();return n>o.left&&n<o.left+o.width&&c>o.top+o.height},u=function(){var e=function(){var e={dom:"",value:""};return{setDom:function(t){t&&(e.dom=t)},setValue:function(t){e.value=t},getDom:function(){return e.dom},getValue:function(){return e.value},reset:function(){e.dom="",e.value=""}}};return{domObject:e}};return{getElementsByIdsInArr:e,getElementBySelector:t,getDataURLByClipBoardData:n,getBlobByClipBoardData:r,dragDropEffect:u,getMouseOffsetByClickElAndMove:a,isMouseInsideElement:i,isMouseUnderTheElement:l}};t["a"]=r}});
//# sourceMappingURL=app.ec1658cc.js.map